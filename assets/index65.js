var y=Object.defineProperty;var g=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var C=(n,r,o)=>r in n?y(n,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[r]=o,f=(n,r)=>{for(var o in r||(r={}))A.call(r,o)&&C(n,o,r[o]);if(g)for(var o of g(r))j.call(r,o)&&C(n,o,r[o]);return n};import{r as i,a as e,F as _,A as x,j as m,aw as b}from"./index.js";import{E as k,C as p,P,M as v,a as S}from"./index14.js";import{d as z}from"./Edit.js";import{I as h}from"./IconButton.js";import{S as T,a as $}from"./StyledCheckboxInherit.js";import{d as w}from"./Visibility.js";import{d as F,a as R}from"./SkipNextOutlined.js";import{P as E}from"./Pagination.js";import{L as I}from"./Loader.js";import{T as B}from"./TextInput.js";import{d as M}from"./Search.js";import{d as L}from"./Close2.js";import{A as O}from"./AutocompleteServer.js";import{u as H}from"./useLocalStorage.js";import{A as V}from"./Alert.js";import{F as q}from"./Backdrop.js";import{C as D}from"./ErrorIcon.js";import"./HeaderTitle.js";import"./Typography.js";import"./Divider.js";import"./yup.module.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useControlled.js";import"./useIsFocusVisible.js";import"./ButtonBase.js";import"./emotion-react.browser.esm.js";import"./Checkbox.js";import"./useFormControl.js";import"./TextField.js";import"./react-is.production.min.js";import"./Modal2.js";import"./isHostComponent.js";import"./Portal.js";import"./Paper.js";import"./Grow.js";import"./List.js";import"./GlobalStyles.js";import"./Grid.js";import"./CircularProgress.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./Close.js";import"./Popper.js";import"./Chip.js";import"./StyledGridOverlay.js";import"./Box.js";const W="_container_1ejrf_1",G="_pagination_1ejrf_7",J="_response_1ejrf_14",K="_table_1ejrf_19",Q="_header_1ejrf_24",U="_row_1ejrf_39",X="_column_1ejrf_39",Y="_selected_1ejrf_51",Z="_checkboxColumn_1ejrf_55",ee="_columnCenter_1ejrf_60",te="_removeSpacing_1ejrf_64",oe="_message_1ejrf_69";var a={container:W,pagination:G,response:J,table:K,header:Q,row:U,column:X,selected:Y,checkboxColumn:Z,columnCenter:ee,removeSpacing:te,message:oe};const re=n=>{const{setCertificacion:r}=i.exports.useContext(k);return e(_,{children:e(h,{className:a.removeSpacing,color:"primary",size:"small",disableRipple:!0,onClick:()=>r(n),children:e(z,{})})})},ne=n=>{const{authState:r}=i.exports.useContext(x),{tipo:o}=r;return o&&o==="Super"?e("td",{className:`${a.column} ${a.columnCenter}`,children:e(re,f({},n))}):e(_,{})},se=n=>{const{authState:r}=i.exports.useContext(x),{tipo:o}=r,{pagination:s}=i.exports.useContext(p),{selected:t,setSelected:c}=s;return o&&o==="Super"?e("td",{className:`${a.column} ${a.columnCenter}`,children:e(T,{size:"small",disableRipple:!0,checked:!!t.find(l=>l.id===n.id),onChange:l=>{l.target.checked?c([...t,n]):c(t.filter(d=>d.id!==n.id))}})}):e(_,{})},ae=n=>{const{setPreview:r}=i.exports.useContext(P),[,o]=i.exports.useContext(v),{cpa:s}=i.exports.useContext(S);return e("td",{className:a.column,children:e(h,{className:a.removeSpacing,color:"primary",size:"small",disableRipple:!0,onClick:s?()=>r(n):()=>o(!0),children:e(w,{})})})},ie=()=>{const{pagination:n}=i.exports.useContext(p),{fetcher:r,selected:o}=n,[,,s]=r;return e("tbody",{children:s==null?void 0:s.resultados.map(t=>m("tr",{className:`${a.row} ${o.find(c=>c.id===t.id)?a.selected:""}`,children:[e(se,f({},t)),e(ne,f({},t)),e(ae,f({},t)),e("td",{className:a.column,children:t.cliente.nom_cliente}),m("td",{className:a.column,children:[t.negocios[0].tipo," ",t.negocios[0].nombre_negocio]}),e("td",{className:a.column,children:t.cliente.ruc}),m("td",{className:a.column,children:[t.nombre_encargado," ",t.apellido_encargado]}),e("td",{className:a.column,children:t.identificacion_encargado}),e("td",{className:a.column,children:t.banco.nombre}),e("td",{className:a.column,children:t.fecha_impresion?b(t.fecha_impresion,"dd/MM/yyyy"):"NO IMPRESA"}),m("td",{className:a.column,children:[t.nombre," ",t.apellido]}),e("td",{className:a.column,children:b(t.fecha_creacion,"dd/MM/yyyy hh:mm aaaa")})]},t.id))})},ce=()=>{const{pagination:n}=i.exports.useContext(p),{fetcher:r,selected:o,setSelected:s}=n,[,,t]=r;return e("th",{className:a.checkboxColumn,children:e($,{size:"small",disableRipple:!0,color:"secondary",checked:!!(t!=null&&t.resultados.every(c=>!!o.find(l=>l.id===c.id))),indeterminate:!!(t!=null&&t.resultados.some(c=>!!o.find(l=>l.id===c.id)))&&!(t!=null&&t.resultados.every(c=>!!o.find(l=>l.id===c.id))),onChange:c=>{if(c.target.checked&&t){const l=t.resultados.filter(d=>!o.find(N=>d.id===N.id));s([...o,...l])}else s([])}})})},le=()=>{const{authState:n}=i.exports.useContext(x),{tipo:r}=n;return e("thead",{className:a.header,children:m("tr",{children:[r&&r==="Super"&&e(ce,{}),r&&r==="Super"&&e("th",{}),e("th",{}),e("th",{children:"Raz\xF3n social"}),e("th",{children:"Negocio"}),e("th",{children:"Ruc"}),e("th",{children:"Representante"}),e("th",{children:"C\xE9dula"}),e("th",{children:"Banco"}),e("th",{children:"Impresa"}),e("th",{children:"Realizado por"}),e("th",{children:"Fecha de creaci\xF3n"})]})})},me=()=>{const{pagination:n}=i.exports.useContext(p),{fetcher:r,page:o,setPage:s}=n,[,,t]=r;return m("div",{className:a.pagination,children:[e(h,{size:"small",onClick:()=>s(o-10),disabled:o<=10,children:e(F,{})}),e(E,{color:"primary",count:t==null?void 0:t.paginas,page:o,onChange:(c,l)=>s(l)}),e(h,{size:"small",onClick:()=>s(o+10),disabled:!!(t&&t.paginas-n.page<10),children:e(R,{})})]})},de=()=>e("div",{className:a.loader,children:e(I,{margin:20})}),pe="_toolbar_1pm2e_1",ue="_title_1pm2e_7",he="_divToolbar_1pm2e_13",fe="_child_1pm2e_20",_e="_formSearch_1pm2e_24",xe="_searchAdorment_1pm2e_28",ge="_banner_1pm2e_34";var u={toolbar:pe,title:ue,divToolbar:he,child:fe,formSearch:_e,searchAdorment:xe,banner:ge};const Ce=()=>{const n=i.exports.useRef(null),{pagination:r}=i.exports.useContext(p),{search:o,sendSearch:s}=r,[t,c]=i.exports.useState(o);return e("form",{onSubmit:d=>{d.preventDefault(),s(t)},className:u.formSearch,children:e(B,{label:"Buscar...",size:"small",fullWidth:!0,autoFocus:!0,value:t,onChange:d=>c(d.target.value),inputRef:n,helperText:"Por raz\xF3n social, ruc, nombre del representante, c\xE9dula o pasaporte",InputProps:{endAdornment:m("div",{className:u.searchAdorment,children:[e(h,{size:"small",children:e(M,{})}),t!==""&&e(h,{size:"small",onClick:()=>{var d;c(""),s(""),(d=n==null?void 0:n.current)==null||d.focus()},children:e(L,{})})]})}})})},be=()=>{const{cpa:n,setCpa:r}=i.exports.useContext(S),[,o]=H("cpa-value");return e(_,{children:e(O,{className:u.child,ref:null,inputProps:{label:"CPA a imprimir"},disableStyle:!0,enableFirst:!0,value:n,size:"small",onChange:(s,t)=>{r(t),t&&o(t)},isOptionEqualToValue:(s,t)=>s.id===t.id,urlFetch:"/cpa",getOptionLabel:s=>s.nombre})})},Se=()=>{const{authState:n}=i.exports.useContext(x),{tipo:r}=n,{pagination:o}=i.exports.useContext(p),{selected:s}=o,t=i.exports.useMemo(()=>s.length,[s]);return m(_,{children:[m("div",{className:u.toolbar,children:[e("span",{className:u.title,children:"Certificaciones de ingresos realizadas"}),m("div",{className:u.divToolbar,children:[e(Ce,{}),e(be,{})]}),r&&!["Super","Administrador"].includes(r)&&e(V,{variant:"outlined",severity:"warning",color:"warning",children:"Para imprimir favor dirigirse a un administrador"})]}),e(q,{in:t!==0,unmountOnExit:!0,children:m("div",{className:u.banner,children:[t," fila",t>1?"s":""," seleccionada",t>1?"s":""]})})]})},Ne=()=>{const{pagination:n}=i.exports.useContext(p),{fetcher:r}=n,[,,,o]=r;return e("div",{className:a.message,children:e(D,{label:o==null?void 0:o.message})})},St=()=>{const{pagination:n}=i.exports.useContext(p),{fetcher:r}=n,[o,,s,t]=r;return m("div",{className:a.container,children:[e(Se,{}),e("div",{className:a.response,children:m("table",{className:a.table,children:[e(le,{}),e(ie,{})]})}),o&&e(de,{}),!o&&t&&e(Ne,{}),!o&&s&&!t&&e(me,{})]})};export{St as default};
