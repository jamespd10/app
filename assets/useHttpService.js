import{r as S,A as h}from"./index.js";import{A as w,O as y,B as o}from"./constants.js";const O=()=>{const{authState:n}=S.exports.useContext(h);return async({url:r,method:c,data:i,params:u,signal:t,isBlob:p})=>{const{token:d}=n,a=new URLSearchParams(u).toString(),m=a?o+r+"?"+a:o+r;try{const e=await fetch(m,{method:c,credentials:"include",mode:"cors",body:JSON.stringify(i),headers:new Headers({"Content-Type":"application/json","x-api-key":w,"x-token":d||"","Access-Control-Allow-Origin":y}),signal:t});if(e.ok){const s=p?await e.blob():await e.json();return{status:e.status,data:s}}else{const s=await e.text(),x=JSON.parse(s);return{status:e.status,error:{message:x.message}}}}catch{return t!=null&&t.aborted?{status:-1,error:{message:"Se cancel\xF3 el env\xEDo de la solicitud"}}:{status:-1,error:{message:"Ocurri\xF3 un error inesperado"}}}}};export{O as u};
