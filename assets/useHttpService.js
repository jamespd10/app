import{r as S,A as h,ab as w,ac as y,ad as o}from"./index.js";const b=()=>{const{authState:n}=S.exports.useContext(h);return async({url:r,method:c,data:u,params:i,signal:t,isBlob:d})=>{const{token:p}=n,a=new URLSearchParams(i).toString(),x=a?o+r+"?"+a:o+r;try{const e=await fetch(x,{method:c,credentials:"include",mode:"cors",body:JSON.stringify(u),headers:new Headers({"Content-Type":"application/json","x-api-key":w,"x-token":p||"","Access-Control-Allow-Origin":y}),signal:t});if(e.ok){const s=d?await e.blob():await e.json();return{status:e.status,data:s}}else{const s=await e.text(),m=JSON.parse(s);return{status:e.status,error:{message:m.message}}}}catch{return t!=null&&t.aborted?{status:-1,error:{message:"Se cancel\xF3 el env\xEDo de la solicitud"}}:{status:-1,error:{message:"Ocurri\xF3 un error inesperado"}}}}};export{b as u};
