var D=Object.defineProperty,P=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var A=(r,o,t)=>o in r?D(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,f=(r,o)=>{for(var t in o||(o={}))w.call(o,t)&&A(r,t,o[t]);if(B)for(var t of B(o))R.call(o,t)&&A(r,t,o[t]);return r},u=(r,o)=>P(r,j(o));import{r as m,j as c,a as e,F as k}from"./index.js";import{B as L,a as z}from"./BootstrapModalTitle.js";import{d as G}from"./WorkspacePremium.js";import{C as H,E as g}from"./index14.js";import{b as U}from"./ModalTransition.js";import{L as F}from"./LoadingButton.js";import{P as W,B as $,a as q,N as J,E as K,A as O}from"./AbrirCuenta.js";import{A as Q}from"./Alert.js";import{B as V}from"./BootstrapDivContent.js";import{T as M}from"./Typography.js";import"./Close2.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useControlled.js";import"./useIsFocusVisible.js";import"./IconButton.js";import"./ButtonBase.js";import"./emotion-react.browser.esm.js";import"./HeaderTitle.js";import"./Divider.js";import"./Loader.js";import"./Grid.js";import"./CircularProgress.js";import"./useLocalStorage.js";import"./yup.module.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./Backdrop.js";import"./Modal2.js";import"./isHostComponent.js";import"./Portal.js";import"./Paper.js";import"./Button.js";import"./SelectHookForm.js";import"./Box.js";import"./TextField.js";import"./react-is.production.min.js";import"./Grow.js";import"./List.js";import"./GlobalStyles.js";import"./MenuItem.js";import"./listItemIconClasses.js";import"./listItemTextClasses.js";import"./TextInput.js";import"./Stack.js";import"./AutocompleteServer.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./Close.js";import"./Popper.js";import"./Chip.js";import"./CheckBoxOutlineBlank.js";import"./Checkbox.js";import"./DecimalInput.js";import"./CustomDecimal.js";import"./react-number-format.es.js";import"./string.helper.js";import"./DireccionProvider.js";import"./DatePicker.js";import"./MobileDatePicker.js";import"./MonthPicker.js";import"./PureDateInput.js";import"./CalendarPicker.js";import"./InputAdornment.js";import"./DialogContent.js";import"./index11.js";import"./FormControlLabel.js";const X=()=>{const{pagination:r}=m.exports.useContext(H),{fetcher:o,selected:t,setSelected:n}=r,[,,a,,x]=o,p=m.exports.useContext(g),{certificacion:C,setCertificacion:T}=p,{fetcher:y,divRef:N}=p,[,I,,,,S]=y;return{handleEdit:async s=>{var E;(E=N.current)==null||E.scrollTo(0,0);const{id:d}=C,b=await I(`/admin/certificaciones-ingresos/${d}`,{method:"PUT",data:s});if(b.data&&!b.error){const l=a.resultados,h=l.findIndex(i=>i.id===d);if(h!==-1&&(l[h]=u(f({},C),{negocios:s.negocios,cliente:s.cliente,banco:s.banco,identificacion_encargado:s.identificacion_encargado,nombre_encargado:s.nombre_encargado,apellido_encargado:s.apellido_encargado,cargo_encargado:s.cargo_encargado,genero:s.genero,periodos:s.periodos.map(i=>u(f({},i),{gasto:(Math.round(Number(i.gasto)*100)/100).toFixed(2),ingreso:(Math.round(Number(i.ingreso)*100)/100).toFixed(2),total:(Math.round((Number(i.ingreso)-Number(i.gasto))*100)/100).toFixed(2)}))}),x(u(f({},a),{resultados:l})),t.length!==0&&t.findIndex(i=>i.id===d)!==-1)){const i=t.findIndex(v=>v.id===d),_=t;_[i]=l[h],n([..._])}T(null),S()}}}},Y=()=>{const r=m.exports.useContext(g),{form:o,fetcher:t,setCertificacion:n}=r,[a]=t,{handleSubmit:x}=o,{handleEdit:p}=X();return c(U,{children:[e(F,{loading:a,variant:"outlined",color:"inherit",onClick:()=>n(null),children:"Cerrar"}),e(F,{loading:a,variant:"outlined",color:"primary",onClick:x(p),children:"Guardar"})]})},Z=()=>{const{fetcher:r}=m.exports.useContext(g),[o,,t,n]=r;return e(k,{children:!o&&(t||n)&&e(Q,{variant:"filled",severity:t?"success":"error",children:(t==null?void 0:t.message)||(n==null?void 0:n.message)})})},Ct=()=>{const r=m.exports.useContext(g),{certificacion:o,setCertificacion:t,divRef:n}=r;return c(L,{open:!!o,fullWidth:!0,fullScreen:!0,children:[e(z,{onClose:()=>t(null),children:c(M,{textTransform:"uppercase",display:"flex",flexDirection:"row",gap:1,alignItems:"center",children:[e(G,{}),"Formulario para editar certificaci\xF3n de ingresos"]})}),c(V,{divRef:n,children:[c(M,{component:"span",variant:"h3",textTransform:"uppercase",children:["Realizado por: ",o==null?void 0:o.nombre," ",o==null?void 0:o.apellido]}),e(Z,{}),e(W,{}),e($,{}),e(q,{}),e(J,{}),e(K,{}),e(O,{})]}),e(Y,{})]})};export{Ct as default};
