var v=Object.defineProperty,j=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var F=(t,o,r)=>o in t?v(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,f=(t,o)=>{for(var r in o||(o={}))P.call(o,r)&&F(t,r,o[r]);if(B)for(var r of B(o))R.call(o,r)&&F(t,r,o[r]);return t},u=(t,o)=>j(t,w(o));import{r as c,j as p,a as i,F as k}from"./index.js";import{B as L,a as z}from"./BootstrapModalTitle.js";import{d as G}from"./WorkspacePremium.js";import{C as H,E as g}from"./index14.js";import{D as U}from"./DialogActions.js";import{L as M}from"./LoadingButton.js";import W from"./Persona.js";import $ from"./BancoCliente.js";import q from"./Periodos.js";import J from"./Negocios2.js";import{A as K}from"./Alert.js";import{B as O}from"./BootstrapDivContent.js";import Q from"./Especiales.js";import V from"./AbrirCuenta.js";import{T}from"./Typography.js";import"./ModalTransition.js";import"./Backdrop.js";import"./Fade.js";import"./Modal2.js";import"./isHostComponent.js";import"./useControlled.js";import"./Portal.js";import"./Paper.js";import"./Close2.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useIsFocusVisible.js";import"./IconButton.js";import"./ButtonBase.js";import"./emotion-react.browser.esm.js";import"./HeaderTitle.js";import"./Divider.js";import"./Loader.js";import"./Grid.js";import"./CircularProgress.js";import"./useLocalStorage.js";import"./yup.module.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./Button.js";import"./SelectHookForm.js";import"./Box.js";import"./TextField.js";import"./useFormControl.js";import"./formControlState.js";import"./react-is.production.min.js";import"./Grow.js";import"./List.js";import"./outlinedInputClasses.js";import"./GlobalStyles.js";import"./MenuItem.js";import"./listItemIconClasses.js";import"./listItemTextClasses.js";import"./TextInput.js";import"./Stack.js";import"./AutocompleteServer.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./Close.js";import"./Popper.js";import"./Chip.js";import"./CheckBoxOutlineBlank.js";import"./Checkbox.js";import"./DecimalInput.js";import"./CustomDecimal.js";import"./react-number-format.es.js";import"./string.helper.js";import"./FormControlLabel.js";import"./DireccionProvider.js";import"./DatePicker.js";import"./MobileDatePicker.js";import"./MonthPicker.js";import"./PureDateInput.js";import"./CalendarPicker.js";import"./InputAdornment.js";import"./DialogContent.js";import"./index11.js";const X=()=>{const{pagination:t}=c.exports.useContext(H),{fetcher:o,selected:r,setSelected:n}=t,[,,m,,x]=o,a=c.exports.useContext(g),{certificacion:C,setCertificacion:y}=a,{fetcher:A,divRef:D}=a,[,I,,,,N]=A;return{handleEdit:async s=>{var E;(E=D.current)==null||E.scrollTo(0,0);const{id:d}=C,b=await I(`/admin/certificaciones-ingresos/${d}`,{method:"PUT",data:s});if(b.data&&!b.error){const l=m.resultados,h=l.findIndex(e=>e.id===d);if(h!==-1&&(l[h]=u(f({},C),{negocios:s.negocios,cliente:s.cliente,banco:s.banco,identificacion_encargado:s.identificacion_encargado,nombre_encargado:s.nombre_encargado,apellido_encargado:s.apellido_encargado,cargo_encargado:s.cargo_encargado,genero:s.genero,periodos:s.periodos.map(e=>u(f({},e),{gasto:(Math.round(Number(e.gasto)*100)/100).toFixed(2),ingreso:(Math.round(Number(e.ingreso)*100)/100).toFixed(2),total:(Math.round((Number(e.ingreso)-Number(e.gasto))*100)/100).toFixed(2)}))}),x(u(f({},m),{resultados:l})),r.length!==0&&r.findIndex(e=>e.id===d)!==-1)){const e=r.findIndex(S=>S.id===d),_=r;_[e]=l[h],n([..._])}y(null),N()}}}},Y=()=>{const t=c.exports.useContext(g),{form:o,fetcher:r,setCertificacion:n}=t,[m]=r,{handleSubmit:x}=o,{handleEdit:a}=X();return p(U,{children:[i(M,{loading:m,variant:"outlined",color:"inherit",onClick:()=>n(null),children:"Cerrar"}),i(M,{loading:m,variant:"outlined",color:"primary",onClick:x(a),children:"Guardar"})]})},Z=()=>{const{fetcher:t}=c.exports.useContext(g),[o,,r,n]=t;return i(k,{children:!o&&(r||n)&&i(K,{variant:"filled",severity:r?"success":"error",children:(r==null?void 0:r.message)||(n==null?void 0:n.message)})})},Dr=()=>{const t=c.exports.useContext(g),{certificacion:o,setCertificacion:r,divRef:n}=t;return p(L,{open:!!o,fullWidth:!0,fullScreen:!0,children:[i(z,{onClose:()=>r(null),children:p(T,{textTransform:"uppercase",display:"flex",flexDirection:"row",gap:1,alignItems:"center",children:[i(G,{}),"Formulario para editar certificaci\xF3n de ingresos"]})}),p(O,{divRef:n,children:[p(T,{component:"span",variant:"h3",textTransform:"uppercase",children:["Realizado por: ",o==null?void 0:o.nombre," ",o==null?void 0:o.apellido]}),i(Z,{}),i(W,{}),i($,{}),i(q,{}),i(J,{}),i(Q,{}),i(V,{})]}),i(Y,{})]})};export{Dr as default};
