var N=Object.defineProperty;var u=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var b=(o,r,t)=>r in o?N(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t,i=(o,r)=>{for(var t in r||(r={}))T.call(r,t)&&b(o,t,r[t]);if(u)for(var t of u(r))g.call(r,t)&&b(o,t,r[t]);return o};var h=(o,r)=>{var t={};for(var e in o)T.call(o,e)&&r.indexOf(e)<0&&(t[e]=o[e]);if(o!=null&&u)for(var e of u(o))r.indexOf(e)<0&&g.call(o,e)&&(t[e]=o[e]);return t};import{r as d,j as k,a as f}from"./index.js";import{F as A}from"./ContainerFormulario.js";import{T as q}from"./index18.js";import{C as B}from"./index51.js";import{S as G}from"./Snackbar.js";import{A as I}from"./Alert.js";import{B as j}from"./Button.js";import"./Loader.js";import"./Grid.js";import"./Typography.js";import"./CircularProgress.js";import"./emotion-react.browser.esm.js";import"./FormularioRealizar.js";import"./ErrorIcon.js";import"./StyledGridOverlay.js";import"./Box.js";import"./object.helper.js";import"./array.js";import"./upperFirst.js";import"./regex.js";import"./Lazy.js";import"./useGetDefaultValues.js";import"./HeaderTitle.js";import"./Divider.js";import"./StyledSpeedDial.js";import"./Assignment.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useControlled.js";import"./useIsFocusVisible.js";import"./FabButtonAction.js";import"./react-is.production.min.js";import"./AssignmentRounded.js";import"./ButtonBase.js";import"./Tooltip.js";import"./Popper.js";import"./Portal.js";import"./appendOwnerState.js";import"./isHostComponent.js";import"./Grow.js";import"./ContentProvider.js";import"./useModal.js";import"./SpeedDial.module.js";import"./Backdrop.js";import"./Stack.js";import"./Paid.js";import"./BootstrapModalTitle.js";import"./ModalTransition.js";import"./Modal2.js";import"./Paper.js";import"./Close2.js";import"./IconButton.js";import"./BootstrapDivContent.js";import"./index30.js";import"./Close.js";const w="_container_ymlqu_1",E="_item_ymlqu_7";var v={container:w,item:E};const H=()=>{const{cliente:o}=d.exports.useContext(B),{form:r,fetcher:t}=d.exports.useContext(A),{setFormState:e}=r,[,c]=t,{pagination:s}=d.exports.useContext(q),{fetcher:p}=s,[,,m,,x]=p;return{handleSave:async n=>{c("/admin/f430",{method:n.id?"PUT":"POST",data:n}).then(C=>{if(C.data){const S=C.data,{message:U}=S,a=h(S,["message"]),F=o,{negocios:z}=F,y=h(F,["negocios"]),l=(m==null?void 0:m.resultados)||[];if(n.id){e(i(i({},n),a));const _=l.findIndex(D=>D.id===n.id);_!==-1&&(l[_]=i(i(i({},n),y),a))}else e(i(i({},n),a)),l.unshift(i(i(i({},n),y),a));x({paginas:(m==null?void 0:m.paginas)||1,resultados:[...l]})}})}}},Mo=()=>{const{form:o,fetcher:r}=d.exports.useContext(A),{formState:t,onFormSubmit:e}=o,{fecha_enviado:c}=t,[,,s,p,,m]=r,{handleSave:x}=H();return k("div",{className:v.container,children:[f(G,{open:!!(s||p),autoHideDuration:6e3,onClose:()=>m(),children:f(I,{onClose:()=>m(),severity:s?"success":"error",variant:"filled",color:s?"success":"error",children:(s==null?void 0:s.message)||(p==null?void 0:p.message)})}),!c&&f(j,{className:v.item,variant:"outlined",color:"primary",onClick:()=>e(x),children:"Guardar"}),!c&&f(j,{className:v.item,variant:"outlined",color:"error",children:"Guardar y Enviar a Facturaci\xF3n"})]})};export{Mo as default};
