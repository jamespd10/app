var A=Object.defineProperty,q=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var T=(s,n,t)=>n in s?A(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t,S=(s,n)=>{for(var t in n||(n={}))F.call(n,t)&&T(s,t,n[t]);if(M)for(var t of M(n))I.call(n,t)&&T(s,t,n[t]);return s},N=(s,n)=>q(s,w(n));var z=(s,n)=>{var t={};for(var e in s)F.call(s,e)&&n.indexOf(e)<0&&(t[e]=s[e]);if(s!=null&&M)for(var e of M(s))n.indexOf(e)<0&&I.call(s,e)&&(t[e]=s[e]);return t};import{r as l,aw as _,j as x,a}from"./index.js";import{s as V}from"./array.helper.js";import{a as b}from"./FormLiquidacionProvider.js";import{f}from"./string.helper.js";import"./useForm.js";import"./object.helper.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./usePrint.js";import"./index23.js";const y="_container_q7r74_1",L="_item_q7r74_17",$="_title_q7r74_30";var p={container:y,item:L,title:$};const C=()=>{const{form:s}=l.exports.useContext(b),{formState:n,setFormState:t}=s,{salarios:e}=n,m=l.exports.useMemo(()=>{if(e.length===0)return 0;const r=[...e],i=V(r,11),o=[];for(let c=0;c<i.length;c++)o.push(i[c].map(d=>Number(d.salario)).reduce((d,u)=>d+u)/11);return o.reduce((c,d)=>c+d)/o.length},[e]);return l.exports.useEffect(()=>{const r=()=>{t(i=>N(S({},i),{vacaciones:m.toString()}))};return r(),r()},[m]),{vacaciones:m}},P=()=>{const{form:s}=l.exports.useContext(b),{formState:n,setFormState:t}=s,{salarios:e,total_salarios_decimos:m}=n,{vacaciones:r}=C(),i=l.exports.useMemo(()=>{const o=e;if(Number(m)>0&&o.length>0)return(Number(m)+Number(r))/12;if(o.length>0){const c=o.length-1;if(["4","8","12"].includes(_(o[c].mes,"M"))&&Number(_(o[c].mes,"d"))>15)return Number(o[c].salario)/2/12;const d=o.findIndex((h,g)=>["12","8","4"].includes(_(h.mes,"M"))&&g!==o.length-1),u=[...o].splice(d,o.length-1);if(u.length>0){const h=u.length-1;return(u.map((g,v)=>v===0||v===h&&["4","8","12"].includes(_(g.mes,"M"))?Number(g.salario)/2:Number(g.salario)).reduce((g,v)=>g+v)+r)/12}}return 0},[e,r,m]);return l.exports.useEffect(()=>{const o=()=>{t(c=>N(S({},c),{decimo:i.toString()}))};return o(),o()},[i]),{decimo:i}},R=()=>{const{form:s}=l.exports.useContext(b),{formState:n}=s,{salarios:t}=n,e=l.exports.useMemo(()=>t.length>0?t.map(r=>Number(r.salario)).reduce((r,i)=>r+i):0,[t]),m=l.exports.useMemo(()=>t.length>0?e/t.length:0,[t,e]);return{totalSalarios:e,promedio:m}},D=()=>{const{form:s}=l.exports.useContext(b),{formState:n,setFormState:t}=s,{tipo_liquidacion:e,salarios:m,preaviso:r}=n,{totalSalarios:i}=R(),o=l.exports.useMemo(()=>e==="Despido"?i*.0654:0,[i,e]),c=l.exports.useMemo(()=>e==="Despido"?Number(r):0,[r,e]),d=l.exports.useMemo(()=>["Despido","Renuncia"].includes(e)&&m.length>12?i*.01923:0,[i,e,m]);return l.exports.useEffect(()=>{const u=()=>{t(h=>N(S({},h),{indemnizacion:o.toString(),prima_antiguedad:d.toString()}))};return u(),u()},[o,d]),{indemnizacion:o,preaviso:c,primaAntiguiedad:d}},j=()=>{const{form:s}=l.exports.useContext(b),{setFormState:n}=s,{decimo:t}=P(),{vacaciones:e}=C(),m=z(D(),[]),{indemnizacion:r,primaAntiguiedad:i,preaviso:o}=m,c=l.exports.useMemo(()=>{const u=e*.0975,h=t*.0725,g=i*.0975,v=r*.0975,E=o*.0975;return u+h+g+v+E},[t,r,i,e,o]),d=l.exports.useMemo(()=>{const u=e*.0125,h=i*.0125,g=r*.0125,v=o*.0125;return u+h+g+v},[r,i,e,o]);return l.exports.useEffect(()=>{const u=()=>{n(h=>N(S({},h),{seguro_educativo:d.toString(),seguro_social:c.toString()}))};return u(),u()},[d,c]),{seguroSocial:c,seguroEducativo:d}},k=()=>{const{decimo:s}=P(),{vacaciones:n}=C(),t=D(),{indemnizacion:e,primaAntiguiedad:m,preaviso:r}=t,{seguroEducativo:i,seguroSocial:o}=j(),c=l.exports.useMemo(()=>s+n+e+m+r,[s,n,e,m,r]);return{total:l.exports.useMemo(()=>c-(i+o),[i,o,c]),subTotal:c}},te=()=>{const{seguroSocial:s,seguroEducativo:n}=j(),{vacaciones:t}=C(),{decimo:e}=P(),m=z(D(),[]),{indemnizacion:r,preaviso:i,primaAntiguiedad:o}=m,{subTotal:c,total:d}=k();return x("div",{className:p.container,children:[a("span",{className:`${p.item} ${p.title}`,children:"Totales"}),t>0&&x("div",{className:p.item,children:[a("span",{children:"Vacaciones proporcionales: "}),a("strong",{children:f(t)})]}),e>0&&x("div",{className:p.item,children:[a("span",{children:"D\xE9cimo tercer mes: "}),a("strong",{children:f(e)})]}),o>0&&x("div",{className:p.item,children:[a("span",{children:"Prima de antiguedad: "}),a("strong",{children:f(o)})]}),r>0&&x("div",{className:p.item,children:[a("span",{children:"Indemnizaci\xF3n: "}),a("strong",{children:f(r)})]}),i>0&&x("div",{className:p.item,children:[a("span",{children:"Preaviso: "}),a("strong",{children:f(i)})]}),e>0&&x("div",{className:p.item,children:[a("span",{children:"Sub-total: "}),a("strong",{children:f(c)})]}),e>0&&x("div",{className:p.item,children:[a("span",{children:"Seguro social: "}),a("strong",{children:f(s)})]}),e>0&&x("div",{className:p.item,children:[a("span",{children:"Seguro educativo: "}),a("strong",{children:f(n)})]}),e>0&&x("div",{className:p.item,children:[a("span",{children:"Total de deducciones: "}),a("strong",{children:f(n+s)})]}),e>0&&x("div",{className:p.item,children:[a("span",{children:"Total neto recibido: "}),a("strong",{children:f(d)})]})]})};export{te as default};
