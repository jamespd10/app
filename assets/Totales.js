var V=Object.defineProperty,w=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var A=(t,s,e)=>s in t?V(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,b=(t,s)=>{for(var e in s||(s={}))B.call(s,e)&&A(t,e,s[e]);if(y)for(var e of y(s))I.call(s,e)&&A(t,e,s[e]);return t},M=(t,s)=>w(t,$(s));var T=(t,s)=>{var e={};for(var o in t)B.call(t,o)&&s.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&y)for(var o of y(t))s.indexOf(o)<0&&I.call(t,o)&&(e[o]=t[o]);return e};import{r as p,as as z,aw as C,j as x,a as c,F as L}from"./index.js";import{s as k}from"./array.helper.js";import{a as S}from"./FormLiquidacionProvider.js";import{f as N}from"./string.helper.js";import"./useForm.js";import"./object.helper.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./usePrint.js";import"./index23.js";const G="_container_q7r74_1",H="_item_q7r74_17",J="_title_q7r74_30";var h={container:G,item:H,title:J};const F=()=>{const{form:t}=p.exports.useContext(S),{formState:s,setFormState:e}=t,{salarios:o,total_salarios_vacaciones:l,paga_vacaciones:i}=s,m=p.exports.useMemo(()=>{if(Boolean(Number(i))===!1)return 0;if(Number(l)!==0)return Number(l);if(o.length===0)return 0;const u=[...o],n=k(u,12),r=[];for(let a=0;a<n.length;a++)r.push(n[a].map(d=>Number(d.salario)).reduce((d,f)=>d+f)/11);return r.reduce((a,d)=>a+d)/r.length},[o,l,i]);return z(()=>{const u=()=>{e(n=>M(b({},n),{vacaciones:m.toString()}))};return u(),u()},[m]),{vacaciones:m}},D=()=>{const{form:t}=p.exports.useContext(S),{formState:s,setFormState:e}=t,{salarios:o,total_salarios_decimos:l,fecha_inicio:i}=s,{paga_decimo:m}=s,{vacaciones:u}=F(),n=p.exports.useMemo(()=>{if(Boolean(Number(m))===!1)return 0;const r=[...o].reverse();if(Number(l)>0&&r.length>0)return(Number(l)+Number(u))/12;if(r.length>0){const a=r.findIndex((v,g)=>["12","8","4"].includes(C(v.mes,"M"))),d=a!==-1?a:r.length-1,f=[...r].splice(0,d+1).reverse();if(f.length>0)return(f.map((g,_)=>C(i,"yyyy-MM-01")===C(g.mes,"yyyy-MM-01")&&Number(C(i,"dd"))>=16?Number(g.salario):["4","8","12"].includes(C(g.mes,"M"))?Number(g.salario)/2:Number(g.salario)).reduce((g,_)=>g+_)+u)/12}return 0},[o,u,l,i,m]);return z(()=>{const r=()=>{e(a=>M(b({},a),{decimo:n.toString()}))};return r(),r()},[n]),{decimo:n}},K=()=>{const{form:t}=p.exports.useContext(S),{formState:s}=t,{salarios:e}=s,o=p.exports.useMemo(()=>e.length>0?e.map(i=>Number(i.salario)).reduce((i,m)=>i+m):0,[e]),l=p.exports.useMemo(()=>e.length>0?o/e.length:0,[e,o]);return{totalSalarios:o,promedio:l}},j=()=>{const{form:t}=p.exports.useContext(S),{formState:s,setFormState:e}=t,{tipo_liquidacion:o,preaviso:l}=s,{paga_indemnizacion:i,paga_prima_antiguedad:m}=s,{totalSalarios:u}=K(),n=p.exports.useMemo(()=>Boolean(Number(i))===!1?0:o==="Despido"?u*.0654:0,[u,o,i]),r=p.exports.useMemo(()=>o==="Despido"?Number(l):0,[l,o]),a=p.exports.useMemo(()=>Boolean(Number(m))===!0?u*.01923:0,[u,m]);return z(()=>{const d=()=>{e(f=>M(b({},f),{indemnizacion:n.toString(),prima_antiguedad:a.toString()}))};return d(),d()},[n,a]),{indemnizacion:n,preaviso:r,primaAntiguiedad:a}},E=()=>{const{form:t}=p.exports.useContext(S),{setFormState:s,formState:e}=t,{paga_seguro_educativo:o,paga_seguro_social:l}=e,{decimo:i}=D(),{vacaciones:m}=F(),u=T(j(),[]),{indemnizacion:n,primaAntiguiedad:r,preaviso:a}=u,d=p.exports.useMemo(()=>{if(Boolean(Number(l))===!1)return 0;const v=m*.0975,g=i*.0725,_=r*.0975,P=n*.0975,q=a*.0975;return v+g+_+P+q},[i,n,r,m,a,l]),f=p.exports.useMemo(()=>{if(Boolean(Number(o))===!1)return 0;const v=m*.0125,g=r*.0125,_=n*.0125,P=a*.0125;return v+g+_+P},[n,r,m,a,o]);return z(()=>{const v=()=>{s(g=>M(b({},g),{seguro_educativo:f.toString(),seguro_social:d.toString()}))};return v(),v()},[f,d]),{seguroSocial:d,seguroEducativo:f}},O=()=>{const{decimo:t}=D(),{vacaciones:s}=F(),e=j(),{indemnizacion:o,primaAntiguiedad:l,preaviso:i}=e,{seguroEducativo:m,seguroSocial:u}=E(),n=p.exports.useMemo(()=>t+s+o+l+i,[t,s,o,l,i]);return{total:p.exports.useMemo(()=>n-(m+u),[m,u,n]),subTotal:n}},ie=()=>{const{form:t}=p.exports.useContext(S),{formState:s}=t,{fecha_inicio:e,fecha_liquidacion:o}=s,{seguroSocial:l,seguroEducativo:i}=E(),{vacaciones:m}=F(),{decimo:u}=D(),n=T(j(),[]),{indemnizacion:r,preaviso:a,primaAntiguiedad:d}=n,{subTotal:f,total:v}=O();return e!==""&&o!==""?x("div",{className:h.container,children:[c("span",{className:`${h.item} ${h.title}`,children:"Totales"}),x("div",{className:h.item,children:[c("span",{children:"Vacaciones proporcionales: "}),c("strong",{children:N(m)})]}),x("div",{className:h.item,children:[c("span",{children:"D\xE9cimo tercer mes: "}),c("strong",{children:N(u)})]}),d>0&&x("div",{className:h.item,children:[c("span",{children:"Prima de antiguedad: "}),c("strong",{children:N(d)})]}),r>0&&x("div",{className:h.item,children:[c("span",{children:"Indemnizaci\xF3n: "}),c("strong",{children:N(r)})]}),a>0&&x("div",{className:h.item,children:[c("span",{children:"Preaviso: "}),c("strong",{children:N(a)})]}),x("div",{className:h.item,children:[c("span",{children:"Sub-total: "}),c("strong",{children:N(f)})]}),x("div",{className:h.item,children:[c("span",{children:"Seguro social: "}),c("strong",{children:N(l)})]}),x("div",{className:h.item,children:[c("span",{children:"Seguro educativo: "}),c("strong",{children:N(i)})]}),x("div",{className:h.item,children:[c("span",{children:"Total de deducciones: "}),c("strong",{children:N(i+l)})]}),x("div",{className:h.item,children:[c("span",{children:"Total neto recibido: "}),c("strong",{children:N(v)})]})]}):c(L,{})};export{ie as default};
