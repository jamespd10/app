var w=Object.defineProperty,B=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var A=(t,s,o)=>s in t?w(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,_=(t,s)=>{for(var o in s||(s={}))I.call(s,o)&&A(t,o,s[o]);if(C)for(var o of C(s))E.call(s,o)&&A(t,o,s[o]);return t},b=(t,s)=>B(t,$(s));var D=(t,s)=>{var o={};for(var e in t)I.call(t,e)&&s.indexOf(e)<0&&(o[e]=t[e]);if(t!=null&&C)for(var e of C(t))s.indexOf(e)<0&&E.call(t,e)&&(o[e]=t[e]);return o};import{r as u,as as y,aw as M,j as f,a as l,F as L}from"./index.js";import{s as R}from"./array.helper.js";import{a as N}from"./FormLiquidacionProvider.js";import{f as v}from"./string.helper.js";import"./useForm.js";import"./object.helper.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./usePrint.js";import"./index23.js";const k="_container_q7r74_1",G="_item_q7r74_17",H="_title_q7r74_30";var h={container:k,item:G,title:H};const z=()=>{const{form:t}=u.exports.useContext(N),{formState:s,setFormState:o}=t,{salarios:e}=s,m=u.exports.useMemo(()=>{if(e.length===0)return 0;const i=[...e],r=R(i,12),a=[];for(let n=0;n<r.length;n++)a.push(r[n].map(c=>Number(c.salario)).reduce((c,p)=>c+p)/11);return a.reduce((n,c)=>n+c)/a.length},[e]);return y(()=>{const i=()=>{o(r=>b(_({},r),{vacaciones:m.toString()}))};return i(),i()},[m]),{vacaciones:m}},T=()=>{const{form:t}=u.exports.useContext(N),{formState:s,setFormState:o}=t,{salarios:e,total_salarios_decimos:m,fecha_inicio:i}=s,{vacaciones:r}=z(),a=u.exports.useMemo(()=>{const n=[...e].reverse();if(Number(m)>0&&n.length>0)return(Number(m)+Number(r))/12;if(n.length>0){const c=n.findIndex((x,d)=>["12","8","4"].includes(M(x.mes,"M"))),p=c!==-1?c:n.length-1,g=[...n].splice(0,p+1).reverse();if(g.length>0)return(g.map((d,S)=>M(i,"yyyy-MM-01")===M(d.mes,"yyyy-MM-01")&&Number(M(i,"dd"))>=16?Number(d.salario):["4","8","12"].includes(M(d.mes,"M"))?Number(d.salario)/2:Number(d.salario)).reduce((d,S)=>d+S)+r)/12}return 0},[e,r,m,i]);return y(()=>{const n=()=>{o(c=>b(_({},c),{decimo:a.toString()}))};return n(),n()},[a]),{decimo:a}},J=()=>{const{form:t}=u.exports.useContext(N),{formState:s}=t,{salarios:o}=s,e=u.exports.useMemo(()=>o.length>0?o.map(i=>Number(i.salario)).reduce((i,r)=>i+r):0,[o]),m=u.exports.useMemo(()=>o.length>0?e/o.length:0,[o,e]);return{totalSalarios:e,promedio:m}},j=()=>{const{form:t}=u.exports.useContext(N),{formState:s,setFormState:o}=t,{tipo_liquidacion:e,salarios:m,preaviso:i}=s,{totalSalarios:r}=J(),a=u.exports.useMemo(()=>e==="Despido"?r*.0654:0,[r,e]),n=u.exports.useMemo(()=>e==="Despido"?Number(i):0,[i,e]),c=u.exports.useMemo(()=>["Despido","Renuncia"].includes(e)&&m.length>12?r*.01923:0,[r,e,m]);return y(()=>{const p=()=>{o(g=>b(_({},g),{indemnizacion:a.toString(),prima_antiguedad:c.toString()}))};return p(),p()},[a,c]),{indemnizacion:a,preaviso:n,primaAntiguiedad:c}},V=()=>{const{form:t}=u.exports.useContext(N),{setFormState:s,formState:o}=t,{paga_seguro_educativo:e,paga_seguro_social:m}=o,{decimo:i}=T(),{vacaciones:r}=z(),a=D(j(),[]),{indemnizacion:n,primaAntiguiedad:c,preaviso:p}=a,g=u.exports.useMemo(()=>{if(Boolean(Number(m))===!1)return 0;const d=r*.0975,S=i*.0725,F=c*.0975,P=n*.0975,q=p*.0975;return d+S+F+P+q},[i,n,c,r,p,m]),x=u.exports.useMemo(()=>{if(Boolean(Number(e))===!1)return 0;const d=r*.0125,S=c*.0125,F=n*.0125,P=p*.0125;return d+S+F+P},[n,c,r,p,e]);return y(()=>{const d=()=>{s(S=>b(_({},S),{seguro_educativo:x.toString(),seguro_social:g.toString()}))};return d(),d()},[x,g]),{seguroSocial:g,seguroEducativo:x}},K=()=>{const{decimo:t}=T(),{vacaciones:s}=z(),o=j(),{indemnizacion:e,primaAntiguiedad:m,preaviso:i}=o,{seguroEducativo:r,seguroSocial:a}=V(),n=u.exports.useMemo(()=>t+s+e+m+i,[t,s,e,m,i]);return{total:u.exports.useMemo(()=>n-(r+a),[r,a,n]),subTotal:n}},ie=()=>{const{form:t}=u.exports.useContext(N),{formState:s}=t,{fecha_inicio:o,fecha_liquidacion:e}=s,{seguroSocial:m,seguroEducativo:i}=V(),{vacaciones:r}=z(),{decimo:a}=T(),n=D(j(),[]),{indemnizacion:c,preaviso:p,primaAntiguiedad:g}=n,{subTotal:x,total:d}=K();return o!==""&&e!==""?f("div",{className:h.container,children:[l("span",{className:`${h.item} ${h.title}`,children:"Totales"}),r>0&&f("div",{className:h.item,children:[l("span",{children:"Vacaciones proporcionales: "}),l("strong",{children:v(r)})]}),a>0&&f("div",{className:h.item,children:[l("span",{children:"D\xE9cimo tercer mes: "}),l("strong",{children:v(a)})]}),g>0&&f("div",{className:h.item,children:[l("span",{children:"Prima de antiguedad: "}),l("strong",{children:v(g)})]}),c>0&&f("div",{className:h.item,children:[l("span",{children:"Indemnizaci\xF3n: "}),l("strong",{children:v(c)})]}),p>0&&f("div",{className:h.item,children:[l("span",{children:"Preaviso: "}),l("strong",{children:v(p)})]}),a>0&&f("div",{className:h.item,children:[l("span",{children:"Sub-total: "}),l("strong",{children:v(x)})]}),a>0&&f("div",{className:h.item,children:[l("span",{children:"Seguro social: "}),l("strong",{children:v(m)})]}),a>0&&f("div",{className:h.item,children:[l("span",{children:"Seguro educativo: "}),l("strong",{children:v(i)})]}),a>0&&f("div",{className:h.item,children:[l("span",{children:"Total de deducciones: "}),l("strong",{children:v(i+m)})]}),a>0&&f("div",{className:h.item,children:[l("span",{children:"Total neto recibido: "}),l("strong",{children:v(d)})]})]}):l(L,{})};export{ie as default};
