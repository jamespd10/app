import{aR as g,r as n,f as x,a as u}from"./index.js";import{u as E}from"./useForm.js";import{d as t}from"./regex.js";import{c as p,d as i,a as o,e as f}from"./array.js";import{u as h}from"./usePrint.js";const _=p().shape({id_negocio:i().typeError("Favor ingresar el negocio").integer("Favor ingresar el negocio").positive("Favor ingresar el negocio").min(1,"Favor ingresar el negocio").required("Favor ingresar el negocio"),fecha_inicio:o().trim().typeError("Favor ingresar la fecha de inicio de labores").required("Favor ingresar la fecha de inicio de labores").test("check-fecha-inicio","Favor ingresar una fecha de inicio v\xE1lida",e=>!!(e&&!g(e))),fecha_liquidacion:o().trim().typeError("Favor ingresar la fecha de liquidaci\xF3n").required("Favor ingresar la fecha de liquidaci\xF3n").test("check-fecha-liquidaci\xF3n","Favor ingresar una fecha de liquidaci\xF3n v\xE1lida",e=>!!(e&&!g(e))),ubicacion:o().trim().typeError("Favor ingresar la ubicaci\xF3n del negocio").required("Favor ingresar la ubicaci\xF3n del negocio"),nombre:o().trim().typeError("Favor ingresar el nombre").required("Favor ingresar el nombre"),apellido:o().trim().typeError("Favor ingresar el apellido").required("Favor ingresar el apellido"),identificacion:o().trim().typeError("Favor ingresar la c\xE9dula o pasaporte").required("Favor ingresar la c\xE9dula o pasaporte"),seguro:o().trim().typeError("Favor ingresar el n\xFAmero de seguro social del empleado").required("Favor ingresar el n\xFAmero de seguro social del empleado"),nacionalidad:o().trim().typeError("Favor ingresar la nacionalidad del empleado").required("Favor ingresar la nacionalidad del empleado"),tipo_liquidacion:o().trim().typeError("Favor ingresar el motivo de liquidaci\xF3n").required("Favor ingresar el motivo de liquidaci\xF3n"),total_salarios:i().transform((e,r)=>r===""?0:e).typeError("Favor de ingresar el monto").positive("El monto debe ser un n\xFAmero positivo").min(0,"El monto debe ser mayor \xF3 igual a 0").max(9e10,"Favor ingresar un n\xFAmero de m\xE1ximo 10 d\xEDgitos").nullable(!0).test("check-decimal","Favor ingresar m\xE1ximo dos decimales",e=>!!(!e||e===0||e&&e.toString().match(t))),total_salarios_decimos:i().transform((e,r)=>r===""?0:e).typeError("Favor de ingresar el monto").positive("El monto debe ser un n\xFAmero positivo").min(0,"El monto debe ser mayor \xF3 igual a 0").max(9e10,"Favor ingresar un n\xFAmero de m\xE1ximo 10 d\xEDgitos").nullable(!0).test("check-decimal","Favor ingresar m\xE1ximo dos decimales",e=>!!(!e||e===0||e&&e.toString().match(t))),preaviso:i().typeError("Favor de ingresar el monto").transform((e,r)=>r===""?0:e).nullable(!0).when("tipo_liquidacion",{is:"Despido",then:i().typeError("Favor de ingresar el monto").positive("El monto debe ser un n\xFAmero positivo").min(0,"El monto debe ser mayor \xF3 igual a 0").max(9e10,"Favor ingresar un n\xFAmero de m\xE1ximo 10 d\xEDgitos").required("Favor de ingresar el monto").test("check-decimal","Favor ingresar m\xE1ximo dos decimales",e=>!!(e===0||e&&e.toString().match(t)))}),salarios:f().of(p().shape({salario:i().typeError("Favor de ingresar el monto").positive("El monto debe ser un n\xFAmero positivo").min(0,"El monto debe ser mayor \xF3 igual a 0").max(9e10,"Favor ingresar un n\xFAmero de m\xE1ximo 10 d\xEDgitos").required("Favor de ingresar el monto").test("check-decimal","Favor ingresar m\xE1ximo dos decimales",e=>!!(e===0||e&&e.toString().match(t))),mes:o().trim().typeError("Favor ingresar el mes del salario").required("Favor ingresar el mes del salario").test("check-fecha-liquidaci\xF3n","Favor ingresar un mes del salario v\xE1lido",e=>!!(e&&!g(e)))})).typeError("Favor ingresar los salarios").required("Favor ingresar los salarios").min(1,"Favor ingresar los salarios")}),q=()=>({defaultValue:n.exports.useMemo(()=>({id:0,id_contrato:0,id_negocio:0,ubicacion:"",nombre:"",apellido:"",identificacion:"",seguro:"",nacionalidad:"",tipo_liquidacion:"",fecha_inicio:"",fecha_liquidacion:"",decimo:"",vacaciones:"",preaviso:"",indemnizacion:"",prima_antiguedad:"",seguro_social:"",seguro_educativo:"",total_salarios:"",total_salarios_vacaciones:"",total_salarios_decimos:"",fecha_enviado:"",fecha_creacion:"",salarios:[],paga_decimo:Boolean(Number(1)),paga_vacaciones:Boolean(Number(1)),paga_indemnizacion:Boolean(Number(1)),paga_prima_antiguedad:Boolean(Number(0)),paga_preaviso:Boolean(Number(1)),paga_seguro_educativo:Boolean(Number(1)),paga_seguro_social:Boolean(Number(1))}),[])}),b=n.exports.createContext({}),y=({children:e,identificacion:r})=>{const s=x(),[,c]=s,{form:l,negocio:a}=n.exports.useContext(v),{formState:d}=l,{fecha_inicio:m}=d;return n.exports.useEffect(()=>{(()=>{r&&c("/admin/liquidaciones/salarios",{params:{id_negocio:a==null?void 0:a.id,q:r,mes:m}})})()},[]),u(b.Provider,{value:{fetcherSalarios:s},children:e})},v=n.exports.createContext({}),N=({children:e,defaultValue:r,negocio:s})=>{const{defaultValue:c}=q(),l=x(),a=E(r||c,_),{formState:d}=a,{identificacion:m}=d,F=h({pageStyle:"@page { margin: 0 !important; }"});return u(v.Provider,{value:{fetcher:l,form:a,defaultValue:r,negocio:s,printer:F},children:u(y,{identificacion:m,children:e})})};export{N as F,b as S,v as a};
