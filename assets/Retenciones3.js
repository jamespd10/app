var S=Object.defineProperty,T=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var y=(t,e,r)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c=(t,e)=>{for(var r in e||(e={}))$.call(e,r)&&y(t,r,e[r]);if(N)for(var r of N(e))j.call(e,r)&&y(t,r,e[r]);return t},d=(t,e)=>T(t,I(e));import{r as R,a,F as D,j as s}from"./index.js";import{s as b}from"./FormularioRealizar.js";import{A as E}from"./AutocompleteServer.js";import{F as A}from"./Formulario2.js";import{s as O}from"./fields.module.js";import{f as q}from"./string.helper.js";import{T as z}from"./TextInput.js";import{C as B}from"./CustomDecimal.js";import{B as w}from"./Button.js";import"./ErrorIcon.js";import"./StyledGridOverlay.js";import"./Box.js";import"./Typography.js";import"./Loader.js";import"./Grid.js";import"./CircularProgress.js";import"./emotion-react.browser.esm.js";import"./index53.js";import"./BootstrapModal.js";import"./ModalTransition.js";import"./Backdrop.js";import"./Fade.js";import"./Modal2.js";import"./isHostComponent.js";import"./useId.js";import"./Portal.js";import"./Paper.js";import"./BootstrapModalTitle.js";import"./Close2.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useControlled.js";import"./useIsFocusVisible.js";import"./DialogTitle.js";import"./dialogTitleClasses.js";import"./IconButton.js";import"./ButtonBase.js";import"./Paid.js";import"./BootstrapDivContent.js";import"./Divider.js";import"./index18.js";import"./HeaderTitle.js";import"./StyledSpeedDial.js";import"./Assignment.js";import"./FabButtonAction.js";import"./react-is.production.min.js";import"./AssignmentRounded.js";import"./Tooltip.js";import"./Popper.js";import"./Grow.js";import"./SpeedDial.module.js";import"./Stack.js";import"./index33.js";import"./DialogActions.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./TextField.js";import"./useFormControl.js";import"./formControlState.js";import"./List.js";import"./outlinedInputClasses.js";import"./GlobalStyles.js";import"./Close.js";import"./Chip.js";import"./Loader2.js";import"./useForm.js";import"./object.helper.js";import"./array.js";import"./upperFirst.js";import"./regex.js";import"./Lazy.js";import"./useGetDefaultValues.js";import"./ContainerFormulario.js";import"./react-number-format.es.js";const P="_title_1es5p_1",V="_flexColumn_1es5p_11",W="_flexRow_1es5p_16",G="_subtitle_1es5p_23";var x={title:P,flexColumn:V,flexRow:W,subtitle:G};const L=({i:t,retencion:e})=>{var f,g,_,h,F;const{form:r}=R.exports.useContext(A),{errors:m,formState:u,setFormState:l}=r,{retenciones:o}=u,[p,v]=R.exports.useState(e.id!==0?{agente:e.agente,dv:e.dv,id:e.id_agente_retenedor,id_tipo:e.id,ruc:e.ruc,tipo:"banco"}:null);return a(D,{children:a(E,{ref:null,urlFetch:"/admin/agentes-retenedores",inputProps:{label:"Agente retenedor",error:!!((g=(f=m==null?void 0:m.retenciones)==null?void 0:f[t])!=null&&g.id_agente_retenedor),helperText:(F=(h=(_=m==null?void 0:m.retenciones)==null?void 0:_[t])==null?void 0:h.id_agente_retenedor)==null?void 0:F.message},disableStyle:!0,enableFirst:!0,value:p,size:"small",fullWidth:!0,onChange:(n,i)=>{const C=o;v(i),i?(C[t]=d(c({},o[t]),{agente:i.agente,dv:i.dv,id_agente_retenedor:i.id,ruc:i.ruc}),l(d(c({},u),{retenciones:C}))):(C[t]=d(c({},o[t]),{agente:"",dv:"",id_agente_retenedor:0,ruc:""}),l(d(c({},u),{retenciones:C})))},getOptionLabel:n=>n.agente,isOptionEqualToValue:(n,i)=>n.id===i.id,renderGroup:n=>s("div",{children:[s("div",{className:x.title,children:["Categor\xEDa: ",a("span",{children:n.group})]}),n.children]},n.key),renderOption:(n,i)=>R.exports.createElement("li",d(c({},n),{key:i.id}),s("div",{className:x.flexColumn,children:[a("span",{children:i.agente}),s("div",{className:x.flexRow,children:[s("span",{className:x.subtitle,children:["RUC: ",i.ruc]}),s("span",{className:x.subtitle,children:["DV: ",i.dv]})]})]}))})})},dt=()=>{const{form:t}=R.exports.useContext(A),{errors:e,formState:r,setFormState:m,onInputChange:u}=t,{retenciones:l}=r;return s("div",{className:`${b.paper} ${b.item}`,children:[a("span",{className:b.titleItem,children:"Retenciones"}),l.map((o,p)=>{var v,f,g,_,h;return s("div",{className:O.field,children:[a(L,{i:p,retencion:o}),a(z,{label:"Total de retenciones",name:`retenciones.${p}.valor`,value:o.valor,size:"small",fullWidth:!0,required:!0,error:!!((f=(v=e==null?void 0:e.retenciones)==null?void 0:v[p])!=null&&f.valor),helperText:(h=(_=(g=e==null?void 0:e.retenciones)==null?void 0:g[p])==null?void 0:_.valor)==null?void 0:h.message,onChange:u,InputProps:{inputComponent:B}})]},p)}),s("span",{className:b.titleItem,children:["total de retenciones"," ",q(l.map(o=>Number(o.valor||0)).reduce((o,p)=>o+p))]}),a(w,{variant:"contained",color:"primary",onClick:()=>{const o=l;o.push({agente:"",dv:"",id:0,id_agente_retenedor:0,id_formulario430:0,ruc:"",valor:""}),m(d(c({},r),{retenciones:o}))},children:"Agregar retenci\xF3n"}),l.length>1&&a(w,{variant:"contained",color:"error",onClick:()=>{const o=l;o.pop(),m(d(c({},r),{retenciones:o}))},children:"Remover \xFAltima retenci\xF3n"})]})};export{dt as default};
