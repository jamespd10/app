var M=Object.defineProperty,N=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var S=(a,r,o)=>r in a?M(a,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[r]=o,p=(a,r)=>{for(var o in r||(r={}))C.call(r,o)&&S(a,o,r[o]);if(_)for(var o of _(r))I.call(r,o)&&S(a,o,r[o]);return a},n=(a,r)=>N(a,k(r));import{L as R}from"./Loader.js";import{r as W,j as P,a as i}from"./index.js";import"./BootstrapTooltip.js";import{u as w}from"./useFetch.js";import"./jwt-decode.esm.js";import{u as B}from"./useFirstFetch.js";import"./ContentProvider.js";import{M as G}from"./Modal2.js";import"./platform.js";import{S as O}from"./SelectHookForm.js";import{P as y}from"./PatronalInput.js";import{c as V,a as A,b as z,f as D,o as J,F as K}from"./array.js";import{b as Q,p as U}from"./regex.js";import{N as X}from"./index10.js";import{T as Y}from"./Typography.js";import{S as Z}from"./Stack.js";import{A as rr}from"./Alert.js";import"./Grid.js";import"./extendSxProp.js";import"./Tooltip.js";import"./Portal.js";import"./useControlled.js";import"./useIsFocusVisible.js";import"./isHostComponent.js";import"./Grow.js";import"./useHttpService.js";import"./constants.js";import"./useAsyncRetry.js";import"./useModal.js";import"./Close2.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./IconButton.js";import"./ButtonBase.js";import"./Error.js";import"./Backdrop.js";import"./Modal.js";import"./Paper.js";import"./Button.js";import"./Box.js";import"./TextField.js";import"./FormHelperText.js";import"./react-is.production.min.js";import"./Menu.js";import"./List.js";import"./GlobalStyles.js";import"./MenuItem.js";import"./listItemIconClasses.js";import"./Divider.js";import"./listItemTextClasses.js";import"./TextInput.js";import"./CustomSipe.js";import"./index7.js";import"./upperFirst.js";import"./HeaderTitle.js";import"./NotFoundResults.js";import"./string.helper.js";import"./useMediaQuery.js";import"./Close.js";const ar=V().shape({n_patronal:A().typeError("Favor ingresar el n\xFAmero patronal").trim().matches(Q,"Favor usar el siguiente formato: ##-###-####").required("Favor de ingresar el n\xFAmero patronal"),patronal_sipe:A().typeError("Favor ingresar el n\xFAmero patronal").trim().matches(U,"Favor usar el siguiente formato: ##-###-#####").required("Favor de ingresar el n\xFAmero patronal"),planilla_asignada:z().typeError("Favor de seleccionar el usuario asignado").positive("Favor de ingresar un n\xFAmero positivo").required("Favor de seleccionar el usuario asignado")}),pa=()=>{var g,F,f,h,v,x;const a=W.exports.useContext(X),r=a.value.data,{modalEditPatronal:o,retry:b}=a,{modalState:E,setHide:T}=o,d=D({mode:"all",resolver:J(ar),defaultValues:n(p({},r),{planilla_asignada:r.usuario_sipe})}),{formState:$,register:u,control:j,handleSubmit:q}=d,{errors:s}=$,{loading:l,value:t}=B({url:"/admin/usuarios/ch/secre&adminis"}),{isLoading:c,response:e,send:H,reset:L}=w();return P(G,{state:E,setHide:()=>{T(),L(),e&&e.status===201&&b()},title:"Formulario de edici\xF3n",actionButton:{text:"Guardar",actionFunction:q(async m=>await H({url:`/admin/negocios/${r.id}/${r.id_cliente}/edit-patronal`,method:"POST",data:m})),isLoading:c},children:[l&&i(R,{}),!l&&t&&t.status!==201&&i(Y,{variant:"h5",children:(g=t.error)==null?void 0:g.message}),!l&&t&&t.status===201&&t.data&&i(K,n(p({},d),{children:P(Z,{spacing:1,children:[!c&&e&&i(rr,{severity:e.status===201?"success":"error",variant:"outlined",children:e.status===201?(F=e.data)==null?void 0:F.message:(f=e.error)==null?void 0:f.message}),i(y,n(p({label:"N\xFAmero patronal",fullWidth:!0},u("n_patronal")),{error:!!s.n_patronal,helperText:(h=s.n_patronal)==null?void 0:h.message})),i(y,n(p({label:"Patronal SIPE",fullWidth:!0,sipe:!0},u("patronal_sipe")),{error:!!s.patronal_sipe,helperText:(v=s.patronal_sipe)==null?void 0:v.message})),i(O,{control:j,label:"Planilla asignada a:",name:"planilla_asignada",options:t.data.map(m=>`${m.nombre} ${m.apellido}`),values:t.data.map(m=>m.id),error:!!s.planilla_asignada,helperText:(x=s.planilla_asignada)==null?void 0:x.message})]})}))]})};export{pa as default};
