var N=Object.defineProperty,k=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var S=(o,r,a)=>r in o?N(o,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[r]=a,p=(o,r)=>{for(var a in r||(r={}))I.call(r,a)&&S(o,a,r[a]);if(_)for(var a of _(r))M.call(r,a)&&S(o,a,r[a]);return o},n=(o,r)=>k(o,C(r));import{L as R}from"./Loader.js";import{r as W,j as P,a as i}from"./index.js";import"./BootstrapTooltip.js";import{u as w}from"./useFetch.js";import{u as B}from"./useFirstFetch.js";import"./SpeedDial.module.js";import G from"./Modal.js";import"./SelectedCard.js";import{S as O}from"./SelectHookForm.js";import{P as y}from"./PatronalInput.js";import{a as V,o as z,F as D}from"./yup.module.js";import{c as J,a as A,d as K}from"./array.js";import{b as Q,p as U}from"./regex.js";import{N as X}from"./index27.js";import{T as Y}from"./Typography.js";import{S as Z}from"./Stack.js";import{A as rr}from"./Alert.js";import"./Grid.js";import"./CircularProgress.js";import"./emotion-react.browser.esm.js";import"./Tooltip.js";import"./Popper.js";import"./Portal.js";import"./useIsFocusVisible.js";import"./isHostComponent.js";import"./Grow.js";import"./useControlled.js";import"./useId.js";import"./useHttpService.js";import"./useAsyncRetry.js";import"./Close2.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./DialogTitle.js";import"./dialogTitleClasses.js";import"./ModalTransition.js";import"./Backdrop.js";import"./Fade.js";import"./Modal2.js";import"./Paper.js";import"./IconButton.js";import"./ButtonBase.js";import"./Warning.js";import"./Error.js";import"./CheckCircle.js";import"./DialogContent.js";import"./DialogActions.js";import"./LoadingButton.js";import"./Button.js";import"./Box.js";import"./TextField.js";import"./useFormControl.js";import"./formControlState.js";import"./react-is.production.min.js";import"./List.js";import"./outlinedInputClasses.js";import"./GlobalStyles.js";import"./MenuItem.js";import"./listItemIconClasses.js";import"./Divider.js";import"./listItemTextClasses.js";import"./TextInput.js";import"./CustomSipe.js";import"./index11.js";import"./upperFirst.js";import"./useModal.js";import"./string.helper.js";import"./useFetcherEarly.js";import"./Close.js";const or=J().shape({n_patronal:A().typeError("Favor ingresar el n\xFAmero patronal").trim().matches(Q,"Favor usar el siguiente formato: ##-###-####").required("Favor de ingresar el n\xFAmero patronal"),patronal_sipe:A().typeError("Favor ingresar el n\xFAmero patronal").trim().matches(U,"Favor usar el siguiente formato: ##-###-#####").required("Favor de ingresar el n\xFAmero patronal"),planilla_asignada:K().typeError("Favor de seleccionar el usuario asignado").positive("Favor de ingresar un n\xFAmero positivo").required("Favor de seleccionar el usuario asignado")}),xo=()=>{var g,F,f,h,v,x;const o=W.exports.useContext(X),r=o.value.data,{modalEditPatronal:a,retry:b}=o,{modalState:E,setHide:T}=a,d=V({mode:"all",resolver:z(or),defaultValues:n(p({},r),{planilla_asignada:r.usuario_sipe})}),{formState:$,register:u,control:j,handleSubmit:q}=d,{errors:m}=$,{loading:l,value:t}=B({url:"/admin/usuarios/ch/secre&adminis"}),{isLoading:c,response:e,send:H,reset:L}=w();return P(G,{state:E,setHide:()=>{T(),L(),e&&e.status===201&&b()},title:"Formulario de edici\xF3n",actionButton:{text:"Guardar",actionFunction:q(async s=>await H({url:`/admin/negocios/${r.id}/${r.id_cliente}/edit-patronal`,method:"POST",data:s})),isLoading:c},children:[l&&i(R,{}),!l&&t&&t.status!==201&&i(Y,{variant:"h5",children:(g=t.error)==null?void 0:g.message}),!l&&t&&t.status===201&&t.data&&i(D,n(p({},d),{children:P(Z,{spacing:1,children:[!c&&e&&i(rr,{severity:e.status===201?"success":"error",variant:"outlined",children:e.status===201?(F=e.data)==null?void 0:F.message:(f=e.error)==null?void 0:f.message}),i(y,n(p({label:"N\xFAmero patronal",fullWidth:!0},u("n_patronal")),{error:!!m.n_patronal,helperText:(h=m.n_patronal)==null?void 0:h.message})),i(y,n(p({label:"Patronal SIPE",fullWidth:!0,sipe:!0},u("patronal_sipe")),{error:!!m.patronal_sipe,helperText:(v=m.patronal_sipe)==null?void 0:v.message})),i(O,{control:j,label:"Planilla asignada a:",name:"planilla_asignada",options:t.data.map(s=>`${s.nombre} ${s.apellido}`),values:t.data.map(s=>s.id),error:!!m.planilla_asignada,helperText:(x=m.planilla_asignada)==null?void 0:x.message})]})}))]})};export{xo as default};
