var D=Object.defineProperty,I=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var w=(t,n,s)=>n in t?D(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,o=(t,n)=>{for(var s in n||(n={}))B.call(n,s)&&w(t,s,n[s]);if(x)for(var s of x(n))T.call(n,s)&&w(t,s,n[s]);return t},O=(t,n)=>I(t,U(n));import{r as y}from"./index.js";import{f as E,u as S}from"./object.helper.js";const K=(t,n,s,e,a)=>n?O(o({},s[t]),{types:O(o({},s[t]&&s[t].types?s[t].types:{}),{[e]:a||!0})}):{},g=(t,n)=>(t.inner||[]).reduce((s,e)=>{if(s[e.path]||(s[e.path]={message:e.message,type:e.type}),n){const a=s[e.path].types,c=a&&a[e.type];s[e.path]=K(e.path,n,s,e.type,c?[].concat(c,e.message):e.message)}return s},{}),A=t=>Array.isArray(t)?t.filter(Boolean):[],R=t=>A(t.replace(/["|']|\]/g,"").split(/\.|\[/)),C=t=>t===void 0,F=t=>t==null,$=t=>t instanceof Date,q=t=>typeof t=="object",N=t=>!F(t)&&!Array.isArray(t)&&q(t)&&!$(t),z=t=>/^\w*$/.test(t);var V=(t,n,s)=>{if(!n||!N(t))return s;const e=A(n.split(/[,[\].]+?/)).reduce((a,c)=>F(a)?a:a[c],t);return C(e)||e===t?C(t[n])?s:t[n]:e};function G(t,n,s){let e=-1;const a=z(n)?[n]:R(n),c=a.length,b=c-1;for(;++e<c;){const u=a[e];let m=s;if(e!==b){const d=t[u];m=N(d)||Array.isArray(d)?d:isNaN(+a[e+1])?{}:[]}t[u]=m,t=t[u]}return t}const k=(t,n,s)=>{if(t&&"reportValidity"in t){const e=V(s,n);t.setCustomValidity(e&&e.message||""),t.reportValidity()}},H=(t,n)=>{for(const s in n.fields){const e=n.fields[s];e&&e.ref&&"reportValidity"in e.ref?k(e.ref,s,t):e.refs&&e.refs.forEach(a=>k(a,s,t))}},h=(t,n)=>{n.shouldUseNativeValidation&&H(t,n);const s={};for(const e in t){const a=V(n.fields,e);G(s,e,Object.assign(t[e],{ref:a&&a.ref}))}return s},Q=(t,n)=>{const[s,e]=y.exports.useState(t),[a,c]=y.exports.useState({}),b=y.exports.useCallback(async({target:l})=>{try{const{name:r,value:i}=l,f=r.includes("."),p=f?E(s):Object.assign({},o({},s));Object.prototype.hasOwnProperty.call(p,r)&&(p[r]=i);const j=f?S(p):p;e(o({},j))}catch(r){c(i=>o(o({},i),h(g(r,!1),{})))}},[s]),u=y.exports.useCallback(()=>{e(o({},t)),c({})},[t]),m=y.exports.useCallback(async({target:l})=>{try{const{value:r,name:i}=l;await n.validateAt(i,r,{abortEarly:!1})}catch(r){c(i=>o(o({},i),h(g(r,!1),{})))}},[n]),d=y.exports.useCallback(async l=>{try{await n.validate(s,{abortEarly:!1}),l(s),c({})}catch(r){c(h(g(r,!1),{}))}},[s,n]),P=y.exports.useCallback(async(l,r)=>{try{const i=l.includes("."),f=i?E(s):Object.assign({},o({},s));Object.prototype.hasOwnProperty.call(f,l)&&(f[l]=r);const p=i?S(f):f;e(o({},p))}catch(i){c(f=>o(o({},f),h(g(i,!1),{})))}},[s]);return{formState:s,onInputChange:b,onInputBlur:m,onResetForm:u,onFormSubmit:d,errors:a,setValue:P,setFormState:e}};export{Q as u};
