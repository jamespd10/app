var R=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var S=(t,a)=>{var e={};for(var i in t)k.call(t,i)&&a.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&R)for(var i of R(t))a.indexOf(i)<0&&E.call(t,i)&&(e[i]=t[i]);return e};import{r as u,a as r,F as A,A as P,a8 as B}from"./index.js";import{B as F}from"./BootstrapTooltip.js";import{N as L}from"./NotFoundResults.js";import"./SpeedDial.module.js";import{C as b}from"./ChipState.js";import"./Modal.js";import"./SelectedCard.js";import{C as T}from"./CustomTable.js";import{d as f}from"./Visibility.js";import{a as I}from"./NegociosProvider.js";import{u as _}from"./useFetch.js";import{I as V}from"./IconButton.js";import"./Tooltip.js";import"./Popper.js";import"./Portal.js";import"./useControlled.js";import"./useIsFocusVisible.js";import"./isHostComponent.js";import"./Grow.js";import"./Grid.js";import"./Typography.js";import"./CheckCircle.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./Chip.js";import"./ButtonBase.js";import"./emotion-react.browser.esm.js";import"./CircularProgress.js";import"./Close2.js";import"./ModalTransition.js";import"./Backdrop.js";import"./Fade.js";import"./Modal2.js";import"./Paper.js";import"./DialogContent.js";import"./DialogActions.js";import"./LoadingButton.js";import"./Button.js";import"./Search.js";import"./Clear.js";import"./TextField.js";import"./useFormControl.js";import"./formControlState.js";import"./react-is.production.min.js";import"./List.js";import"./outlinedInputClasses.js";import"./GlobalStyles.js";import"./Box.js";import"./InputAdornment.js";import"./FormGroup.js";import"./FormControlLabel.js";import"./Checkbox.js";import"./SkipNextOutlined.js";import"./Pagination.js";import"./TableRow.js";import"./Loader.js";import"./Stack.js";import"./LinearProgress.js";import"./useFetchPagination.js";import"./useAsyncRetry.js";import"./useAsync.js";import"./useList.js";import"./usePrevious.js";import"./useHttpService.js";import"./object.helper.js";const y={label:"Rutas",name:"ruta",value:"%%",list:[{value:"%%",label:"Todas"},{value:"San Miguelito",label:"SM"},{value:"Panam\xE1",label:"PMA"},{value:"R\xEDo Abajo",label:"RA"},{value:"Juan D\xEDaz",label:"JD"},{value:"Chorrera",label:"CHO"},{value:"Chilibre",label:"CHI"},{value:"Pacora",label:"PAC"},{value:"Dari\xE9n",label:"DAR"},{value:"Oficina",label:"OF"},{value:"Interior",label:"INT"},{value:"Veracruz",label:"VER"}]},M=()=>{const{negocios:t,setNegocios:a}=u.exports.useContext(I),{send:e,isLoading:i}=_();return{handleCheck:async({id:m,id_cliente:p,name:l})=>{if((await e({url:`/admin/negocios/${m}/${p}/mark`,method:"POST"})).status===201&&t){const d=t.findIndex(h=>h.id===m),c=[...t];c[d][l]=!Boolean(Number(c[d][l])),a([...c])}},isLoading:i}},z=({id:t,id_cliente:a,name:e,label:i,color:s})=>{const{handleCheck:m,isLoading:p}=M();return r(A,{children:r(b,{label:i,color:s,onClick:()=>m({id:t,id_cliente:a,name:e}),loading:p})})},vo=t=>{var x,N;const{authState:a}=u.exports.useContext(P),{tipo:e}=a,C=u.exports.useContext(I),{loading:i,negocios:s,handlePage:m}=C,p=S(C,["loading","negocios","handlePage"]),{page:l,handleSkipPrev:g,handleSkipNext:d,inputRef:c,sendSearch:h}=p,{value:n,onClearSearch:O,setFilterRadio:D,filterRadioList:$}=p;return r(A,{children:r(T,{title:"Lista de negocios",size:"small",filter:{filterRadio:{setFilterRadio:D,filterRadioList:$,radios:[y]}},isSearch:{focus:!location.pathname.includes("clientes"),input:{inputRef:c,onClick:h,onClear:O}},notFound:(n==null?void 0:n.status)!==201&&r(L,{text:(x=n==null?void 0:n.error)==null?void 0:x.message}),loading:i,tableHeader:["Acci\xF3n","Nombre del negocio","RUC","Ruta","Recorrido","Aviso de operaci\xF3n",...e==="Super"?["Super validado","Operando"]:[],"Pendientes"],tableBody:s==null?void 0:s.map(o=>[r(F,{title:t.actionTitle||"Ver",placement:"right",children:r(V,{component:B,to:t.actionLink?`/negocios/${o.id}/${o.id_cliente}${t.actionLink}`:`/negocios/${o.id}/${o.id_cliente}`,state:o,color:"primary",children:t.actionIcon?r(f,{component:t.actionIcon}):r(f,{})})},`${o.id}-tooltip`),r("span",{style:{textTransform:"uppercase"},children:o.nombre_negocio||r("strong",{children:"SIN NOMBRE"})},`${o.id}-nombre`),o.ruc||r("strong",{children:"SIN RUC"}),o.ruta||r("strong",{children:"SIN RUTA"}),r("div",{style:{textAlign:"center"},children:o.recorrido||r("strong",{children:"SIN RECORRIDO"})},`${o.id}-recorrido`),o.aviso_operacion||r("strong",{children:"SIN AVISO DE OPERACI\xD3N"}),...e==="Super"?[r(b,{label:`${Boolean(Number(o.super_validado))?"VALIDADO":"NO VALIDADO"}`,color:Boolean(Number(o.super_validado))?"success":"error"},`${o.id}-validado`),r(z,{id:o.id,id_cliente:o.id_cliente,name:"cerrado",label:Boolean(Number(o.cerrado))?"CERRADO":"OPERANDO",color:Boolean(Number(o.cerrado))?"error":"success"},`${o.id}-operando`)]:[],r(b,{label:`${o.pendientes}`,color:o.pendientes==="SI"?"error":"success"},`${o.id}-pendientes`)]),pagination:{count:(N=n==null?void 0:n.data)==null?void 0:N.paginas,onChange:m,page:l},onSkipPrev:g,onSkipNext:d})})};export{vo as default};
