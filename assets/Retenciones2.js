var S=Object.defineProperty,T=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var w=(t,e,r)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,l=(t,e)=>{for(var r in e||(e={}))$.call(e,r)&&w(t,r,e[r]);if(F)for(var r of F(e))j.call(e,r)&&w(t,r,e[r]);return t},c=(t,e)=>T(t,I(e));import{r as R,a as d,j as s}from"./index.js";import{s as b}from"./FormularioRealizar.js";import{A as D}from"./AutocompleteServer.js";import{F as A}from"./ContainerFormulario.js";import{c as E}from"./fields.module.js";import{f as O}from"./string.helper.js";import{T as q}from"./TextInput.js";import{C as z}from"./CustomDecimal.js";import{B as y}from"./Button.js";import"./ErrorIcon.js";import"./StyledGridOverlay.js";import"./Box.js";import"./Typography.js";import"./Loader.js";import"./Grid.js";import"./CircularProgress.js";import"./emotion-react.browser.esm.js";import"./index53.js";import"./BootstrapModal.js";import"./ModalTransition.js";import"./Backdrop.js";import"./Fade.js";import"./Modal2.js";import"./isHostComponent.js";import"./useId.js";import"./Portal.js";import"./Paper.js";import"./BootstrapModalTitle.js";import"./Close2.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useControlled.js";import"./useIsFocusVisible.js";import"./DialogTitle.js";import"./dialogTitleClasses.js";import"./IconButton.js";import"./ButtonBase.js";import"./Paid.js";import"./BootstrapDivContent.js";import"./Divider.js";import"./index18.js";import"./HeaderTitle.js";import"./StyledSpeedDial.js";import"./Assignment.js";import"./FabButtonAction.js";import"./react-is.production.min.js";import"./AssignmentRounded.js";import"./Tooltip.js";import"./Popper.js";import"./Grow.js";import"./SpeedDial.module.js";import"./Stack.js";import"./index33.js";import"./DialogActions.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./TextField.js";import"./useFormControl.js";import"./formControlState.js";import"./List.js";import"./outlinedInputClasses.js";import"./GlobalStyles.js";import"./Close.js";import"./Chip.js";import"./useForm.js";import"./object.helper.js";import"./array.js";import"./upperFirst.js";import"./regex.js";import"./Lazy.js";import"./useGetDefaultValues.js";import"./react-number-format.es.js";const B="_title_1es5p_1",P="_flexColumn_1es5p_11",V="_flexRow_1es5p_16",W="_subtitle_1es5p_23";var x={title:B,flexColumn:P,flexRow:V,subtitle:W};const G=({i:t,v:e})=>{var f,g,_,h,N;const{form:r}=R.exports.useContext(A),{errors:m,formState:u,setFormState:a}=r,{retenciones:o}=u,[p,C]=R.exports.useState(e.id!==0?{agente:e.agente,dv:e.dv,id:e.id_agente_retenedor,id_tipo:e.id,ruc:e.ruc,tipo:"banco"}:null);return d(D,{ref:null,urlFetch:"/admin/agentes-retenedores",inputProps:{label:"Agente retenedor",error:!!((g=(f=m==null?void 0:m.retenciones)==null?void 0:f[t])!=null&&g.id_agente_retenedor),helperText:(N=(h=(_=m==null?void 0:m.retenciones)==null?void 0:_[t])==null?void 0:h.id_agente_retenedor)==null?void 0:N.message},disableStyle:!0,enableFirst:!0,value:p,size:"small",fullWidth:!0,onChange:(n,i)=>{const v=o;C(i),i?(v[t]=c(l({},o[t]),{agente:i.agente,dv:i.dv,id_agente_retenedor:i.id,ruc:i.ruc}),a(c(l({},u),{retenciones:v}))):(v[t]=c(l({},o[t]),{agente:"",dv:"",id_agente_retenedor:0,ruc:""}),a(c(l({},u),{retenciones:v})))},getOptionLabel:n=>n.agente,isOptionEqualToValue:(n,i)=>n.id===i.id,renderGroup:n=>s("div",{children:[s("div",{className:x.title,children:["Categor\xEDa: ",d("span",{children:n.group})]}),n.children]},n.key),renderOption:(n,i)=>R.exports.createElement("li",c(l({},n),{key:i.id}),s("div",{className:x.flexColumn,children:[d("span",{children:i.agente}),s("div",{className:x.flexRow,children:[s("span",{className:x.subtitle,children:["RUC: ",i.ruc]}),s("span",{className:x.subtitle,children:["DV: ",i.dv]})]})]}))})},at=()=>{const{form:t}=R.exports.useContext(A),{errors:e,formState:r,setFormState:m,onInputChange:u}=t,{retenciones:a}=r;return s("div",{className:`${b.paper} ${b.item}`,children:[d("span",{className:b.titleItem,children:"Retenciones"}),a.map((o,p)=>{var C,f,g,_,h;return s("div",{className:E.field,children:[d(G,{i:p,v:o}),d(q,{label:"Total de retenciones",name:`retenciones.${p}.valor`,value:o.valor,size:"small",fullWidth:!0,required:!0,error:!!((f=(C=e==null?void 0:e.retenciones)==null?void 0:C[p])!=null&&f.valor),helperText:(h=(_=(g=e==null?void 0:e.retenciones)==null?void 0:g[p])==null?void 0:_.valor)==null?void 0:h.message,onChange:u,InputProps:{inputComponent:z}})]},p)}),s("span",{className:b.titleItem,children:["total de retenciones"," ",O(a.map(o=>Number(o.valor||0)).reduce((o,p)=>o+p))]}),d(y,{variant:"contained",color:"primary",onClick:()=>{const o=a;o.push({agente:"",dv:"",id:0,id_agente_retenedor:0,id_formulario430:0,ruc:"",valor:""}),m(c(l({},r),{retenciones:o}))},children:"Agregar retenci\xF3n"}),a.length>1&&d(y,{variant:"contained",color:"error",onClick:()=>{const o=a;o.pop(),m(c(l({},r),{retenciones:o}))},children:"Remover \xFAltima retenci\xF3n"})]})};export{at as default};
