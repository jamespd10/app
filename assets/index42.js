var b=Object.defineProperty,_=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var n=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;var d=(t,o,a)=>o in t?b(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,u=(t,o)=>{for(var a in o||(o={}))h.call(o,a)&&d(t,a,o[a]);if(n)for(var a of n(o))f.call(o,a)&&d(t,a,o[a]);return t},c=(t,o)=>_(t,g(o));import{H as y}from"./HeaderTitle.js";import{u as P,D as T,a as x,b as D}from"./useDataGrid.js";import{r as S,a as r,F as s,j as m}from"./index.js";import{u as w}from"./useFetch.js";import"./jwt-decode.esm.js";import"./Typography.js";import"./extendSxProp.js";import"./Divider.js";import"./TextInput.js";import"./TextField.js";import"./FormHelperText.js";import"./useControlled.js";import"./react-is.production.min.js";import"./Menu.js";import"./Modal.js";import"./Backdrop.js";import"./isHostComponent.js";import"./Portal.js";import"./Paper.js";import"./Grow.js";import"./List.js";import"./createSvgIcon.js";import"./GlobalStyles.js";import"./Search.js";import"./jsx-runtime_commonjs-proxy.js";import"./useIsFocusVisible.js";import"./Clear.js";import"./Box.js";import"./InputAdornment.js";import"./IconButton.js";import"./ButtonBase.js";import"./useList.js";import"./useAsyncRetry.js";import"./Button.js";import"./MenuItem.js";import"./listItemIconClasses.js";import"./listItemTextClasses.js";import"./Checkbox.js";import"./Close2.js";import"./ListItem.js";import"./listItemButtonClasses.js";import"./Stack.js";import"./Add.js";import"./SkipNextOutlined.js";import"./Autocomplete.js";import"./Close.js";import"./Tooltip.js";import"./Chip.js";import"./Pagination.js";import"./useMediaQuery.js";import"./useComponentVisible.js";import"./CheckBoxOutlineBlank.js";import"./AutocompleteServer.js";import"./ChipState.js";import"./Error.js";import"./CustomDecimal.js";import"./react-number-format.es.js";import"./string.helper.js";import"./regex.js";import"./CustomSipe.js";import"./index7.js";import"./useHttpService.js";import"./constants.js";const E=[{column:"negocios.patronal_sipe",label:"P. SIPE",type:"string"},{column:"clientes.dv",label:"DV",type:"string"}],I=[{name:"tiponegocios.tipo",label:"Tipo"},{name:"negocios.nombre_negocio",label:"Nombre"},{name:"clientes.ruc",label:"RUC"},{name:"negocios.patronal_sipe",label:"P. SIPE"},{name:"clientes.dv",label:"DV"}],O=()=>{const t=P(),{data:o}=t,{send:a}=w(),p=S.exports.useCallback((e,i,l)=>a({url:`/admin/supervalidados/negocios/${l}`,method:"PATCH",data:{field:e,value:i}}),[]);return r(s,{children:r(T,{toolbar:r(s,{children:"Lista de negocios a validar"}),enableHidden:!0,enableSearch:!0,columnsFilter:E,sortFields:I,columns:[{name:"tipo",label:"Tipo",width:200,editable:{type:"autocomplete",func:(e,i)=>p("negocios.id_tipo",e.id,i),autocomplete:{valueKey:[{name:"tipo",replace:"tipo"}],url:"/admin/negocios/tipos",isOptionEqualToValue:(e,i)=>e.id===i.id,getOptionLabel:e=>e.tipo,labels:["tipo"]}}},{name:"nombre_negocio",label:"Nombre",editable:{type:"text",func:(e,i)=>p("negocios.nombre_negocio",e,i)}},{name:"ruc",label:"Ruc",width:150},{name:"dv",label:"DV",width:90,editable:{type:"text",func:(e,i,l)=>a({url:`/admin/supervalidados/negocios/${i}`,method:"PATCH",data:{field:"clientes.dv",value:e,id:l.id_cliente}})}},{name:"patronal_sipe",label:"P. SIPE",editable:{type:"sipe",func:(e,i)=>p("negocios.patronal_sipe",e,i)}},{name:"riesgo_profesional",label:"R.P.",editable:{type:"text",func:(e,i)=>p("negocios.riesgo_profesional",e,i)}},{name:"usuario_itbms",label:"Asignado ITBMS",width:200,editable:{type:"autocomplete",func:(e,i)=>p("negocios.usuario_itbms",e.id,i),autocomplete:{valueKey:[{name:"usuario_itbms",replace:"id"},{name:"nombre_usuario_itbms",replace:"nombre"},{name:"apellido_usuario_itbms",replace:"apellido"}],url:"/admin/usuarios/ch/secre&adminis",isOptionEqualToValue:(e,i)=>e.id===i.id,getOptionLabel:e=>`${e.nombre} ${e.apellido}`,labels:["nombre","apellido"]}}},{name:"usuario_sipe",label:"Asignado SIPE",width:200,editable:{type:"autocomplete",func:(e,i)=>p("negocios.usuario_sipe",e.id,i),autocomplete:{valueKey:[{name:"usuario_sipe",replace:"id"},{name:"nombre_usuario_sipe",replace:"nombre"},{name:"apellido_usuario_sipe",replace:"apellido"}],url:"/admin/usuarios/ch/secre&adminis",isOptionEqualToValue:(e,i)=>e.id===i.id,getOptionLabel:e=>`${e.nombre} ${e.apellido}`,labels:["nombre","apellido"]}}}],rows:o.map(e=>({id:e.id,anotherIds:{id_cliente:e.id_cliente},tipo:e.tipo,nombre_negocio:e.nombre_negocio,ruc:e.ruc,patronal_sipe:e.patronal_sipe,riesgo_profesional:e.riesgo_profesional,dv:e.dv,usuario_itbms:e.usuario_itbms?m("span",{children:[e.nombre_usuario_itbms," ",e.apellido_usuario_itbms]}):null,usuario_sipe:e.usuario_sipe?m("span",{children:[e.nombre_usuario_sipe," ",e.apellido_usuario_sipe]}):null}))})})},je=()=>{const t=x({url:"/admin/supervalidados/negocios",rowKey:"id"});return m(s,{children:[r(y,{message:"Negocios"}),r("div",{style:{marginTop:10},children:r(D,c(u({},t),{children:r(O,{})}))})]})};export{je as default};
