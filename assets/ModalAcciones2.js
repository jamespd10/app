var H=Object.defineProperty,M=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var g=(r,e,i)=>e in r?H(r,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[e]=i,a=(r,e)=>{for(var i in e||(e={}))k.call(e,i)&&g(r,i,e[i]);if(f)for(var i of f(e))z.call(e,i)&&g(r,i,e[i]);return r},p=(r,e)=>M(r,R(e));import{r as s,A as F,j as L,a as h}from"./index.js";import{C as T,b as x}from"./index14.js";import{D as w}from"./DialogActions.js";import{L as _}from"./LoadingButton.js";import"./HeaderTitle.js";import"./Typography.js";import"./Divider.js";import"./Loader.js";import"./Grid.js";import"./CircularProgress.js";import"./emotion-react.browser.esm.js";import"./useLocalStorage.js";import"./yup.module.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./Button.js";import"./ButtonBase.js";import"./useIsFocusVisible.js";import"./useId.js";const y=()=>{const{authState:r}=s.exports.useContext(F),{nombre:e,apellido:i}=r,{pagination:t}=s.exports.useContext(T),{fetcher:d}=t,[,,l,b,C]=d,S=s.exports.useContext(x),{modalRealizar:v,fetcher:A,handleHide:D,divRef:N}=S,[,j]=v,[,B]=A;return{handleSend:o=>{var u;(u=N.current)==null||u.scrollTo(0,0),B("/admin/certificaciones-ingresos",{method:"POST",data:o}).then(m=>{if(m.data&&!m.error){if(!b){const c=l;c==null||c.resultados.unshift({id:m.data.id,nombre:e||"",apellido:i||"",id_banco:o.banco.id,id_cliente:o.cliente.id,fecha_creacion:new Date,fecha_impresion:null,nombre_encargado:o.nombre_encargado,apellido_encargado:o.apellido_encargado,identificacion_encargado:o.identificacion_encargado,cargo_encargado:o.cargo_encargado,banco:o.banco,cliente:o.cliente,imprimir_actividades:o.imprimir_actividades,genero:o.genero.toUpperCase(),actividad:o.actividad,text_negocio:o.text_negocio,abrir_cuenta:Boolean(Number(o.abrir_cuenta)),print_anual:Boolean(Number(o.print_anual)),negocios:o.negocios.map(n=>p(a({},n),{fecha_aviso_op:new Date(n.fecha_aviso_op)})),periodos:o.periodos.map(n=>p(a({},n),{total:(Math.round((Number(n.ingreso)-Number(n.gasto))*100)/100).toFixed(2)}))}),C(a({},c))}D(),j(!1)}})}}},co=()=>{const{handleHide:r,form:e,fetcher:i}=s.exports.useContext(x),[t]=i,{handleSubmit:d}=e,{handleSend:l}=y();return L(w,{children:[h(_,{loading:t,variant:"outlined",color:"inherit",onClick:()=>r(),children:"Cerrar"}),h(_,{loading:t,variant:"outlined",color:"primary",onClick:d(l),children:"Guardar"})]})};export{co as default};
