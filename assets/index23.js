var po=Object.defineProperty,ho=Object.defineProperties;var go=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var Ye=(n,o,r)=>o in n?po(n,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[o]=r,_=(n,o)=>{for(var r in o||(o={}))Ze.call(o,r)&&Ye(n,r,o[r]);if(ne)for(var r of ne(o))Je.call(o,r)&&Ye(n,r,o[r]);return n},D=(n,o)=>ho(n,go(o));var Ke=(n,o)=>{var r={};for(var t in n)Ze.call(n,t)&&o.indexOf(t)<0&&(r[t]=n[t]);if(n!=null&&ne)for(var t of ne(n))o.indexOf(t)<0&&Je.call(n,t)&&(r[t]=n[t]);return r};import{r as c,a as e,ab as no,ax as k,n as he,F as v,j as l,ak as xo,ay as de,aw as No,az as bo,aA as vo,b as to}from"./index.js";import{u as fo}from"./useFetcherEarly.js";import{L as _o}from"./Loader.js";import{N as Co}from"./NotFoundResults.js";import{d as X,c as R,h as me,b as T,e as Qe,g as ae,o as re,j as ao,a as A,F as se,u as w,C as Fo}from"./array.js";import{d as So,n as K,e as Xe,r as eo}from"./regex.js";import{u as yo}from"./useLocalStorage.js";import{s as i,d as wo,a as ue}from"./headerPlanilla.module.js";import{d as ro}from"./Delete.js";import{D as j}from"./DecimalInput.js";import{f as E,d as Po}from"./string.helper.js";import{u as ge}from"./useModal.js";import{I as so}from"./IconButton.js";import{T as b}from"./Typography.js";import ie from"./Modal.js";import{a as pe}from"./constantsLists.js";import{S as io}from"./SelectHookForm.js";import{T as te}from"./TextInput.js";import{S as $}from"./Stack.js";import{F as Mo}from"./FormControlLabel.js";import{C as co}from"./Checkbox.js";import{d as $o,a as Eo}from"./CheckBoxOutlineBlank.js";import{A as Ao}from"./AutocompleteServer.js";import{L as To}from"./ListItem.js";import{A as ee}from"./Alert.js";import{B as Z}from"./Button.js";import{d as Do}from"./AddBusiness.js";import Io from"./InputAsociarNegocio.js";import{D as W}from"./Divider.js";import{T as zo}from"./TextEditor.js";import{P as Q}from"./Paper.js";import{P as Ro}from"./Pagination.js";import{c as ko,i as Ho,r as qo}from"./jsx-runtime_commonjs-proxy.js";import{B as Lo}from"./BootstrapTooltip.js";import{a as Vo,D as jo,c as Wo}from"./LoadingButton.js";import{M as Bo}from"./MonthPicker.js";import{s as Oo}from"./index13.js";import{H as Uo}from"./HeaderTitle.js";import"./Grid.js";import"./upperFirst.js";import"./CustomDecimal.js";import"./react-number-format.es.js";import"./ButtonBase.js";import"./useIsFocusVisible.js";import"./Close2.js";import"./Error.js";import"./Backdrop.js";import"./Modal2.js";import"./isHostComponent.js";import"./useControlled.js";import"./Portal.js";import"./createSvgIcon.js";import"./Box.js";import"./TextField.js";import"./FormHelperText.js";import"./react-is.production.min.js";import"./Grow.js";import"./List.js";import"./GlobalStyles.js";import"./MenuItem.js";import"./listItemIconClasses.js";import"./listItemTextClasses.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./Close.js";import"./Popper.js";import"./Chip.js";import"./ContentProvider.js";import"./SpeedDial.module.js";import"./ChipState.js";import"./SelectedCard.js";import"./index7.js";import"./Tooltip.js";const O=c.exports.createContext({}),Go=({children:n})=>{const[o,r]=c.exports.useState(null),t=a=>r(a);return e(O.Provider,{value:{date:o,setDate:t},children:n})},I=c.exports.createContext({}),Yo=({children:n})=>{const{id:o,cliente:r}=no(),t=fo(`/admin/negocios/${o}/${r}/planillas/last`,{}),[,a]=t,{setDate:s}=c.exports.useContext(O);return c.exports.useEffect(()=>{(()=>{a&&a.next_month&&s(a.next_month)})()},[a]),e(I.Provider,{value:t,children:n})},q=X().typeError("Ingresar un valor").positive("La cantidad del salario debe ser positiva").min(0,"La cantidad del salario debe ser mayor a 0").max(9e10,"M\xE1ximo 10 d\xEDgitos").required("Ingresar un valor").test("check-decimal","Favor ingresar m\xE1ximo dos decimales",n=>!!(n===0||n&&n.toString().match(So))),Zo=R().shape({mes:me().typeError("Favor ingresar el mes de la planilla a realizar").required("Favor ingresar el mes de la planilla a realizar"),notas:T().trim().nullable(!0).notRequired(),negocios:Qe().of(R().shape({id_negocio:X().typeError("Favor ingresar el negocio").positive("Favor ingresar el negocio").integer("Favor ingresar el negocio").required("Favor ingresar el negocio"),contratos:Qe().of(R().shape({salario:q,decimo:q,vacaciones:q,impuesto_renta:q,horas_extras:q,comisiones:q,preaviso:q,indemnizacion:q,id_contrato:X().typeError("El id es requerido").required("El id es requerido").positive("El id debe ser un n\xFAmero positivo").integer("El id debe ser un n\xFAmero entero")})).min(1,"Favor ingresar al menos un empleado")})).min(1,"Favor ingresar al menos un negocio")}),U=c.exports.createContext({}),Jo=({children:n})=>{const{id:o,cliente:r}=no(),t=c.exports.useContext(I),[,a]=t,s=c.exports.useMemo(()=>["4","8","12"].includes(k(a.next_month,"M")),[]),[m,p,d]=yo(`sipe-${o}-${r}`),h=ae({mode:"onSubmit",resolver:re(Zo),defaultValues:m!=null?m:{notas:"",mes:a.next_month,negocios:a&&a.planillas[0]&&a.planillas[0].negocios?a.planillas[0].negocios.map(C=>D(_({},C),{contratos:C.contratos.map(M=>D(_({},M),{salario:"",vacaciones:0,impuesto_renta:0,horas_extras:0,comisiones:0,indemnizacion:0,preaviso:0,decimo:s?"":0}))})):[{id_negocio:a==null?void 0:a.id_negocio,nombre:a==null?void 0:a.nombre_negocio,tipo:a==null?void 0:a.tipo,id_cliente:a==null?void 0:a.id_cliente,contratos:[]}]}}),g=ao({control:h.control,name:"negocios"}),x=A({control:h.control}),u=A({control:h.control,name:"negocios"});c.exports.useEffect(()=>{(()=>{p(x)})()},[x]);const N=he(),[P,,f]=N;return c.exports.useEffect(()=>{(()=>{!P&&f&&d()})()},[f,P]),e(se,D(_({},h),{children:e(U.Provider,{value:{fieldsNegocios:g,negocios:u,isDecimo:s,mainNegocioId:o!=null?o:"",clienteId:r!=null?r:"",fetcherSaveData:N},children:n})}))},xe=c.exports.createContext({}),Ko=({children:n})=>{const[o,r]=c.exports.useState(0),t=a=>r(a);return e(xe.Provider,{value:{page:o,setPage:t},children:n})},V=({negocioIndex:n,name:o})=>{const{control:r}=w(),t=A({control:r,name:`negocios.${n}.contratos`}),a=c.exports.useMemo(()=>t&&t.length>0?t.map(s=>Number(s[o]||0)).reduce((s,m)=>s+m):0,[t]);return e(v,{children:E(a)})},Qo=({negocioIndex:n})=>{const{control:o}=w(),r=A({control:o,name:`negocios.${n}.contratos`}),t=c.exports.useMemo(()=>r&&r.length>0?r.map(a=>Number(a.salario||0)+Number(a.decimo||0)+Number(a.vacaciones||0)+Number(a.impuesto_renta||0)+Number(a.horas_extras||0)+Number(a.comisiones||0)+Number(a.indemnizacion||0)+Number(a.preaviso||0)).reduce((a,s)=>a+s):0,[r]);return e(v,{children:E(t)})},Xo=({negocioIndex:n})=>{const{control:o}=w(),r=A({control:o,name:`negocios.${n}.contratos`});return c.exports.useMemo(()=>r&&r.length>0&&r.map(a=>Number(a.vacaciones||0)).reduce((a,s)=>a+s)>0,[r])?l(v,{children:[e("td",{className:i.column,children:e(V,{name:"indemnizacion",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"preaviso",negocioIndex:n})})]}):e(v,{})},en=({negocioIndex:n})=>l("tr",{className:i.row,children:[e("td",{className:i.column}),e("td",{className:i.column,children:"Totales"}),e("td",{className:i.column}),e("td",{className:i.column,children:e(V,{name:"salario",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"decimo",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"vacaciones",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"impuesto_renta",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"horas_extras",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"comisiones",negocioIndex:n})}),e(Xo,{negocioIndex:n}),e("td",{colSpan:2,className:i.column,children:e(Qo,{negocioIndex:n})})]}),on=({negocioIndex:n,contratoIndex:o})=>{const{control:r}=w(),t=A({control:r,name:`negocios.${n}.contratos.${o}`}),a=c.exports.useMemo(()=>Number(t.salario||0)+Number(t.decimo||0)+Number(t.vacaciones||0)+Number(t.impuesto_renta||0)+Number(t.horas_extras||0)+Number(t.comisiones||0)+Number(t.indemnizacion||0)+Number(t.preaviso||0),[t]);return e("span",{children:E(a)})},nn=({negocioIndex:n})=>{const{control:o}=w(),r=A({control:o,name:`negocios.${n}.contratos`});return c.exports.useMemo(()=>r&&r.length>0&&r.map(a=>Number(a.vacaciones||0)).reduce((a,s)=>a+s)>0,[r])?l(v,{children:[e("th",{className:i.header,children:"Indemnizaci\xF3n"}),e("th",{className:i.header,children:"Preaviso"})]}):e(v,{})},tn=({negocioIndex:n})=>e("thead",{children:l("tr",{children:[e("th",{className:i.header,children:"#"}),e("th",{className:i.header,children:"Nombre"}),e("th",{className:i.header,children:"C\xE9dula"}),e("th",{className:i.header,children:"Salario"}),e("th",{className:i.header,children:"D\xE9cimo"}),e("th",{className:i.header,children:"Vacaciones"}),e("th",{className:i.header,children:"Imp. Renta"}),e("th",{className:i.header,children:"Horas extras"}),e("th",{className:i.header,children:"Comisiones"}),e(nn,{negocioIndex:n}),e("th",{className:i.header,children:"Total"}),e("th",{className:i.header,children:"Remover"})]})}),an=({negocioIndex:n,contratoIndex:o})=>{var p,d,h,g,x,u,N,P,f,C,M,F,z,S,y,H,B,J;const{control:r,formState:t}=w(),{errors:a}=t,s=A({control:r,name:`negocios.${n}.contratos`});return c.exports.useMemo(()=>s&&s.length>0&&s.map(Y=>Number(Y.vacaciones||0)).reduce((Y,oe)=>Y+oe)>0,[s])?l(v,{children:[e("td",{className:i.column,children:e(j,{className:i.inputDecimal,name:`negocios.${n}.contratos.${o}.indemnizacion`,label:"Indemnizaci\xF3n",fullWidth:!0,error:!!((g=(h=(d=(p=a==null?void 0:a.negocios)==null?void 0:p[Number(n)])==null?void 0:d.contratos)==null?void 0:h[Number(o)])!=null&&g.indemnizacion),helperText:(f=(P=(N=(u=(x=a==null?void 0:a.negocios)==null?void 0:x[Number(n)])==null?void 0:u.contratos)==null?void 0:N[Number(o)])==null?void 0:P.indemnizacion)==null?void 0:f.message,size:"small"})}),e("td",{className:i.column,children:e(j,{className:i.inputDecimal,name:`negocios.${n}.contratos.${o}.preaviso`,label:"Preaviso",fullWidth:!0,error:!!((z=(F=(M=(C=a==null?void 0:a.negocios)==null?void 0:C[Number(n)])==null?void 0:M.contratos)==null?void 0:F[Number(o)])!=null&&z.preaviso),helperText:(J=(B=(H=(y=(S=a==null?void 0:a.negocios)==null?void 0:S[Number(n)])==null?void 0:y.contratos)==null?void 0:H[Number(o)])==null?void 0:B.preaviso)==null?void 0:J.message,size:"small"})})]}):e(v,{})},rn=({negocioIndex:n,contratoIndex:o})=>{var p,d,h,g,x,u,N,P,f;const{control:r,setValue:t,formState:a}=w(),{errors:s}=a,m=A({control:r,name:`negocios.${n}.contratos.${o}.salario`});return c.exports.useEffect(()=>{(()=>{m&&m!==""&&Number(m)>=800?t(`negocios.${n}.contratos.${o}.impuesto_renta`,""):t(`negocios.${n}.contratos.${o}.impuesto_renta`,0)})()},[m]),e(j,{className:i.inputDecimal,name:`negocios.${n}.contratos.${o}.impuesto_renta`,label:"Imp. Renta",fullWidth:!0,error:!!((g=(h=(d=(p=s==null?void 0:s.negocios)==null?void 0:p[Number(n)])==null?void 0:d.contratos)==null?void 0:h[Number(o)])!=null&&g.impuesto_renta),helperText:(f=(P=(N=(u=(x=s==null?void 0:s.negocios)==null?void 0:x[Number(n)])==null?void 0:u.contratos)==null?void 0:N[Number(o)])==null?void 0:P.impuesto_renta)==null?void 0:f.message,size:"small"})},G=c.exports.createContext({}),sn=({children:n,clienteId:o,mainNegocioId:r,negocioIndex:t,isDecimo:a})=>{const s=ge(),{control:m}=w(),{fields:p,remove:d,append:h,update:g}=ao({control:m,name:`negocios.${t}.contratos`});return e(G.Provider,{value:{modalAgregarContrato:s,clienteId:o,mainNegocioId:r,negocioIndex:t,fields:p,remove:d,append:h,update:g,isDecimo:a},children:n})},ce=c.exports.createContext({}),cn=({children:n})=>{const[o,r]=c.exports.useState(null),t=c.exports.useCallback((s,m)=>{r({negocioIndex:s,contratoIndex:m})},[]),a=c.exports.useCallback(()=>r(null),[]);return e(ce.Provider,{value:{negocioContrato:o,setNegocioContrato:t,setNullNegocioContrato:a},children:n})},ln=n=>{const{negocioIndex:o}=n,{formState:r}=w(),{errors:t}=r,{fields:a,remove:s}=c.exports.useContext(G),{setNegocioContrato:m}=c.exports.useContext(ce);return e("div",{className:i.tableResponsive,children:l("table",{className:i.table,children:[e(tn,{negocioIndex:o}),l("tbody",{children:[a==null?void 0:a.map((p,d)=>{var h,g,x,u,N,P,f,C,M,F,z,S,y,H,B,J,Y,oe,_e,Ce,Fe,Se,ye,we,Pe,Me,$e,Ee,Ae,Te,De,Ie,ze,Re,ke,He,qe,Le,Ve,je,We,Be,Oe,Ue,Ge;return l("tr",{className:i.row,children:[e("td",{className:i.column,children:d+1}),l("td",{className:`${i.column} ${i.columnClick}`,onClick:()=>m(Number(o),d),children:[e("div",{className:i.columnClickEdit,children:e("span",{})}),l("span",{children:[p.nombre," ",p.apellido]})]}),e("td",{className:i.column,children:e("span",{children:p.identificacion})}),e("td",{className:i.column,children:e(j,{className:i.inputDecimal,name:`negocios.${o}.contratos.${d}.salario`,label:"Salario",fullWidth:!0,error:!!((u=(x=(g=(h=t==null?void 0:t.negocios)==null?void 0:h[Number(o)])==null?void 0:g.contratos)==null?void 0:x[d])!=null&&u.salario),helperText:(M=(C=(f=(P=(N=t==null?void 0:t.negocios)==null?void 0:N[Number(o)])==null?void 0:P.contratos)==null?void 0:f[d])==null?void 0:C.salario)==null?void 0:M.message,size:"small"})}),e("td",{className:i.column,children:e(j,{className:i.inputDecimal,name:`negocios.${o}.contratos.${d}.decimo`,label:"D\xE9cimo",fullWidth:!0,error:!!((y=(S=(z=(F=t==null?void 0:t.negocios)==null?void 0:F[Number(o)])==null?void 0:z.contratos)==null?void 0:S[d])!=null&&y.decimo),helperText:(oe=(Y=(J=(B=(H=t==null?void 0:t.negocios)==null?void 0:H[Number(o)])==null?void 0:B.contratos)==null?void 0:J[d])==null?void 0:Y.decimo)==null?void 0:oe.message,size:"small"})}),e("td",{className:i.column,children:e(j,{className:i.inputDecimal,name:`negocios.${o}.contratos.${d}.vacaciones`,label:"Vacaciones",fullWidth:!0,error:!!((Se=(Fe=(Ce=(_e=t==null?void 0:t.negocios)==null?void 0:_e[Number(o)])==null?void 0:Ce.contratos)==null?void 0:Fe[d])!=null&&Se.vacaciones),helperText:($e=(Me=(Pe=(we=(ye=t==null?void 0:t.negocios)==null?void 0:ye[Number(o)])==null?void 0:we.contratos)==null?void 0:Pe[d])==null?void 0:Me.vacaciones)==null?void 0:$e.message,size:"small"})}),e("td",{className:i.column,children:e(rn,{negocioIndex:o,contratoIndex:d})}),e("td",{className:i.column,children:e(j,{className:i.inputDecimal,name:`negocios.${o}.contratos.${d}.horas_extras`,label:"Horas extras",fullWidth:!0,error:!!((De=(Te=(Ae=(Ee=t==null?void 0:t.negocios)==null?void 0:Ee[Number(o)])==null?void 0:Ae.contratos)==null?void 0:Te[d])!=null&&De.horas_extras),helperText:(He=(ke=(Re=(ze=(Ie=t==null?void 0:t.negocios)==null?void 0:Ie[Number(o)])==null?void 0:ze.contratos)==null?void 0:Re[d])==null?void 0:ke.horas_extras)==null?void 0:He.message,size:"small"})}),e("td",{className:i.column,children:e(j,{className:i.inputDecimal,name:`negocios.${o}.contratos.${d}.comisiones`,label:"Comisiones",fullWidth:!0,error:!!((je=(Ve=(Le=(qe=t==null?void 0:t.negocios)==null?void 0:qe[Number(o)])==null?void 0:Le.contratos)==null?void 0:Ve[d])!=null&&je.comisiones),helperText:(Ge=(Ue=(Oe=(Be=(We=t==null?void 0:t.negocios)==null?void 0:We[Number(o)])==null?void 0:Be.contratos)==null?void 0:Oe[d])==null?void 0:Ue.comisiones)==null?void 0:Ge.message,size:"small"})}),e(an,{negocioIndex:o,contratoIndex:d}),e("td",{className:i.column,children:e(on,{negocioIndex:o,contratoIndex:d})}),e("td",{className:`${i.column} ${i.icon}`,children:e(so,{color:"error",onClick:()=>s(d),children:e(ro,{})})})]},`${p.id}`)}),e(en,{negocioIndex:o})]})]})})},dn=n=>{const{negocioIndex:o}=n,{control:r}=w(),t=A({control:r,name:`negocios.${o}.contratos`}),a=c.exports.useMemo(()=>t&&t.length>0?t.map(s=>Number(s.salario||0)+Number(s.vacaciones||0)).reduce((s,m)=>s+m):0,[t]);return l(b,{variant:"h5",children:["Salarios + Vacaciones = ",e("strong",{children:E(a)})," "]})},mn=(n,o)=>{const[,r,,,,t]=o,{negocios:a}=c.exports.useContext(U),{append:s,mainNegocioId:m,clienteId:p,modalAgregarContrato:d,isDecimo:h}=c.exports.useContext(G),{setHide:g}=d;return{handleAppenContrato:async u=>{if(u.seleccion==="old"){const N=a.flatMap(f=>f.contratos);(N==null?void 0:N.find(f=>Number(f.id_contrato)===Number(u.empleado_selected.id)))?n.setError("empleado_selected.id",{type:"manual",message:"El empleado ya existe en la lista actual. Favor seleccionar otro o crear uno nuevo."}):(s({salario:"",decimo:h?"":0,vacaciones:0,preaviso:0,indemnizacion:0,impuesto_renta:0,id_contrato:Number(u.empleado_selected.id),nombre:u.empleado_selected.nombre||"",apellido:u.empleado_selected.apellido||"",complete_name:u.empleado_selected.complete_name||"",identificacion:u.empleado_selected.identificacion||"",horas_extras:0,comisiones:0,tipo_identificacion:u.empleado_selected.tipo_identificacion||"",seguro:u.empleado_selected.seguro||u.empleado_selected.identificacion||"",conyuge_no_trabaja:u.empleado_selected.conyuge_no_trabaja}),g(),n.reset({seleccion:""}),t())}else{const N=await r(`/admin/contratos/${m}/${p}/add-contrato-planilla`,{method:"POST",data:D(_({},u.new_empleado),{negocio:m})});N.data&&(s({salario:"",decimo:h?"":0,vacaciones:0,preaviso:0,indemnizacion:0,impuesto_renta:0,id_contrato:N.data.id,nombre:u.new_empleado.nombre||"",apellido:u.new_empleado.apellido||"",complete_name:`${u.new_empleado.nombre} ${u.new_empleado.apellido}`,identificacion:u.new_empleado.identificacion||"",horas_extras:0,comisiones:0,tipo_identificacion:u.new_empleado.tipoIdentificacion||"",seguro:u.new_empleado.seguro||u.new_empleado.identificacion||"",conyuge_no_trabaja:u.new_empleado.conyuge_no_trabaja}),g(),n.reset({seleccion:""}),t())}}}},lo=R().shape({seleccion:T().trim().required("Favor seleccionar la forma de agregar al empleado").test("check","Favor seleccionar solo de la lista",n=>!!(n&&["new","old"].includes(n))),empleado_selected:R().nullable().when("seleccion",{is:"old",then:R().shape({id:X().typeError("Favor seleccionar el empleado").positive("Favor seleccionar el empleado").integer("Favor seleccionar el empleado"),nombre:T().trim().required("Favor de ingresar el apellido").matches(K,"Favor ingresar solo letras del abecedario"),apellido:T().trim().required("Favor de ingresar el apellido").matches(K,"Favor ingresar solo letras del abecedario"),complete_name:T().trim().required("Favor de ingresar el apellido").matches(K,"Favor ingresar solo letras del abecedario"),identificacion:T().trim().required("Favor seleccionar el empleado"),fecha_ini:me().transform((n,o)=>o===""?null:n).typeError("Favor seleccionar el empleado").nullable(!0).default(null).notRequired(),dv:T().typeError("Favor seleccionar el empleado").nullable(!0).notRequired().test("check","Favor ingresar un n\xFAmero de dos decimales",n=>!!(!n||n&&n.match(Xe)))}).typeError("Favor seleccionar el empleado")}),new_empleado:R().typeError("Favor ingresar el empleado").nullable().when("seleccion",{is:"new",then:R().shape({nombre:T().trim().required("Favor de ingresar el nombre").matches(K,"Favor ingresar solo letras del abecedario"),apellido:T().trim().required("Favor de ingresar el apellido").matches(K,"Favor ingresar solo letras del abecedario"),dv:T().trim().nullable(!0).notRequired().test("check","Favor ingresar un n\xFAmero de dos decimales",n=>!!(!n||n&&n.match(Xe))),tipoIdentificacion:T().trim().required("Favor de ingresar el tipo de identificaci\xF3n").test("is-identificacion","Favor de ingresar un tipo de identificaci\xF3n v\xE1lido: "+[...pe,"C\xE9dula No verificada"].join(", "),n=>[...pe,"C\xE9dula No verificada"].includes(n)),identificacion:T().trim().required("Favor de ingresar la c\xE9dula o pasaporte").matches(eo,"Favor de ingresar solo n\xFAmeros, letras en may\xFAscula y/o guiones (-)"),seguro:T().trim().nullable(!0).notRequired().test("check-seguro","Favor de ingresar solo n\xFAmeros, letras en may\xFAscula y/o guiones (-)",n=>!!(!n||n&&new RegExp(eo).test(n))),fecha_ini:me().transform((n,o)=>o===""?null:n).typeError("Favor de seleccionar la fecha de inicio del empleado").nullable(!0).default(null).notRequired()})})}),mo=()=>{var p,d,h,g,x,u,N,P,f,C,M,F,z,S,y,H;const n=w(),{register:o,formState:r,control:t,setValue:a}=n,{errors:s}=r,m=A({control:t,name:"new_empleado.conyuge_no_trabaja"});return l($,{spacing:1,style:{marginTop:10},children:[e(io,{control:t,label:"Tipo de identificaci\xF3n",options:[...pe,"C\xE9dula No verificada"],error:!!((p=s==null?void 0:s.new_empleado)!=null&&p.tipoIdentificacion),helperText:(h=(d=s==null?void 0:s.new_empleado)==null?void 0:d.tipoIdentificacion)==null?void 0:h.message,name:"new_empleado.tipoIdentificacion",required:!0}),e(te,_({label:"Nombre",fullWidth:!0,error:!!((g=s==null?void 0:s.new_empleado)!=null&&g.nombre),helperText:(u=(x=s==null?void 0:s.new_empleado)==null?void 0:x.nombre)==null?void 0:u.message,required:!0},o("new_empleado.nombre"))),e(te,_({label:"Apellido",fullWidth:!0,error:!!((N=s==null?void 0:s.new_empleado)!=null&&N.apellido),helperText:(f=(P=s==null?void 0:s.new_empleado)==null?void 0:P.apellido)==null?void 0:f.message,required:!0},o("new_empleado.apellido"))),e(te,_({label:"Identificaci\xF3n",fullWidth:!0,error:!!((C=s==null?void 0:s.new_empleado)!=null&&C.identificacion),helperText:(z=(F=(M=s==null?void 0:s.new_empleado)==null?void 0:M.identificacion)==null?void 0:F.message)!=null?z:"C\xE9dula o Pasaporte",required:!0},o("new_empleado.identificacion"))),e(te,_({label:"Seguro social",fullWidth:!0,error:!!((S=s==null?void 0:s.new_empleado)!=null&&S.seguro),helperText:(H=(y=s==null?void 0:s.new_empleado)==null?void 0:y.seguro)==null?void 0:H.message},o("new_empleado.seguro"))),e(Mo,{control:e(co,{checked:m===4,onChange:B=>{a("new_empleado.conyuge_no_trabaja",B.target.checked?4:1)}}),label:"Casado(a) y c\xF3nyuge no trabaja"})]})},un=()=>{const{mainNegocioId:n,clienteId:o}=c.exports.useContext(G),{control:r,formState:t}=w(),{errors:a}=t;return e(Fo,{control:r,name:"empleado_selected",render:({field:s})=>{var m,p,d,h,g;return e(Ao,D(_({},s),{ref:null,urlFetch:`/admin/contratos/${n}/${o}/input-planilla`,enableFirst:!0,onChange:(x,u)=>s.onChange(u),inputProps:{label:"Empleado",helperText:(p=(m=a==null?void 0:a.empleado_selected)==null?void 0:m.id)==null?void 0:p.message,error:!!((g=(h=(d=t.errors)==null?void 0:d.empleado_selected)==null?void 0:h.id)!=null&&g.message)},fullWidth:!0,isOptionEqualToValue:(x,u)=>x.id===u.id,getOptionLabel:x=>x.complete_name||"",renderOption:(x,u,{selected:N})=>l(To,D(_({},x),{style:{textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e(co,{icon:e($o,{}),checkedIcon:e(Eo,{}),style:{marginRight:8},checked:N}),l("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:[l(b,{variant:"body1",children:[u.nombre," ",u.apellido]}),e(b,{variant:"body2",children:u.identificacion})]})]}))}))}})},pn=()=>{var a;const{control:n,formState:o}=w(),{errors:r}=o,t=A({control:n,name:"seleccion"});return l(v,{children:[e(io,{label:"Selecci\xF3n",options:["Insertar nuevo empleado","Empleado de la lista actual de contratos"],values:["new","old"],error:!!(r!=null&&r.seleccion),helperText:(a=r==null?void 0:r.seleccion)==null?void 0:a.message,name:"seleccion",required:!0}),t==="old"&&e("div",{style:{marginTop:10},children:e(un,{})}),t==="new"&&e(mo,{})]})},oo=()=>{const n=c.exports.useContext(G),{modalAgregarContrato:o}=n,{modalState:r,setHide:t}=o,a=ae({mode:"all",resolver:re(lo)}),s=he(),{handleAppenContrato:m}=mn(a,s),[,,,p,,d]=s,h=c.exports.useCallback(()=>{t(),d(),a.reset({seleccion:""})},[]);return e(ie,{state:r,title:"Agregar Empleado",setHide:()=>h(),cancelBotton:{text:"Cerrar",actionFunction:()=>h()},actionButton:{text:"Agregar",actionFunction:a.handleSubmit(m)},children:l(se,D(_({},a),{children:[p&&e(ee,{severity:"error",variant:"outlined",sx:{width:"100%",mb:2},children:p==null?void 0:p.message}),e(pn,{})]}))})},hn=n=>{const{reset:o}=n,r=c.exports.useContext(ce),{negocioContrato:t,setNullNegocioContrato:a}=r,{control:s}=w(),m=A({control:s,name:"negocios"}),[p,d,h,g,,x]=he(),{update:u}=c.exports.useContext(G);c.exports.useEffect(()=>{(()=>{if(t){const{negocioIndex:C,contratoIndex:M}=t,F=m[C].contratos[M];o({seleccion:"new",new_empleado:D(_({},F),{tipoIdentificacion:F.tipo_identificacion,seguro:F.seguro===F.identificacion?"":F.seguro})})}else o({seleccion:"new",new_empleado:{}})})()},[t]);const N=f=>{const{negocioIndex:C,contratoIndex:M}=t,F=m[C].contratos[M];d(`/admin/contratos/${F.id_contrato}/edit-planilla`,{method:"POST",data:f.new_empleado}).then(z=>{if(z.data){const S=f.new_empleado,y=F;y.apellido=S.apellido||"",y.nombre=S.nombre||"",y.complete_name=`${S.nombre} ${S.apellido}`,y.tipo_identificacion=S.tipoIdentificacion||"",y.identificacion=S.identificacion||"",y.seguro=S.seguro||"",y.conyuge_no_trabaja=S.conyuge_no_trabaja,u(M,_({},y)),o({seleccion:"new",new_empleado:{}}),a(),x()}})};return{handleSetHide:c.exports.useCallback(()=>{a(),x(),o({seleccion:"new",new_empleado:{}})},[]),onSubmit:N,isLoading:p,response:h,error:g}},gn=()=>{const n=c.exports.useContext(ce),{negocioContrato:o}=n,r=ae({mode:"all",resolver:re(lo)}),{handleSubmit:t}=r,a=hn(r),{handleSetHide:s,onSubmit:m,isLoading:p}=a,{response:d,error:h}=a;return l(ie,{state:o!==null,setHide:()=>s(),title:"Editar Empleado",actionButton:{text:"Guardar",actionFunction:t(m),isLoading:p},children:[(d||h)&&e(ee,{variant:"outlined",severity:d?"success":"error",children:(d==null?void 0:d.message)||(h==null?void 0:h.message)}),e(se,D(_({},r),{children:e(mo,{})}))]})},xn=n=>{const{fieldsNegocios:o}=c.exports.useContext(U),{remove:r}=o,{negocioIndex:t}=n,{control:a}=w(),s=A({control:a,name:`negocios.${t}`});return s.contratos&&s.contratos.length>0?l(v,{children:[e(ln,{negocioIndex:t}),e(dn,{negocioIndex:t}),e(oo,{}),e(gn,{})]}):l(ee,{severity:"error",action:t!==0&&t!=="0"&&e(Z,{variant:"contained",color:"error",size:"small",onClick:()=>r(Number(t)),startIcon:e(ro,{}),children:"Remover negocio"}),children:[e(b,{fontWeight:"bold",children:"Favor ingresar al menos un empleado"}),e(oo,{})]})},Ne=c.exports.createContext({}),Nn=({children:n})=>{const o=ge();return e(Ne.Provider,{value:{modalAgregarNegocio:o},children:n})},bn="_divBtnAgregar_1mbg8_1",vn="_btnAgregar_1mbg8_9";var le={divBtnAgregar:bn,btnAgregar:vn};const fn=()=>{const{modalAgregarNegocio:n}=c.exports.useContext(Ne),{setOpen:o}=n,{modalAgregarContrato:r}=c.exports.useContext(G),{setOpen:t}=r;return l("div",{className:le.divBtnAgregar,children:[e(Z,{className:le.btnAgregar,variant:"contained",size:"small",onClick:()=>t(),startIcon:e(wo,{}),children:"Agregar empleado"}),e(Z,{className:le.btnAgregar,variant:"contained",color:"success",size:"small",onClick:()=>o(),startIcon:e(Do,{}),children:"Agregar negocio"})]})},_n=R().shape({negocio_cobrar:R().shape({id:X().typeError("Favor ingresar el id").integer("Favor ingresar el negocio").positive("Favor ingresar el negocio").required("Favor ingresar el id")}).typeError("Favor seleccionar un negocio").required("Favor seleccionar un negocio")}),Cn=(n,o)=>{const{fieldsNegocios:r}=c.exports.useContext(U),{append:t}=r,{control:a}=w(),s=A({control:a,name:"negocios"}),m=()=>{o(),n.reset({})};return{handleAppendNegocio:d=>{s.findIndex(g=>Number(g.id_negocio)===Number(d.negocio_cobrar.id))===-1?(t({id_negocio:d.negocio_cobrar.id,id_cliente:d.negocio_cobrar.id_cliente,nombre:d.negocio_cobrar.nombre_negocio,tipo:d.negocio_cobrar.tipo,contratos:[]}),m()):n.setError("negocio_cobrar",{message:"El negocio ya existe en la planilla actual"})},handleSetHide:m}},Fn=()=>{const{modalAgregarNegocio:n}=c.exports.useContext(Ne),{modalState:o,setHide:r}=n,t=ae({resolver:re(_n)}),{handleAppendNegocio:a,handleSetHide:s}=Cn(t,r);return e(se,D(_({},t),{children:e(ie,{state:o,title:"Agregar Negocio",setHide:()=>s(),cancelBotton:{text:"Cerrar",actionFunction:()=>s()},actionButton:{text:"Agregar",actionFunction:t.handleSubmit(a)},children:e(Io,{name:"negocio_cobrar",label:"Negocio"})})}))},be=c.exports.createContext({}),Sn=({children:n,clienteId:o,mainNegocioId:r})=>{const t=ge();return e(be.Provider,{value:{modalSaveData:t,clienteId:o,mainNegocioId:r},children:n})},yn="_divSaveData_28j6j_1";var wn={divSaveData:yn};const Pn=()=>{const{fetcherSaveData:n}=c.exports.useContext(U),o=c.exports.useContext(be),{mainNegocioId:r,clienteId:t}=o,[,a]=n,{date:s}=c.exports.useContext(O);return{handleSaveData:p=>{a(`/admin/negocios/${r}/${t}/planillar`,{method:"POST",data:D(_({},p),{date:s})})}}},Mn=()=>{const{fetcherSaveData:n}=c.exports.useContext(U),{modalSaveData:o}=c.exports.useContext(be),{modalState:r,setHide:t,setOpen:a}=o,{handleSubmit:s,formState:m}=w(),{errors:p}=m,{handleSaveData:d}=Pn(),[h,,g,x]=n,u=xo();return l(v,{children:[e(W,{}),e("div",{className:wn.divSaveData,children:e(Z,{variant:"outlined",onClick:()=>a(),children:"Guardar"})}),e(ie,{state:r,setHide:()=>t(),title:"\xA1Atenci\xF3n!",type:g?"SUCCESS":"ERROR",actionButton:g?{text:"Ver",actionFunction:()=>u(`/planillas/${g.id}`,{replace:!0})}:!p.negocios&&(!g||x)?{text:"Guardar",actionFunction:s(d),isLoading:h}:void 0,children:g?l(v,{children:[g.message,". \xBFDesea ver la planilla ",e("strong",{children:"SIPE"})," ","realizada?"]}):p.negocios?e(v,{children:"Se encontraron errores en el formulario. Favor corregir antes de avanzar."}):!p.negocios&&!x?e(v,{children:"\xBFRealmente desea guardar los datos?"}):e(v,{children:x==null?void 0:x.message})})]})},$n=()=>{const n=c.exports.useContext(U),{date:o}=c.exports.useContext(O),{fieldsNegocios:r,isDecimo:t}=n,{mainNegocioId:a,clienteId:s}=n,{fields:m}=r;return l(Nn,{children:[e(Q,{variant:"outlined",className:i.paperTables,children:l($,{direction:"column",spacing:1,marginTop:1,margin:1,children:[l(b,{variant:"h5",children:["Formulario para la planilla del mes de:"," ",e("span",{className:i.fechaTables,children:k(o,"MMMM yyyy")})]}),e(W,{}),m.map((p,d)=>l(Q,{variant:"outlined",children:[l(b,{variant:"h5",textTransform:"uppercase",fontWeight:"bold",padding:1,color:d===0?"red":"darkorange",children:[p.tipo," ",p.nombre]}),e(sn,{mainNegocioId:m[0].id_negocio,clienteId:m[0].id_cliente,negocioIndex:d,isDecimo:t,children:l(cn,{children:[e(xn,{negocioIndex:d}),e(fn,{})]})})]},`${d}`)),e(Q,{variant:"outlined",className:i.paperNotas,children:l($,{direction:"column",spacing:1,children:[e(b,{variant:"h5",children:"Notas:"}),e(W,{}),e(zo,{name:"notas",height:300})]})}),e(Sn,{mainNegocioId:a,clienteId:s,children:e(Mn,{})})]})}),e(Fn,{})]})},ve=n=>{const[,o]=c.exports.useContext(I),r=c.exports.useMemo(()=>o.planillas[n].negocios.flatMap(a=>a.contratos).map(a=>Number(a.indemnizacion)).reduce((a,s)=>a+s)>0,[n]),t=c.exports.useMemo(()=>o.planillas[n].negocios.flatMap(a=>a.contratos).map(a=>Number(a.indemnizacion)).reduce((a,s)=>a+s)>0,[n]);return{isIndemnizacion:r,isPreaviso:t}},En=({page:n})=>{const{isIndemnizacion:o,isPreaviso:r}=ve(n);return e("thead",{children:l("tr",{children:[e("th",{className:i.header,children:"#"}),e("th",{className:i.header,children:"Nombre"}),e("th",{className:i.header,children:"C\xE9dula"}),e("th",{className:i.header,children:"Salario"}),e("th",{className:i.header,children:"D\xE9cimo"}),e("th",{className:i.header,children:"Vacaciones"}),e("th",{className:i.header,children:"Imp. Renta"}),e("th",{className:i.header,children:"Horas Extras"}),e("th",{className:i.header,children:"Comisiones"}),o&&e("th",{className:i.header,children:"Comisiones"}),r&&e("th",{className:i.header,children:"Comisiones"}),e("th",{className:i.header,children:"Totales"})]})})},An=({page:n,index:o})=>{const[,r]=c.exports.useContext(I),{isIndemnizacion:t,isPreaviso:a}=ve(n);return l(v,{children:[t&&e("td",{children:E(r==null?void 0:r.planillas[n].negocios.flatMap(s=>s.contratos)[o].indemnizacion)}),a&&e("td",{children:E(r==null?void 0:r.planillas[n].negocios.flatMap(s=>s.contratos)[o].preaviso)})]})},L=({page:n,name:o})=>{const[,r]=c.exports.useContext(I),t=c.exports.useMemo(()=>r==null?void 0:r.planillas[n].negocios.flatMap(a=>a.contratos).map(a=>Number(a[o]||0)).reduce((a,s)=>a+s),[n]);return e(v,{children:E(t)})},Tn=({page:n})=>{const[,o]=c.exports.useContext(I),r=c.exports.useMemo(()=>o==null?void 0:o.planillas[n].negocios.flatMap(t=>t.contratos).map(t=>Number(t.salario||0)+Number(t.decimo||0)+Number(t.vacaciones||0)+Number(t.impuesto_renta||0)+Number(t.horas_extras||0)+Number(t.comisiones||0)+Number(t.indemnizacion||0)+Number(t.preaviso||0)).reduce((t,a)=>t+a),[n]);return e(v,{children:E(r)})},Dn=({page:n})=>{const{isIndemnizacion:o,isPreaviso:r}=ve(n);return l("tr",{className:i.row,children:[e("td",{className:i.column}),e("td",{className:i.column,children:"Totales"}),e("td",{className:i.column}),e("td",{className:i.column,children:e(L,{name:"salario",page:n})}),e("td",{className:i.column,children:e(L,{name:"decimo",page:n})}),e("td",{className:i.column,children:e(L,{name:"vacaciones",page:n})}),e("td",{className:i.column,children:e(L,{name:"impuesto_renta",page:n})}),e("td",{className:i.column,children:e(L,{name:"horas_extras",page:n})}),e("td",{className:i.column,children:e(L,{name:"comisiones",page:n})}),o&&e("td",{className:i.column,children:e(L,{name:"indemnizacion",page:n})}),r&&e("td",{className:i.column,children:e(L,{name:"preaviso",page:n})}),e("td",{colSpan:2,className:i.column,children:e(Tn,{page:n})})]})},In=()=>{const[,n]=c.exports.useContext(I),{page:o,setPage:r}=c.exports.useContext(xe);return l(Q,{className:ue.paperLastedPlanillas,variant:"outlined",component:$,spacing:1,direction:"column",paddingBottom:1,children:[l(b,{variant:"h5",className:ue.paperTitle,children:["Informaci\xF3n de la planilla anterior del mes de:"," ",l("strong",{children:["(",k(n==null?void 0:n.planillas[o].mes,"MMMM - yyyy"),")"]})]}),e("div",{className:i.lastedTableResponsive,children:l("table",{className:i.table,children:[e(En,{page:o}),l("tbody",{children:[n==null?void 0:n.planillas[o].negocios.flatMap(t=>t.contratos).map((t,a)=>l("tr",{className:i.row,children:[e("td",{className:i.column,children:a+1}),l("td",{className:i.column,children:[t.nombre," ",t.apellido]}),e("td",{className:i.column,children:t.identificacion}),e("td",{className:i.column,children:E(t.salario)}),e("td",{className:i.column,children:E(t.decimo)}),e("td",{className:i.column,children:E(t.vacaciones)}),e("td",{className:i.column,children:E(t.impuesto_renta)}),e("td",{className:i.column,children:E(t.horas_extras)}),e("td",{className:i.column,children:E(t.comisiones)}),e(An,{page:o,index:a}),e("td",{className:i.column,children:E(Number(t.salario)+Number(t.decimo)+Number(t.vacaciones)+Number(t.impuesto_renta)+Number(t.horas_extras)+Number(t.comisiones)+Number(t.indemnizacion)+Number(t.preaviso))})]},`${t.id_contrato}`)),e(Dn,{page:o})]})]})}),e(Ro,{color:"primary",count:n==null?void 0:n.planillas.length,page:o+1,onChange:(t,a)=>r(a-1)})]})};var fe={},zn=Ho.exports;Object.defineProperty(fe,"__esModule",{value:!0});var uo=fe.default=void 0,Rn=zn(ko),kn=qo,Hn=(0,Rn.default)((0,kn.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"}),"CalendarMonth");uo=fe.default=Hn;const qn=a=>{var s=a,{date:n,minDate:o,maxDate:r}=s,t=Ke(s,["date","minDate","maxDate"]);const[m,p]=c.exports.useState(de(n||Date.now())),[d,h]=c.exports.useState(!1),{render:g,setDate:x}=t,u=()=>{h(!1),p(de(n||Date.now()))};return l(v,{children:[g(d,N=>h(N)),l(Vo,{open:d,onClose:()=>u(),children:[e(jo,{children:e(b,{style:{textTransform:"uppercase"},children:k(m,"MMMM")})}),e(Bo,{date:m,maxDate:o||No(m,12),minDate:r||Oo(m,12),onChange:N=>{N&&p(N)}}),l(Wo,{children:[e(Z,{onClick:()=>u(),children:"Cerrar"}),e(Z,{onClick:()=>{h(!1),x(m)},children:"Ok"})]})]})]})},Ln=()=>{const{date:n,setDate:o}=c.exports.useContext(O);return e(v,{children:e(qn,{date:bo(n),setDate:r=>{o(k(de(r),"yyyy-MM-dd HH:mm:ss"))},render:(r,t)=>e(Lo,{title:"Seleccinar Mes",disableInteractive:!0,children:e(so,{onClick:()=>t(!0),children:e(uo,{})})})})})},Vn=()=>{const n=c.exports.useContext(I),[,o]=n;return l(v,{children:[l($,{direction:"row",spacing:1,justifyContent:"space-between",divider:e(W,{orientation:"vertical",flexItem:!0}),children:[l(b,{children:[e("strong",{children:"Usuario Elaborador"}),": ",o==null?void 0:o.user_elaborador]}),l(b,{children:[e("strong",{children:"Contrase\xF1a Elaborador"}),": ",o==null?void 0:o.password_elaborador]})]}),e(W,{}),l($,{direction:"row",spacing:1,justifyContent:"space-between",divider:e(W,{orientation:"vertical",flexItem:!0}),children:[l(b,{children:[e("strong",{children:"Usuario Representante Legal"}),":"," ",o==null?void 0:o.user_representante]}),l(b,{children:[e("strong",{children:"Contrase\xF1a Representante Legal"}),":"," ",o==null?void 0:o.password_representante]})]})]})},jn=()=>{const n=c.exports.useContext(I),[,o]=n,{date:r}=c.exports.useContext(O),{setNegocioNota:t}=c.exports.useContext(vo);return c.exports.useEffect(()=>{(()=>{if(o){const s={id:o==null?void 0:o.id_negocio,tipo:o.tipo,nombre_negocio:o==null?void 0:o.nombre_negocio,ruta:o.ruta,ruc:o.ruc};t({negocio:s,mes:r,tipo:"SIPE"})}})()},[o,r]),null},Wn=c.exports.lazy(()=>to(()=>import("./index53.js"),["assets/index53.js","assets/index.js","assets/index7.css","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/BootstrapTooltip.js","assets/Tooltip.js","assets/Popper.js","assets/Portal.js","assets/isHostComponent.js","assets/Grow.js","assets/array.js","assets/upperFirst.js","assets/useModal.js","assets/IconButton.js","assets/ButtonBase.js","assets/Modal.js","assets/Close2.js","assets/LoadingButton.js","assets/Backdrop.js","assets/Modal2.js","assets/Paper.js","assets/Typography.js","assets/Button.js","assets/Error.js","assets/TextInput.js","assets/TextField.js","assets/FormHelperText.js","assets/react-is.production.min.js","assets/List.js","assets/GlobalStyles.js","assets/Stack.js","assets/Divider.js","assets/Loader.js","assets/Grid.js","assets/Alert.js","assets/Close.js"])),Bn=c.exports.lazy(()=>to(()=>import("./index54.js"),["assets/index54.js","assets/index8.css","assets/index.js","assets/index7.css","assets/Modal.js","assets/Close2.js","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/LoadingButton.js","assets/Backdrop.js","assets/Modal2.js","assets/isHostComponent.js","assets/Portal.js","assets/Paper.js","assets/Typography.js","assets/Button.js","assets/ButtonBase.js","assets/IconButton.js","assets/Error.js","assets/array.js","assets/upperFirst.js","assets/regex.js","assets/useModal.js","assets/PatronalInput.js","assets/TextInput.js","assets/TextField.js","assets/FormHelperText.js","assets/react-is.production.min.js","assets/Grow.js","assets/List.js","assets/GlobalStyles.js","assets/CustomSipe.js","assets/index7.js","assets/Stack.js","assets/Alert.js","assets/Close.js"])),On=()=>{const n=c.exports.useContext(I),[,o,,,r]=n,{date:t}=c.exports.useContext(O),{page:a}=c.exports.useContext(xe);return l(Q,{className:ue.paper,variant:"outlined",children:[e(jn,{}),l($,{divider:e(W,{}),direction:"column",spacing:1,children:[l($,{direction:{xs:"column",md:"row"},justifyContent:"space-between",children:[l($,{direction:"row",spacing:1,alignItems:"center",children:[l(b,{variant:"h5",color:"green",fontWeight:"bold",textTransform:"uppercase",children:[o==null?void 0:o.tipo," ",o==null?void 0:o.nombre_negocio]}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Wn,{id:o==null?void 0:o.id_negocio,update:s=>r(_(_({},o),s))})})]}),l($,{direction:"row",alignItems:"center",children:[t&&e(Ln,{}),l(b,{variant:"h5",fontWeight:"bold",textTransform:"uppercase",children:["MES A REALIZAR:"," "]}),e(b,{variant:"h5",fontWeight:"bold",textTransform:"uppercase",color:"red",marginLeft:1,children:k(t,"MMMM yyyy")})]})]}),l(b,{children:[e("strong",{children:"Raz\xF3n social:"})," ",e("span",{children:o==null?void 0:o.nom_cliente})]}),l($,{spacing:1,divider:e(W,{flexItem:!0,variant:"middle",orientation:"vertical"}),direction:{xs:"column",md:"row"},children:[l(b,{children:[e("strong",{children:"RUC:"})," ",e("span",{children:o==null?void 0:o.ruc})]}),l(b,{children:[e("strong",{children:"DV:"})," ",e("span",{children:o==null?void 0:o.dv})]}),l(b,{children:[e("strong",{children:"Ruta:"})," ",e("span",{children:o==null?void 0:o.ruta})]})]}),l(b,{component:$,spacing:1,direction:"row",children:[e("strong",{children:"N. Patronal:"})," ",e("span",{children:o==null?void 0:o.n_patronal}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Bn,{negocio:o.id_negocio,patronal:o==null?void 0:o.patronal_sipe,multer:s=>r(_(_({},o),s))})})]}),e(Vn,{}),o&&k(o.mes,"M")===k(o.next_month,"M")&&e(ee,{variant:"outlined",severity:"error",children:l($,{direction:"row",alignItems:"center",spacing:1,children:[e("span",{children:"Ya se ha realizado la planilla del mes de"}),e(b,{textTransform:"uppercase",fontWeight:"bold",children:k(o.mes,"MMMM")})]})}),o&&o.planillas&&o.planillas.length!==0?l(v,{children:[e(In,{}),o.planillas[a].notas&&o.planillas[a].notas!==""&&l($,{direction:"column",children:[e(b,{variant:"subtitle1",fontWeight:"bold",children:"Notas:"}),Po(o.planillas[a].notas)]})]}):e(ee,{variant:"outlined",severity:"warning",children:"No se encontr\xF3 informaci\xF3n sobre planillas anteriores"})]})]})},Un=()=>{const n=c.exports.useContext(I),[,o,r]=n;return l(v,{children:[!o&&!r&&e(_o,{}),!o&&r&&e(Co,{text:r.message}),o&&!r&&l($,{direction:"column",spacing:1,children:[e(Ko,{children:e(On,{})}),e(Jo,{children:e($n,{})})]})]})},ha=()=>e(Go,{children:l(Yo,{children:[e(Uo,{message:"Planillas"}),e(Un,{})]})});export{ha as default};
