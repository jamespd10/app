var R=Object.defineProperty;var C=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var x=(o,r,n)=>r in o?R(o,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[r]=n,g=(o,r)=>{for(var n in r||(r={}))T.call(r,n)&&x(o,n,r[n]);if(C)for(var n of C(r))j.call(r,n)&&x(o,n,r[n]);return o};import{r as c,A as $,j as m,F as h,a as e,a8 as u,aw as q,b as I}from"./index.js";import{f as A}from"./string.helper.js";import{u as N,N as f}from"./index13.js";import{C as S}from"./ChipState.js";import{d as y}from"./Visibility.js";import{d as F}from"./InsertDriveFile.js";import{d as P}from"./AssignmentTurnedIn.js";import{d as z}from"./PointOfSale.js";import{d as B}from"./PriceCheck.js";import{d as M}from"./PersonAddDisabled.js";import{d as k}from"./Paid.js";import{B as p}from"./BootstrapTooltip.js";import{d as D,a as E}from"./SkipNextOutlined.js";import{I as b}from"./IconButton.js";import{P as L}from"./Pagination.js";import{L as O}from"./Loader.js";import{T as V}from"./TextInput.js";import{d as v}from"./Search.js";import{d as H}from"./Close2.js";import{C as U}from"./ErrorIcon.js";import{H as W}from"./HeaderTitle.js";import"./regex.js";import"./CheckCircle.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useId.js";import"./useControlled.js";import"./useIsFocusVisible.js";import"./Error.js";import"./Chip.js";import"./ButtonBase.js";import"./emotion-react.browser.esm.js";import"./CircularProgress.js";import"./Tooltip.js";import"./Popper.js";import"./Portal.js";import"./isHostComponent.js";import"./Grow.js";import"./Grid.js";import"./Typography.js";import"./TextField.js";import"./useFormControl.js";import"./formControlState.js";import"./react-is.production.min.js";import"./Modal2.js";import"./Backdrop.js";import"./Fade.js";import"./Paper.js";import"./List.js";import"./outlinedInputClasses.js";import"./GlobalStyles.js";import"./StyledGridOverlay.js";import"./Box.js";import"./Divider.js";const G="_container_q0wj5_1",J="_pagination_q0wj5_7",K="_response_q0wj5_14",Q="_table_q0wj5_19",X="_header_q0wj5_24",Y="_column_q0wj5_39",Z="_row_q0wj5_48",ee="_selected_q0wj5_58",te="_checkboxColumn_q0wj5_62",oe="_columnCenter_q0wj5_67",re="_removeSpacing_q0wj5_71",ne="_message_q0wj5_76",ae="_button_q0wj5_81",se="_buttonIcon_q0wj5_86";var t={container:G,pagination:J,response:K,table:Q,header:X,column:Y,row:Z,selected:ee,checkboxColumn:te,columnCenter:oe,removeSpacing:re,message:ne,button:ae,buttonIcon:se};const ce=o=>{const{authState:r}=c.exports.useContext($),{tipo:n}=r,{fa:l}=N(),s=c.exports.useMemo(()=>Boolean(Number(o.cerrado)),[o]),i=c.exports.useMemo(()=>Boolean(Number(o.super_validado)),[o]);return l&&["Super"].includes(n||"")?m(h,{children:[e("td",{className:`${t.column} ${t.columnCenter}`,children:e(S,{label:s?"CERRADO":"OPERANDO",color:s?"error":"success"})}),e("td",{className:`${t.column} ${t.columnCenter}`,children:e(S,{label:i?"V\xC1LIDADO":"NO V\xC1LIDADO",color:i?"success":"error"})})]}):e(h,{})},le=o=>{const r=c.exports.useMemo(()=>`negocios/${o.id}/${o.id_cliente}`,[o]),{c:n,pla:l,f:s,fa:i,itbms:a,dm:d,lq:w}=N();return n?e("td",{className:`${t.column} ${t.columnCenter} ${t.button}`,children:e(p,{title:"Realizar Contrato",placement:"right",children:e(u,{state:o,to:`/${r}/contratar`,children:e(F,{className:t.buttonIcon,fontSize:"small"})})})}):l?e("td",{className:`${t.column} ${t.columnCenter} ${t.button}`,children:e(p,{title:"Realizar planilla",placement:"right",children:e(u,{state:o,to:`/${r}/planillar`,children:e(P,{className:t.buttonIcon,fontSize:"small"})})})}):s?e("td",{className:`${t.column} ${t.columnCenter} ${t.button}`,children:e(p,{title:"Realizar proforma",placement:"right",children:e(u,{state:o,to:`/${r}/proformas/add`,children:e(z,{className:t.buttonIcon,fontSize:"small"})})})}):i?e("td",{className:`${t.column} ${t.columnCenter} ${t.button}`,children:e(p,{title:"Realizar fact. alterna",placement:"right",children:e(u,{state:o,to:`/${r}/fact-alterna/${i}`,children:e(z,{className:t.buttonIcon,fontSize:"small"})})})}):a?e("td",{className:`${t.column} ${t.columnCenter} ${t.button}`,children:e(p,{title:"Realizar ITBMS",placement:"right",children:e(u,{state:o,to:`/${r}/agregar-itbms`,children:e(k,{className:t.buttonIcon,fontSize:"small"})})})}):d?e("td",{className:`${t.column} ${t.columnCenter} ${t.button}`,children:e(p,{title:"Realizar declaraci\xF3n",placement:"right",children:e(u,{state:o,to:`/${r}/agregar-declaracion-municipio`,children:e(B,{className:t.buttonIcon,fontSize:"small"})})})}):w?e("td",{className:`${t.column} ${t.columnCenter} ${t.button}`,children:e(p,{title:"Realizar contrato a liquidar",placement:"right",children:e(u,{state:o,to:`/${r}/contratar?lq=1`,children:e(M,{className:t.buttonIcon,fontSize:"small"})})})}):e("td",{className:`${t.column} ${t.columnCenter} ${t.button}`,children:e(p,{title:"Ver",placement:"right",children:e(u,{state:o,to:`/${r}`,children:e(y,{className:t.buttonIcon,fontSize:"small"})})})})},ie=()=>{const{authState:o}=c.exports.useContext($),{tipo:r}=o,{pagination:n}=c.exports.useContext(f),{fetcher:l,selected:s}=n,[,,i]=l;return e("tbody",{children:i==null?void 0:i.resultados.map(a=>m("tr",{className:`${t.row} ${s.find(d=>d.id===a.id)?t.selected:""}`,children:[e(le,g({},a)),m("td",{className:t.column,children:[a.tipo," ",a.nombre_negocio]}),e("td",{className:t.column,children:a.ruc}),e("td",{className:`${t.column} ${t.columnCenter}`,children:a.aviso_operacion}),e("td",{className:`${t.column} ${t.columnCenter}`,children:q(a.fecha_aviso_op,"dd/MM/yyyy")}),e("td",{className:t.column,children:A(a.monto_ventas)}),e("td",{className:t.column,children:a.patronal_sipe}),m("td",{className:t.column,children:[a.nombre_usuario_sipe," ",a.apellido_usuario_sipe]}),m("td",{className:t.column,children:[a.nombre_usuario_itbms," ",a.apellido_usuario_itbms]}),e("td",{className:t.column,children:a.ruta}),["Super"].includes(r||"")&&e("td",{className:`${t.column} ${t.columnCenter}`,children:a.recorrido}),e(ce,g({},a))]},a.id))})},me=()=>{const{authState:o}=c.exports.useContext($),{tipo:r}=o,{fa:n}=N();return n&&["Super"].includes(r||"")?m(h,{children:[e("th",{children:"Cerrado"}),e("th",{children:"Super v\xE1lidado"})]}):e(h,{})},de=()=>{const{authState:o}=c.exports.useContext($),{tipo:r}=o;return e("thead",{className:t.header,children:m("tr",{children:[e("th",{}),e("th",{children:"Nombre"}),e("th",{children:"RUC"}),e("th",{children:"# de aviso"}),e("th",{children:"Fecha aviso"}),e("th",{children:"Monto anual"}),e("th",{children:"N\xFAmero de SIPE"}),e("th",{children:"Sipe"}),e("th",{children:"F430 - ITBMS"}),e("th",{children:"Ruta"}),["Super"].includes(r||"")&&e("th",{children:"Recorrido"}),e(me,{})]})})},ue=()=>{const{pagination:o}=c.exports.useContext(f),{fetcher:r,page:n,setPage:l}=o,[,,s]=r;return m("div",{className:t.pagination,children:[e(b,{size:"small",onClick:()=>l(n-10),disabled:n<=10,children:e(D,{})}),e(L,{color:"primary",count:s==null?void 0:s.paginas,page:n,onChange:(i,a)=>l(a)}),e(b,{size:"small",onClick:()=>l(n+10),disabled:!!(s&&s.paginas-o.page<10),children:e(E,{})})]})},pe=()=>e("div",{className:t.loader,children:e(O,{margin:20})}),he="_toolbar_1pm2e_1",_e="_title_1pm2e_7",fe="_divToolbar_1pm2e_13",be="_child_1pm2e_20",$e="_formSearch_1pm2e_24",ge="_searchAdorment_1pm2e_28",Ne="_banner_1pm2e_34";var _={toolbar:he,title:_e,divToolbar:fe,child:be,formSearch:$e,searchAdorment:ge,banner:Ne};const Ce=()=>{const o=c.exports.useRef(null),{pagination:r}=c.exports.useContext(f),{search:n,sendSearch:l}=r,[s,i]=c.exports.useState(n);return e("form",{onSubmit:d=>{d.preventDefault(),l(s)},className:_.formSearch,children:e(V,{label:"Buscar...",size:"small",fullWidth:!0,autoFocus:!0,value:s,onChange:d=>i(d.target.value),inputRef:o,helperText:"Por raz\xF3n social, ruc, nombre del negocio, n\xFAmero de contribuyente o n\xFAmero de sipe",InputProps:{endAdornment:m("div",{className:_.searchAdorment,children:[e(b,{size:"small",children:e(v,{})}),s!==""&&e(b,{size:"small",onClick:()=>{var d;i(""),l(""),(d=o==null?void 0:o.current)==null||d.focus()},children:e(H,{})})]})}})})},xe=()=>e(h,{children:m("div",{className:_.toolbar,children:[e("span",{className:_.title,children:"Lista de negocios"}),e("div",{className:_.divToolbar,children:e(Ce,{})})]})}),Se=()=>{const{pagination:o}=c.exports.useContext(f),{fetcher:r}=o,[,,,n]=r;return e("div",{className:t.message,children:e(U,{label:n==null?void 0:n.message})})},ze=c.exports.lazy(()=>I(()=>import("./ModalMessage2.js"),["assets/ModalMessage2.js","assets/Modal.js","assets/Close2.js","assets/jsx-runtime_commonjs-proxy.js","assets/index.js","assets/index7.css","assets/createSvgIcon.js","assets/useId.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/DialogTitle.js","assets/dialogTitleClasses.js","assets/ModalTransition.js","assets/Backdrop.js","assets/Fade.js","assets/Modal2.js","assets/isHostComponent.js","assets/Portal.js","assets/Paper.js","assets/Typography.js","assets/IconButton.js","assets/ButtonBase.js","assets/emotion-react.browser.esm.js","assets/Warning.js","assets/Error.js","assets/CheckCircle.js","assets/DialogContent.js","assets/DialogActions.js","assets/LoadingButton.js","assets/Button.js","assets/CircularProgress.js","assets/useModal.js","assets/useQueryParams.js"])),Ie=c.exports.lazy(()=>I(()=>import("./NegociosAcciones.js"),["assets/NegociosAcciones.js","assets/index.js","assets/index7.css","assets/CustomSpeedDial.js","assets/Assignment.js","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useId.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/FabButtonAction.js","assets/react-is.production.min.js","assets/AssignmentRounded.js","assets/ButtonBase.js","assets/emotion-react.browser.esm.js","assets/Tooltip.js","assets/Popper.js","assets/Portal.js","assets/isHostComponent.js","assets/Grow.js","assets/SpeedDial.module.js","assets/SpeedDial.module.css","assets/Backdrop.js","assets/Fade.js","assets/Stack.js","assets/Typography.js","assets/FileDownload.js","assets/AddBusiness.js","assets/useModal.js"])),Rt=()=>{const{pagination:o}=c.exports.useContext(f),{fetcher:r}=o,[n,,l,s]=r;return m(h,{children:[e(W,{message:"Negocios"}),m("div",{className:t.container,children:[e(xe,{}),e("div",{className:t.response,children:m("table",{className:t.table,children:[e(de,{}),e(ie,{})]})}),n&&e(pe,{}),!n&&s&&e(Se,{}),!n&&l&&!s&&e(ue,{})]}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(ze,{})}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Ie,{})})]})};export{Rt as default};
