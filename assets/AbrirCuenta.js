var Y=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var H=(t,r,i)=>r in t?Y(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,f=(t,r)=>{for(var i in r||(r={}))oe.call(r,i)&&H(t,i,r[i]);if(G)for(var i of G(r))ie.call(r,i)&&H(t,i,r[i]);return t},_=(t,r)=>Z(t,ee(r));import{S as te}from"./SelectHookForm.js";import{T as y}from"./TextInput.js";import{u as v,b as C,c as ne}from"./yup.module.js";import{j as u,a as e,F as N,r as T,as as ae}from"./index.js";import{S as w}from"./Stack.js";import{P as K}from"./Paper.js";import{T as b}from"./Typography.js";import{A as S}from"./AutocompleteServer.js";import{d as $,a as D}from"./CheckBoxOutlineBlank.js";import{C as A}from"./Checkbox.js";import{D as X}from"./DecimalInput.js";import{F as Q}from"./FormControlLabel.js";import{D as M}from"./Divider.js";import{B as j}from"./Button.js";import{b as le}from"./TextField.js";import{D as q,a as re}from"./DireccionProvider.js";import{F as ce}from"./Backdrop.js";import{D as se}from"./DatePicker.js";import{A as de}from"./Alert.js";const Ye=()=>{var o,m,a,c,n;const{register:t,formState:r}=v(),{errors:i}=r;return u(w,{spacing:1,direction:"column",component:K,padding:1,variant:"outlined",children:[e(b,{variant:"h5",children:"Datos del representante"}),u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(y,_(f({label:"Nombre",size:"small",fullWidth:!0},t("nombre_encargado")),{error:!!(i!=null&&i.nombre_encargado),helperText:(o=i==null?void 0:i.nombre_encargado)==null?void 0:o.message})),e(y,_(f({label:"Apellido",size:"small",fullWidth:!0},t("apellido_encargado")),{error:!!(i!=null&&i.apellido_encargado),helperText:(m=i==null?void 0:i.apellido_encargado)==null?void 0:m.message})),e(y,_(f({label:"C\xE9dula o pasaporte",size:"small",fullWidth:!0},t("identificacion_encargado")),{error:!!(i!=null&&i.identificacion_encargado),helperText:(a=i==null?void 0:i.identificacion_encargado)==null?void 0:a.message}))]}),u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(te,{name:"genero",label:"G\xE9nero",options:["MASCULINO","FEMENINO"],size:"small",disableBox:!0,error:!!(i!=null&&i.genero),helperText:(c=i==null?void 0:i.genero)==null?void 0:c.message}),e(y,_(f({label:"Cargo",size:"small",fullWidth:!0},t("cargo_encargado")),{error:!!(i!=null&&i.cargo_encargado),helperText:(n=i==null?void 0:i.cargo_encargado)==null?void 0:n.message}))]})]})},me=()=>{var a;const{control:t,setValue:r,formState:i}=v(),{errors:o}=i,m=C({control:t,name:"banco"});return e(N,{children:e(S,{ref:null,inputProps:{label:"Banco",error:!!(o!=null&&o.banco),helperText:(a=o==null?void 0:o.banco)==null?void 0:a.message},disableStyle:!0,enableFirst:!0,value:m,size:"small",fullWidth:!0,onChange:(c,n)=>r("banco",n,{shouldValidate:!0}),isOptionEqualToValue:(c,n)=>c.id===n.id,urlFetch:"/admin/bancos",getOptionLabel:c=>c.nombre.toUpperCase(),renderOption:(c,n,{selected:l})=>T.exports.createElement("li",_(f({},c),{key:n.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(A,{icon:e($,{}),checkedIcon:e(D,{}),checked:l,size:"small"}),e("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:e(b,{variant:"body1",fontWeight:"bold",children:n.nombre})}))})})},ue=()=>{var a;const{control:t,setValue:r,formState:i}=v(),{errors:o}=i,m=C({control:t,name:"cliente"});return e(N,{children:e(S,{ref:null,inputProps:{label:"Raz\xF3n social",error:!!(o!=null&&o.cliente),helperText:(a=o==null?void 0:o.cliente)==null?void 0:a.message},disableStyle:!0,enableFirst:!0,value:m,size:"small",fullWidth:!0,onChange:(c,n)=>{r("cliente",n,{shouldValidate:!0})},isOptionEqualToValue:(c,n)=>c.id===n.id,urlFetch:"/admin/clientes-autocomplete",getOptionLabel:c=>c.nom_cliente||"",renderOption:(c,n,{selected:l})=>T.exports.createElement("li",_(f({},c),{key:n.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(A,{icon:e($,{}),checkedIcon:e(D,{}),checked:l,size:"small"}),u("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:[n.nom_cliente&&n.nom_cliente!==""&&e(b,{variant:"body1",fontWeight:"bold",children:n.nom_cliente}),n.ruc&&n.ruc!==""&&e(b,{variant:"caption",fontWeight:"bold",children:n.ruc})]}))})})},Ze=()=>u(w,{spacing:1,padding:1,direction:"column",component:K,variant:"outlined",children:[e(b,{variant:"h5",children:"Datos del cliente y el banco"}),u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(ue,{}),e(me,{})]})]}),pe="_container_1wyo1_1",ge="_periodos_1wyo1_2",he="_errorBorder_1wyo1_14";var L={container:pe,periodos:ge,errorBorder:he};const fe=()=>{const{control:t,setValue:r}=v(),i=C({control:t,name:"print_anual"});return e(N,{children:e(Q,{control:e(A,{checked:Boolean(Number(i))===!0,onChange:o=>r("print_anual",o.target.checked)}),label:"IMPRIMIR PERIODOS CON LA PALABRA ANUAL"})})},eo=()=>{var l;const{control:t,register:r,formState:i}=v(),{errors:o}=i,{fields:m,remove:a,append:c}=ne({control:t,name:"periodos"}),n=C({control:t,name:"print_anual"});return u("div",{className:L.container,children:[u("div",{className:`${L.periodos} ${o.periodos?L.errorBorder:""}`,children:[e(b,{variant:"h5",children:"Per\xEDodos"}),e(M,{}),m.map((x,p)=>{var g,s,d,h,F,O,z,P,k,W,B,I,V,R,U;return u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(y,_(f({label:"Per\xEDodo(a\xF1o)",size:"small",fullWidth:!0,placeholder:"yyyy"},r(`periodos.${p}.fecha_yy`)),{error:!!((s=(g=o==null?void 0:o.periodos)==null?void 0:g[p])!=null&&s.fecha_yy),helperText:(F=(h=(d=o==null?void 0:o.periodos)==null?void 0:d[p])==null?void 0:h.fecha_yy)==null?void 0:F.message})),e(X,{name:`periodos.${p}.ingreso`,label:`Ingreso bruto ${Boolean(Number(n))===!0?"anual":"mensual"}`,size:"small",fullWidth:!0,error:!!((z=(O=o==null?void 0:o.periodos)==null?void 0:O[p])!=null&&z.ingreso),helperText:(W=(k=(P=o==null?void 0:o.periodos)==null?void 0:P[p])==null?void 0:k.ingreso)==null?void 0:W.message}),e(X,{name:`periodos.${p}.gasto`,label:`Gasto bruto ${Boolean(Number(n))===!0?"anual":"mensual"}`,size:"small",fullWidth:!0,error:!!((I=(B=o==null?void 0:o.periodos)==null?void 0:B[p])!=null&&I.gasto),helperText:(U=(R=(V=o==null?void 0:o.periodos)==null?void 0:V[p])==null?void 0:R.gasto)==null?void 0:U.message})]},x.id)}),e(fe,{}),u(w,{spacing:1,direction:{xs:"column",md:"row"},justifyContent:"center",children:[e(j,{variant:"contained",onClick:()=>c({ingreso:"",fecha_yy:"",gasto:"0"}),children:"Agregar"}),m.length!==1&&e(j,{variant:"contained",color:"error",onClick:()=>a(m.length-1),children:"Remover"})]})]}),(o==null?void 0:o.periodos)&&e(le,{className:L.helper,error:!0,children:(l=o==null?void 0:o.periodos)==null?void 0:l.message})]})},xe="_container_10uy9_1",_e="_negocio_10uy9_7",be="_containter_10uy9_23",ve="_legend_10uy9_23",ye="_flexNowrap_10uy9_28",we="_active_10uy9_39",Ce="_flexColumn_10uy9_47",Te="_flexRowBetween_10uy9_54";var E={container:xe,negocio:_e,containter:be,legend:ve,flexNowrap:ye,active:we,flexColumn:Ce,flexRowBetween:Te};const Ne=()=>{var c;const{control:t,setValue:r,formState:i}=v(),{errors:o}=i,m=C({control:t,name:"negocios"}),a=C({control:t,name:"cliente"});return e(N,{children:e(S,{ref:null,inputProps:{label:"Negocios",placeholder:"Buscar...",error:!!(o!=null&&o.negocios),helperText:(c=o==null?void 0:o.negocios)==null?void 0:c.message},disableStyle:!0,enableFirst:!0,size:"small",value:m,fullWidth:!0,multiple:!0,onChange:(n,l)=>r("negocios",l,{shouldValidate:!0}),isOptionEqualToValue:(n,l)=>n.id===l.id,urlFetch:"/admin/certificaciones-ingresos/negocios",params:{id_cliente:a==null?void 0:a.id},getOptionLabel:n=>`${n.tipo||""} ${n.nombre_negocio||""}`.trim(),renderOption:(n,l,{selected:x})=>T.exports.createElement("li",_(f({},n),{className:`${E.flexNowrap} ${x?E.active:""}`,key:`${l.id}-${l.ruc}`}),e(A,{icon:e($,{}),checkedIcon:e(D,{}),checked:x,size:"small"}),u("div",{className:E.flexColumn,children:[u(b,{variant:"body1",fontWeight:"bold",component:"span",children:[l.tipo," ",l.nombre_negocio]}),u("div",{className:E.flexRowBetween,children:[l.ruc&&l.ruc!==""&&e(b,{variant:"caption",component:"span",children:l.ruc}),l.ruta&&l.ruta!==""&&e(b,{variant:"caption",component:"span",children:l.ruta})]})]}))})})},Ae=({i:t})=>{var l,x,p,g,s;const{setValue:r,formState:i}=v(),{errors:o}=i,m=T.exports.useContext(q),{distrito:a,corregimiento:c,setCorregimiento:n}=m;return e(N,{children:e(S,{ref:null,inputProps:{label:"Corregimiento",error:!!((x=(l=o==null?void 0:o.negocios)==null?void 0:l[t])!=null&&x.corregimiento),helperText:(s=(g=(p=o==null?void 0:o.negocios)==null?void 0:p[t])==null?void 0:g.corregimiento)==null?void 0:s.message},disableStyle:!0,params:{id_distrito:a?a.id:""},value:c,enableFirst:!0,fullWidth:!0,size:"small",onChange:(d,h)=>{n(h),h?r(`negocios.${t}.corregimiento`,h.corregimiento):r(`negocios.${t}.corregimiento`,"")},isOptionEqualToValue:(d,h)=>d.id===h.id,urlFetch:"/corregimientos",getOptionLabel:d=>d.corregimiento,renderOption:(d,h,{selected:F})=>T.exports.createElement("li",_(f({},d),{key:h.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(A,{icon:e($,{}),checkedIcon:e(D,{}),checked:F,size:"small"}),u("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase",padding:0,margin:0},children:[e(b,{variant:"body1",fontWeight:"bold",p:0,m:0,children:h.corregimiento}),u(b,{variant:"caption",p:0,m:0,children:[h.distrito," - ",h.provincia]})]}))})})},Fe=({i:t})=>{var n,l,x,p,g;const{setValue:r,formState:i}=v(),{errors:o}=i,{provincia:m,distrito:a,setDistrito:c}=T.exports.useContext(q);return e(N,{children:e(S,{ref:null,inputProps:{label:"Distrito",error:!!((l=(n=o==null?void 0:o.negocios)==null?void 0:n[t])!=null&&l.distrito),helperText:(g=(p=(x=o==null?void 0:o.negocios)==null?void 0:x[t])==null?void 0:p.distrito)==null?void 0:g.message},disableStyle:!0,params:{id_provincia:m?m.id:""},value:a,enableFirst:!0,fullWidth:!0,size:"small",onChange:(s,d)=>{c(d),d?r(`negocios.${t}.distrito`,d.distrito):r(`negocios.${t}.distrito`,"")},isOptionEqualToValue:(s,d)=>s.id===d.id,urlFetch:"/distritos",getOptionLabel:s=>s.distrito,renderOption:(s,d,{selected:h})=>T.exports.createElement("li",_(f({},s),{key:d.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(A,{icon:e($,{}),checkedIcon:e(D,{}),checked:h,size:"small"}),u("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase",padding:0,margin:0},children:[e(b,{variant:"body1",fontWeight:"bold",p:0,m:0,children:d.distrito}),e(b,{variant:"caption",p:0,m:0,children:d.provincia})]}))})})},Ee=({i:t})=>{var c,n,l,x,p;const{setValue:r,formState:i}=v(),{errors:o}=i,{provincia:m,setProvincia:a}=T.exports.useContext(q);return e(N,{children:e(S,{ref:null,inputProps:{label:"Provincia",error:!!((n=(c=o==null?void 0:o.negocios)==null?void 0:c[t])!=null&&n.provincia),helperText:(p=(x=(l=o==null?void 0:o.negocios)==null?void 0:l[t])==null?void 0:x.provincia)==null?void 0:p.message},disableStyle:!0,enableFirst:!0,value:m,fullWidth:!0,size:"small",onChange:(g,s)=>{a(s),s?r(`negocios.${t}.provincia`,s.provincia):r(`negocios.${t}.provincia`,"")},isOptionEqualToValue:(g,s)=>g.id===s.id,urlFetch:"/provincias",getOptionLabel:g=>g.provincia,renderOption:(g,s,{selected:d})=>T.exports.createElement("li",_(f({},g),{key:s.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(A,{icon:e($,{}),checkedIcon:e(D,{}),checked:d,size:"small"}),e("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:e(b,{variant:"body1",fontWeight:"bold",children:s.provincia})}))})})},ke=({show:t,children:r})=>e(ce,{in:t,timeout:500,children:r}),oo=()=>{const t=v(),{control:r,register:i,setValue:o,formState:m}=t,{errors:a}=m,c=C({control:r,name:"negocios"});return e(ke,{show:!0,children:u(w,{className:E.container,direction:"column",spacing:1,children:[e(b,{variant:"h5",children:"Negocios"}),e(M,{}),e(Ne,{}),e(M,{}),c==null?void 0:c.map((n,l)=>{var x,p,g,s,d,h,F,O,z,P;return e(re,{provincia:n.provincia?{id:0,provincia:n.provincia}:null,distrito:n.distrito?{id:0,distrito:n.distrito,id_provincia:0,provincia:""}:null,corregimiento:n.corregimiento?{id:0,corregimiento:n.corregimiento,id_distrito:0,distrito:"",provincia:""}:null,children:u("fieldset",{className:E.negocio,children:[u("legend",{className:E.legend,children:[n.tipo," ",n.nombre_negocio]}),u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(y,_(f({label:"Actividad",size:"small",fullWidth:!0},i(`negocios.${l}.actividad`)),{error:!!((p=(x=a==null?void 0:a.negocios)==null?void 0:x[l])!=null&&p.actividad),helperText:(d=(s=(g=a==null?void 0:a.negocios)==null?void 0:g[l])==null?void 0:s.actividad)==null?void 0:d.message})),e(se,{label:"Fecha de aviso de operaci\xF3n",views:["day","month","year"],inputFormat:"dd/MM/yyyy",value:c[l].fecha_aviso_op,onChange:k=>{o(`negocios.${l}.fecha_aviso_op`,k,{shouldValidate:!0})},renderInput:k=>{var W,B,I,V,R;return e(y,_(f({size:"small",fullWidth:!0},k),{error:!!((B=(W=a==null?void 0:a.negocios)==null?void 0:W[l])!=null&&B.fecha_aviso_op),helperText:(R=(V=(I=a==null?void 0:a.negocios)==null?void 0:I[l])==null?void 0:V.fecha_aviso_op)==null?void 0:R.message}))}}),e(y,_(f({label:"Ubicaci\xF3n",size:"small",fullWidth:!0,inputProps:{maxLength:255}},i(`negocios.${l}.ubicacion`)),{error:!!((F=(h=a==null?void 0:a.negocios)==null?void 0:h[l])!=null&&F.ubicacion),helperText:(P=(z=(O=a==null?void 0:a.negocios)==null?void 0:O[l])==null?void 0:z.ubicacion)==null?void 0:P.message}))]}),u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(Ee,{i:l}),e(Fe,{i:l}),e(Ae,{i:l})]})]})},n.id)}),c.length>1&&e(j,{variant:"contained",color:"error",onClick:()=>{o("negocios",c.slice(0,c.length-1))},children:"Remover \xFAltimo"})]})})},Se="_container_13mm3_1",$e="_title_13mm3_10";var J={container:Se,title:$e};const io=()=>{const{register:t,setValue:r,control:i}=v(),o=C({control:i,name:"negocios"});return ae(()=>{(()=>{r("actividad",o.map(a=>a.actividad).join(", ")),r("text_negocio",o.map(a=>`${a.tipo||""} ${a.nombre_negocio||""}`.trim()).join(", "))})()},[o]),u("div",{className:J.container,children:[e("span",{className:J.title,children:"Casos especiales"}),e(M,{}),e(de,{variant:"outlined",severity:"warning",children:"Favor ingresar los negocios separados por coma(,)"}),e(y,f({label:"Negocios a mostrar en impresi\xF3n",size:"small",multiline:!0,minRows:3,InputLabelProps:{shrink:!0}},t("text_negocio"))),e(y,f({label:"Actividades a mostrar en impresi\xF3n",size:"small",multiline:!0,minRows:3,InputLabelProps:{shrink:!0}},t("actividad")))]})},to=()=>{const{control:t,setValue:r}=v(),i=C({control:t,name:"abrir_cuenta"});return e(N,{children:e(Q,{control:e(A,{checked:Boolean(Number(i))===!0,onChange:o=>r("abrir_cuenta",o.target.checked)}),label:"AGREGAR LINEA DE EXTENSI\xD3N DE TR\xC1MITE DE APERTURA DE CUENTA"})})};export{to as A,Ze as B,io as E,oo as N,Ye as P,eo as a};
