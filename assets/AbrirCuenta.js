var K=Object.defineProperty,Q=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var G=(n,c,o)=>c in n?K(n,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[c]=o,f=(n,c)=>{for(var o in c||(c={}))Z.call(c,o)&&G(n,o,c[o]);if(U)for(var o of U(c))ee.call(c,o)&&G(n,o,c[o]);return n},x=(n,c)=>Q(n,Y(c));import{S as ie}from"./SelectHookForm.js";import{T as y}from"./TextInput.js";import{u as v,e as E,j as oe}from"./array.js";import{j as u,a as e,F as N,r as C,as as te}from"./index.js";import{S as w}from"./Stack.js";import{P as J}from"./Paper.js";import{T as _}from"./Typography.js";import{A as D}from"./AutocompleteServer.js";import{d as $,a as z}from"./CheckBoxOutlineBlank.js";import{C as k}from"./Checkbox.js";import{D as H}from"./DecimalInput.js";import{D as j}from"./Divider.js";import{B as q}from"./Button.js";import{c as ne}from"./TextField.js";import{D as M,a as ae}from"./DireccionProvider.js";import{F as le}from"./Backdrop.js";import{D as ce}from"./DatePicker.js";import{A as re}from"./Alert.js";import{F as se}from"./FormControlLabel.js";const Ke=()=>{var i,p,a,r,t;const{register:n,formState:c}=v(),{errors:o}=c;return u(w,{spacing:1,direction:"column",component:J,padding:1,variant:"outlined",children:[e(_,{variant:"h5",children:"Datos del representante"}),u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(y,x(f({label:"Nombre",size:"small",fullWidth:!0},n("nombre_encargado")),{error:!!(o!=null&&o.nombre_encargado),helperText:(i=o==null?void 0:o.nombre_encargado)==null?void 0:i.message})),e(y,x(f({label:"Apellido",size:"small",fullWidth:!0},n("apellido_encargado")),{error:!!(o!=null&&o.apellido_encargado),helperText:(p=o==null?void 0:o.apellido_encargado)==null?void 0:p.message})),e(y,x(f({label:"C\xE9dula o pasaporte",size:"small",fullWidth:!0},n("identificacion_encargado")),{error:!!(o!=null&&o.identificacion_encargado),helperText:(a=o==null?void 0:o.identificacion_encargado)==null?void 0:a.message}))]}),u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(ie,{name:"genero",label:"G\xE9nero",options:["MASCULINO","FEMENINO"],size:"small",disableBox:!0,error:!!(o!=null&&o.genero),helperText:(r=o==null?void 0:o.genero)==null?void 0:r.message}),e(y,x(f({label:"Cargo",size:"small",fullWidth:!0},n("cargo_encargado")),{error:!!(o!=null&&o.cargo_encargado),helperText:(t=o==null?void 0:o.cargo_encargado)==null?void 0:t.message}))]})]})},de=()=>{var a;const{control:n,setValue:c,formState:o}=v(),{errors:i}=o,p=E({control:n,name:"banco"});return e(N,{children:e(D,{ref:null,inputProps:{label:"Banco",error:!!(i!=null&&i.banco),helperText:(a=i==null?void 0:i.banco)==null?void 0:a.message},disableStyle:!0,enableFirst:!0,value:p,size:"small",fullWidth:!0,onChange:(r,t)=>c("banco",t,{shouldValidate:!0}),isOptionEqualToValue:(r,t)=>r.id===t.id,urlFetch:"/admin/bancos",getOptionLabel:r=>r.nombre.toUpperCase(),renderOption:(r,t,{selected:l})=>C.exports.createElement("li",x(f({},r),{key:t.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(k,{icon:e($,{}),checkedIcon:e(z,{}),checked:l,size:"small"}),e("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:e(_,{variant:"body1",fontWeight:"bold",children:t.nombre})}))})})},me=()=>{var a;const{control:n,setValue:c,formState:o}=v(),{errors:i}=o,p=E({control:n,name:"cliente"});return e(N,{children:e(D,{ref:null,inputProps:{label:"Raz\xF3n social",error:!!(i!=null&&i.cliente),helperText:(a=i==null?void 0:i.cliente)==null?void 0:a.message},disableStyle:!0,enableFirst:!0,value:p,size:"small",fullWidth:!0,onChange:(r,t)=>{c("cliente",t,{shouldValidate:!0})},isOptionEqualToValue:(r,t)=>r.id===t.id,urlFetch:"/admin/clientes-autocomplete",getOptionLabel:r=>r.nom_cliente||"",renderOption:(r,t,{selected:l})=>C.exports.createElement("li",x(f({},r),{key:t.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(k,{icon:e($,{}),checkedIcon:e(z,{}),checked:l,size:"small"}),u("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:[t.nom_cliente&&t.nom_cliente!==""&&e(_,{variant:"body1",fontWeight:"bold",children:t.nom_cliente}),t.ruc&&t.ruc!==""&&e(_,{variant:"caption",fontWeight:"bold",children:t.ruc})]}))})})},Qe=()=>u(w,{spacing:1,padding:1,direction:"column",component:J,variant:"outlined",children:[e(_,{variant:"h5",children:"Datos del cliente y el banco"}),u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(me,{}),e(de,{})]})]}),pe="_container_1wyo1_1",ue="_periodos_1wyo1_2",ge="_errorBorder_1wyo1_14";var L={container:pe,periodos:ue,errorBorder:ge};const Ye=()=>{var t;const{control:n,register:c,formState:o}=v(),{errors:i}=o,{fields:p,remove:a,append:r}=oe({control:n,name:"periodos"});return u("div",{className:L.container,children:[u("div",{className:`${L.periodos} ${i.periodos?L.errorBorder:""}`,children:[e(_,{variant:"h5",children:"Per\xEDodos"}),e(j,{}),p.map((l,s)=>{var b,g,d,m,h,T,A,O,W,S,P,V,B,I,R;return u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(y,x(f({label:"Per\xEDodo(a\xF1o)",size:"small",fullWidth:!0,placeholder:"yyyy"},c(`periodos.${s}.fecha_yy`)),{error:!!((g=(b=i==null?void 0:i.periodos)==null?void 0:b[s])!=null&&g.fecha_yy),helperText:(h=(m=(d=i==null?void 0:i.periodos)==null?void 0:d[s])==null?void 0:m.fecha_yy)==null?void 0:h.message})),e(H,{name:`periodos.${s}.ingreso`,label:"Ingreso bruto mensual",size:"small",fullWidth:!0,error:!!((A=(T=i==null?void 0:i.periodos)==null?void 0:T[s])!=null&&A.ingreso),helperText:(S=(W=(O=i==null?void 0:i.periodos)==null?void 0:O[s])==null?void 0:W.ingreso)==null?void 0:S.message}),e(H,{name:`periodos.${s}.gasto`,label:"Gasto bruto mensual",size:"small",fullWidth:!0,error:!!((V=(P=i==null?void 0:i.periodos)==null?void 0:P[s])!=null&&V.gasto),helperText:(R=(I=(B=i==null?void 0:i.periodos)==null?void 0:B[s])==null?void 0:I.gasto)==null?void 0:R.message})]},l.id)}),u(w,{spacing:1,direction:{xs:"column",md:"row"},justifyContent:"center",children:[e(q,{variant:"contained",onClick:()=>r({ingreso:"",fecha_yy:"",gasto:"0"}),children:"Agregar"}),p.length!==1&&e(q,{variant:"contained",color:"error",onClick:()=>a(p.length-1),children:"Remover"})]})]}),(i==null?void 0:i.periodos)&&e(ne,{className:L.helper,error:!0,children:(t=i==null?void 0:i.periodos)==null?void 0:t.message})]})},he="_container_10uy9_1",fe="_negocio_10uy9_7",xe="_containter_10uy9_23",_e="_legend_10uy9_23",be="_flexNowrap_10uy9_28",ve="_active_10uy9_39",ye="_flexColumn_10uy9_47",we="_flexRowBetween_10uy9_54";var F={container:he,negocio:fe,containter:xe,legend:_e,flexNowrap:be,active:ve,flexColumn:ye,flexRowBetween:we};const Ce=()=>{var r;const{control:n,setValue:c,formState:o}=v(),{errors:i}=o,p=E({control:n,name:"negocios"}),a=E({control:n,name:"cliente"});return e(N,{children:e(D,{ref:null,inputProps:{label:"Negocios",placeholder:"Buscar...",error:!!(i!=null&&i.negocios),helperText:(r=i==null?void 0:i.negocios)==null?void 0:r.message},disableStyle:!0,enableFirst:!0,size:"small",value:p,fullWidth:!0,multiple:!0,onChange:(t,l)=>c("negocios",l,{shouldValidate:!0}),isOptionEqualToValue:(t,l)=>t.id===l.id,urlFetch:"/admin/certificaciones-ingresos/negocios",params:{id_cliente:a==null?void 0:a.id},getOptionLabel:t=>`${t.tipo||""} ${t.nombre_negocio||""}`.trim(),renderOption:(t,l,{selected:s})=>C.exports.createElement("li",x(f({},t),{className:`${F.flexNowrap} ${s?F.active:""}`,key:`${l.id}-${l.ruc}`}),e(k,{icon:e($,{}),checkedIcon:e(z,{}),checked:s,size:"small"}),u("div",{className:F.flexColumn,children:[u(_,{variant:"body1",fontWeight:"bold",component:"span",children:[l.tipo," ",l.nombre_negocio]}),u("div",{className:F.flexRowBetween,children:[l.ruc&&l.ruc!==""&&e(_,{variant:"caption",component:"span",children:l.ruc}),l.ruta&&l.ruta!==""&&e(_,{variant:"caption",component:"span",children:l.ruta})]})]}))})})},Te=({i:n})=>{var l,s,b,g,d;const{setValue:c,formState:o}=v(),{errors:i}=o,p=C.exports.useContext(M),{distrito:a,corregimiento:r,setCorregimiento:t}=p;return e(N,{children:e(D,{ref:null,inputProps:{label:"Corregimiento",error:!!((s=(l=i==null?void 0:i.negocios)==null?void 0:l[n])!=null&&s.corregimiento),helperText:(d=(g=(b=i==null?void 0:i.negocios)==null?void 0:b[n])==null?void 0:g.corregimiento)==null?void 0:d.message},disableStyle:!0,params:{id_distrito:a?a.id:""},value:r,enableFirst:!0,fullWidth:!0,size:"small",onChange:(m,h)=>{t(h),h?c(`negocios.${n}.corregimiento`,h.corregimiento):c(`negocios.${n}.corregimiento`,"")},isOptionEqualToValue:(m,h)=>m.id===h.id,urlFetch:"/corregimientos",getOptionLabel:m=>m.corregimiento,renderOption:(m,h,{selected:T})=>C.exports.createElement("li",x(f({},m),{key:h.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(k,{icon:e($,{}),checkedIcon:e(z,{}),checked:T,size:"small"}),u("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase",padding:0,margin:0},children:[e(_,{variant:"body1",fontWeight:"bold",p:0,m:0,children:h.corregimiento}),u(_,{variant:"caption",p:0,m:0,children:[h.distrito," - ",h.provincia]})]}))})})},Fe=({i:n})=>{var t,l,s,b,g;const{setValue:c,formState:o}=v(),{errors:i}=o,{provincia:p,distrito:a,setDistrito:r}=C.exports.useContext(M);return e(N,{children:e(D,{ref:null,inputProps:{label:"Distrito",error:!!((l=(t=i==null?void 0:i.negocios)==null?void 0:t[n])!=null&&l.distrito),helperText:(g=(b=(s=i==null?void 0:i.negocios)==null?void 0:s[n])==null?void 0:b.distrito)==null?void 0:g.message},disableStyle:!0,params:{id_provincia:p?p.id:""},value:a,enableFirst:!0,fullWidth:!0,size:"small",onChange:(d,m)=>{r(m),m?c(`negocios.${n}.distrito`,m.distrito):c(`negocios.${n}.distrito`,"")},isOptionEqualToValue:(d,m)=>d.id===m.id,urlFetch:"/distritos",getOptionLabel:d=>d.distrito,renderOption:(d,m,{selected:h})=>C.exports.createElement("li",x(f({},d),{key:m.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(k,{icon:e($,{}),checkedIcon:e(z,{}),checked:h,size:"small"}),u("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase",padding:0,margin:0},children:[e(_,{variant:"body1",fontWeight:"bold",p:0,m:0,children:m.distrito}),e(_,{variant:"caption",p:0,m:0,children:m.provincia})]}))})})},Ee=({i:n})=>{var r,t,l,s,b;const{setValue:c,formState:o}=v(),{errors:i}=o,{provincia:p,setProvincia:a}=C.exports.useContext(M);return e(N,{children:e(D,{ref:null,inputProps:{label:"Provincia",error:!!((t=(r=i==null?void 0:i.negocios)==null?void 0:r[n])!=null&&t.provincia),helperText:(b=(s=(l=i==null?void 0:i.negocios)==null?void 0:l[n])==null?void 0:s.provincia)==null?void 0:b.message},disableStyle:!0,enableFirst:!0,value:p,fullWidth:!0,size:"small",onChange:(g,d)=>{a(d),d?c(`negocios.${n}.provincia`,d.provincia):c(`negocios.${n}.provincia`,"")},isOptionEqualToValue:(g,d)=>g.id===d.id,urlFetch:"/provincias",getOptionLabel:g=>g.provincia,renderOption:(g,d,{selected:m})=>C.exports.createElement("li",x(f({},g),{key:d.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(k,{icon:e($,{}),checkedIcon:e(z,{}),checked:m,size:"small"}),e("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:e(_,{variant:"body1",fontWeight:"bold",children:d.provincia})}))})})},Ne=({show:n,children:c})=>e(le,{in:n,timeout:500,children:c}),Ze=()=>{const n=v(),{control:c,register:o,setValue:i,formState:p}=n,{errors:a}=p,r=E({control:c,name:"negocios"});return e(Ne,{show:!0,children:u(w,{className:F.container,direction:"column",spacing:1,children:[e(_,{variant:"h5",children:"Negocios"}),e(j,{}),e(Ce,{}),e(j,{}),r==null?void 0:r.map((t,l)=>{var s,b,g,d,m,h,T,A,O,W;return e(ae,{provincia:t.provincia?{id:0,provincia:t.provincia}:null,distrito:t.distrito?{id:0,distrito:t.distrito,id_provincia:0,provincia:""}:null,corregimiento:t.corregimiento?{id:0,corregimiento:t.corregimiento,id_distrito:0,distrito:"",provincia:""}:null,children:u("fieldset",{className:F.negocio,children:[u("legend",{className:F.legend,children:[t.tipo," ",t.nombre_negocio]}),u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(y,x(f({label:"Actividad",size:"small",fullWidth:!0},o(`negocios.${l}.actividad`)),{error:!!((b=(s=a==null?void 0:a.negocios)==null?void 0:s[l])!=null&&b.actividad),helperText:(m=(d=(g=a==null?void 0:a.negocios)==null?void 0:g[l])==null?void 0:d.actividad)==null?void 0:m.message})),e(ce,{label:"Fecha de aviso de operaci\xF3n",views:["day","month","year"],inputFormat:"dd/MM/yyyy",value:r[l].fecha_aviso_op,onChange:S=>{i(`negocios.${l}.fecha_aviso_op`,S,{shouldValidate:!0})},renderInput:S=>{var P,V,B,I,R;return e(y,x(f({size:"small",fullWidth:!0},S),{error:!!((V=(P=a==null?void 0:a.negocios)==null?void 0:P[l])!=null&&V.fecha_aviso_op),helperText:(R=(I=(B=a==null?void 0:a.negocios)==null?void 0:B[l])==null?void 0:I.fecha_aviso_op)==null?void 0:R.message}))}}),e(y,x(f({label:"Ubicaci\xF3n",size:"small",fullWidth:!0,inputProps:{maxLength:255}},o(`negocios.${l}.ubicacion`)),{error:!!((T=(h=a==null?void 0:a.negocios)==null?void 0:h[l])!=null&&T.ubicacion),helperText:(W=(O=(A=a==null?void 0:a.negocios)==null?void 0:A[l])==null?void 0:O.ubicacion)==null?void 0:W.message}))]}),u(w,{spacing:1,direction:{xs:"column",md:"row"},children:[e(Ee,{i:l}),e(Fe,{i:l}),e(Te,{i:l})]})]})},t.id)}),r.length>1&&e(q,{variant:"contained",color:"error",onClick:()=>{i("negocios",r.slice(0,r.length-1))},children:"Remover \xFAltimo"})]})})},ke="_container_13mm3_1",Se="_title_13mm3_10";var X={container:ke,title:Se};const ei=()=>{const{register:n,setValue:c,control:o}=v(),i=E({control:o,name:"negocios"});return te(()=>{(()=>{c("actividad",i.map(a=>a.actividad).join(", ")),c("text_negocio",i.map(a=>`${a.tipo||""} ${a.nombre_negocio||""}`.trim()).join(", "))})()},[i]),u("div",{className:X.container,children:[e("span",{className:X.title,children:"Casos especiales"}),e(j,{}),e(re,{variant:"outlined",severity:"warning",children:"Favor ingresar los negocios separados por coma(,)"}),e(y,f({label:"Negocios a mostrar en impresi\xF3n",size:"small",multiline:!0,minRows:3,InputLabelProps:{shrink:!0}},n("text_negocio"))),e(y,f({label:"Actividades a mostrar en impresi\xF3n",size:"small",multiline:!0,minRows:3,InputLabelProps:{shrink:!0}},n("actividad")))]})},ii=()=>{const{control:n,setValue:c}=v(),o=E({control:n,name:"abrir_cuenta"});return e(N,{children:e(se,{control:e(k,{checked:Boolean(Number(o))===!0,onChange:i=>c("abrir_cuenta",i.target.checked)}),label:"AGREGAR LINEA DE EXTENSI\xD3N DE TR\xC1MITE DE APERTURA DE CUENTA"})})};export{ii as A,Qe as B,ei as E,Ze as N,Ke as P,Ye as a};
