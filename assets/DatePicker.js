import{s as b,_ as p,r as c,y as R,k as w,a as f,j as g,q as j,M as y,u as B,a2 as K}from"./index.js";import{u as O,D as V,M as W}from"./MobileDatePicker.js";import{W as q,u as z,p as Q}from"./CalendarPicker.js";import{P as G}from"./Popper.js";import{P as H}from"./Paper.js";import{b as X}from"./ModalTransition.js";import{T as $}from"./Modal2.js";import{B as Y}from"./Button.js";import{G as J}from"./Grow.js";import{u as N,K as U,C as Z}from"./PureDateInput.js";const ee=["onClick","onTouchStart"],te=b(G)(({theme:t})=>({zIndex:t.zIndex.modal})),oe=b(H)(({ownerState:t})=>p({transformOrigin:"top center",outline:0},t.placement==="top"&&{transformOrigin:"bottom center"})),re=b(X)(({ownerState:t})=>p({},t.clearable?{justifyContent:"flex-start","& > *:first-of-type":{marginRight:"auto"}}:{padding:0}));function ne(t,s){return s.documentElement.clientWidth<t.clientX||s.documentElement.clientHeight<t.clientY}function se(t,s){const n=c.exports.useRef(!1),o=c.exports.useRef(!1),r=c.exports.useRef(null),l=c.exports.useRef(!1);c.exports.useEffect(()=>{if(!t)return;function e(){l.current=!0}return document.addEventListener("mousedown",e,!0),document.addEventListener("touchstart",e,!0),()=>{document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchstart",e,!0),l.current=!1}},[t]);const a=j(e=>{if(!l.current)return;const u=o.current;o.current=!1;const i=y(r.current);if(!r.current||"clientX"in e&&ne(e,i))return;if(n.current){n.current=!1;return}let d;e.composedPath?d=e.composedPath().indexOf(r.current)>-1:d=!i.documentElement.contains(e.target)||r.current.contains(e.target),!d&&!u&&s(e)}),P=()=>{o.current=!0};return c.exports.useEffect(()=>{if(t){const e=y(r.current),u=()=>{n.current=!0};return e.addEventListener("touchstart",a),e.addEventListener("touchmove",u),()=>{e.removeEventListener("touchstart",a),e.removeEventListener("touchmove",u)}}},[t,a]),c.exports.useEffect(()=>{if(t){const e=y(r.current);return e.addEventListener("click",a),()=>{e.removeEventListener("click",a),o.current=!1}}},[t,a]),[r,P,P]}const ae=t=>{const{anchorEl:s,children:n,containerRef:o=null,onClose:r,onClear:l,clearable:a=!1,clearText:P="Clear",open:e,PopperProps:u,role:i,TransitionComponent:d=J,TrapFocusProps:m,PaperProps:k={}}=t;c.exports.useEffect(()=>{function C(D){(D.key==="Escape"||D.key==="Esc")&&r()}return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[r]);const h=c.exports.useRef(null);c.exports.useEffect(()=>{i!=="tooltip"&&(e?h.current=document.activeElement:h.current&&h.current instanceof HTMLElement&&h.current.focus())},[e,i]);const[x,M,I]=se(e,r),S=c.exports.useRef(null),A=R(S,o),F=R(A,x),E=t,{onClick:v,onTouchStart:L}=k,_=w(k,ee);return f(te,p({transition:!0,role:i,open:e,anchorEl:s,ownerState:E},u,{children:({TransitionProps:C,placement:D})=>f($,p({open:e,disableAutoFocus:!0,disableEnforceFocus:i==="tooltip",isEnabled:()=>!0},m,{children:f(d,p({},C,{children:g(oe,p({tabIndex:-1,elevation:8,ref:F,onClick:T=>{M(T),v&&v(T)},onTouchStart:T=>{I(T),L&&L(T)},ownerState:p({},E,{placement:D})},_,{children:[n,f(re,{ownerState:E,children:a&&f(Y,{onClick:l,children:P})})]}))}))}))}))};function ce(t){const{children:s,DateInputProps:n,KeyboardDateInputComponent:o,onDismiss:r,open:l,PopperProps:a,PaperProps:P,TransitionComponent:e,onClear:u,clearText:i,clearable:d}=t,m=c.exports.useRef(null),k=R(n.inputRef,m);return g(q.Provider,{value:"desktop",children:[f(o,p({},n,{inputRef:k})),f(ae,{role:"dialog",open:l,anchorEl:m.current,TransitionComponent:e,PopperProps:a,PaperProps:P,onClose:r,onClear:u,clearText:i,clearable:d,children:s})]})}const ie=["onChange","PopperProps","PaperProps","ToolbarComponent","TransitionComponent","value","clearText","clearable"],pe={emptyValue:null,parseInput:Q,areValuesEqual:(t,s,n)=>t.isEqual(s,n)},ue=c.exports.forwardRef(function(s,n){const o=O(s,"MuiDesktopDatePicker"),r=z(o)!==null,{pickerProps:l,inputProps:a,wrapperProps:P}=N(o,pe),{PopperProps:e,PaperProps:u,ToolbarComponent:i=V,TransitionComponent:d,clearText:m,clearable:k}=o,h=w(o,ie),x=p({},a,h,{ref:n,validationError:r});return f(ce,p({},P,{DateInputProps:x,KeyboardDateInputComponent:U,PopperProps:e,PaperProps:u,TransitionComponent:d,clearText:m,clearable:k,children:f(Z,p({},l,{autoFocus:!0,toolbarTitle:o.label||o.toolbarTitle,ToolbarComponent:i,DateInputProps:x},h))}))}),le=["cancelText","desktopModeMediaQuery","DialogProps","okText","PopperProps","showTodayButton","todayText","TransitionComponent"],Ee=c.exports.forwardRef(function(s,n){const o=B({props:s,name:"MuiDatePicker"}),{cancelText:r,desktopModeMediaQuery:l="@media (pointer: fine)",DialogProps:a,okText:P,PopperProps:e,showTodayButton:u,todayText:i,TransitionComponent:d}=o,m=w(o,le);return K(l)?f(ue,p({ref:n,PopperProps:e,TransitionComponent:d},m)):f(W,p({ref:n,cancelText:r,DialogProps:a,okText:P,showTodayButton:u,todayText:i},m))});export{Ee as D};
