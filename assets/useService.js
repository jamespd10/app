import{r as x,A as S}from"./index.js";import{A as f,O as h,B as o}from"./constants.js";const O=()=>{const{authState:n}=x.exports.useContext(S);return async(r,{method:c,data:u,params:i,signal:t,isBlob:l})=>{const{token:d}=n,s=new URLSearchParams(i).toString(),m=s?o+r+"?"+s:o+r;try{const e=await fetch(m,{method:c,credentials:"include",mode:"cors",body:JSON.stringify(u),headers:new Headers({"Content-Type":"application/json","x-api-key":f,"x-token":d||"","Access-Control-Allow-Origin":h}),signal:t});if(e.ok&&e.status===201)return{data:l?await e.blob():await e.json(),error:null};if(e.status===200)return{data:null,error:{status:e.status,message:"Sin mensaje de error"}};{const a=await e.text(),p=JSON.parse(a);return{data:null,error:{status:e.status,message:p.message}}}}catch{return t!=null&&t.aborted?{data:null,error:{status:-1,message:"Se cancel\xF3 el env\xEDo de la solicitud"}}:{data:null,error:{status:-1,message:"Ocurri\xF3 un error inesperado"}}}}};export{O as u};
