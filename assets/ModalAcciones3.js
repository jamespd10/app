var k=Object.defineProperty,D=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var L=(o,e,i)=>e in o?k(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i,p=(o,e)=>{for(var i in e||(e={}))q.call(e,i)&&L(o,i,e[i]);if(M)for(var i of M(e))A.call(e,i)&&L(o,i,e[i]);return o},u=(o,e)=>D(o,j(e));import{r as a,aw as C,b as T,j as y,F as w,a as n}from"./index.js";import{L as P}from"./index24.js";import{a as R}from"./FormLiquidacionProvider.js";import{D as z}from"./DialogActions.js";import{L as b}from"./LoadingButton.js";import"./HeaderTitle.js";import"./Typography.js";import"./Divider.js";import"./Loader.js";import"./Grid.js";import"./CircularProgress.js";import"./emotion-react.browser.esm.js";import"./useForm.js";import"./object.helper.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./usePrint.js";import"./index23.js";import"./Button.js";import"./ButtonBase.js";import"./useIsFocusVisible.js";import"./useControlled.js";const E=()=>{const{pagination:o}=a.exports.useContext(P),{fetcher:e}=o,[,,i,,t]=e,{form:d,fetcher:h,negocio:r,printer:s}=a.exports.useContext(R),[,f]=h,{onFormSubmit:m}=d,[c,_]=s;return{onFormSubmit:m,handleSubmit:(l,x)=>{f("/admin/liquidaciones",{method:"POST",data:u(p({},l),{fecha_enviado:x})}).then(v=>{if(v.data){const F=(i==null?void 0:i.resultados)||[];F.unshift(u(p({},l),{id:v.data.id,tipo:(r==null?void 0:r.tipo)||"",nombre_negocio:(r==null?void 0:r.nombre_negocio)||"",fecha_creacion:C(new Date,"yyyy-MM-dd hh:mm:ss"),id_cliente:(r==null?void 0:r.id_cliente)||0,nom_cliente:(r==null?void 0:r.nom_cliente)||"",ruc:(r==null?void 0:r.ruc)||"",ruta:(r==null?void 0:r.ruta)||"",fecha_enviado:x?C(new Date,"yyyy-MM-dd hh:mm:ss"):null})),t({paginas:(i==null?void 0:i.paginas)||1,resultados:F}),x&&_()}})},divRef:c}},G=a.exports.lazy(()=>T(()=>import("./index68.js"),["assets/index68.js","assets/index.js","assets/index6.css","assets/ViewProvider.js","assets/view.module.js","assets/view.module.css"])),mt=()=>{const{modalRealizar:o}=a.exports.useContext(P),{fetcher:e,form:i,negocio:t}=a.exports.useContext(R),{onFormSubmit:d,formState:h,onResetForm:r}=i,[s,,f,,,m]=e,{handleSubmit:c,divRef:_}=E(),[,S]=o;return y(w,{children:[y(z,{children:[n(b,{variant:"outlined",color:"inherit",disabled:s,onClick:()=>{S(!1),m(),r()},children:"Cerrar"}),!f&&y(w,{children:[n(b,{variant:"outlined",color:"primary",loading:s,onClick:()=>{m(),d(c)},children:"Guardar"}),n(b,{variant:"outlined",color:"error",loading:s,onClick:()=>{m(),d(l=>c(l,C(new Date,"yyyy-MM-dd hh:mm:ss")))},children:"Guardar e imprimir"})]})]}),n(a.exports.Suspense,{fallback:n("div",{}),children:n(G,{list:[u(p({},h),{tipo:(t==null?void 0:t.tipo)||"",nombre_negocio:(t==null?void 0:t.nombre_negocio)||"",fecha_creacion:"",id_cliente:(t==null?void 0:t.id_cliente)||0,nom_cliente:(t==null?void 0:t.nom_cliente)||"",ruc:(t==null?void 0:t.ruc)||"",ruta:(t==null?void 0:t.ruta)||"",fecha_enviado:""})],divRef:_})})]})};export{mt as default};
