import{r as e}from"./index.js";import{u as g}from"./useService.js";const F=(p,d)=>{const{method:i,data:x,params:f}=d||{},h=g(),o=e.exports.useMemo(()=>new AbortController,[]),m=e.exports.useMemo(()=>o.signal,[o]),[b,S]=e.exports.useState(0),[l,t]=e.exports.useState(null),[c,a]=e.exports.useState(null),y=e.exports.useCallback(()=>{t(null),a(null),S(s=>s+1)},[l,c]),C=e.exports.useCallback(s=>{t(()=>s)},[]),u=e.exports.useCallback(()=>{n(()=>!1),t(()=>null),a(()=>null)},[]),[R,n]=e.exports.useState(!1);return e.exports.useEffect(()=>((()=>{n(()=>!0),h(p,{method:i,data:x,params:f,signal:m}).then(r=>{r.data?t(r.data):r.error&&a(r.error)}).finally(()=>n(()=>!1))})(),()=>{o.abort(),u()}),[b]),[R,l,c,y,C,u]};export{F as u};
