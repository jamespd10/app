var _=Object.defineProperty,O=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var I=(o,t,n)=>t in o?_(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,d=(o,t)=>{for(var n in t||(t={}))B.call(t,n)&&I(o,n,t[n]);if(N)for(var n of N(t))A.call(t,n)&&I(o,n,t[n]);return o},h=(o,t)=>O(o,P(t));import{r as m,aA as g,a as e,j as c,F as y,ax as F}from"./index.js";import{u as k,S as D,d as $}from"./FilterList.js";import{s as p}from"./ModalNotasContent.js";import{d as z}from"./Search.js";import{T as v}from"./TextInput.js";import{d as E,a as w}from"./CheckBoxOutlineBlank.js";import{A as L}from"./AutocompleteServer.js";import{C as W}from"./Checkbox.js";import{T as C}from"./Typography.js";import{P as j}from"./TextField.js";import{D as b}from"./DatePicker.js";import{B as S}from"./Button.js";import{B as q}from"./BootstrapTooltip.js";import{B as R}from"./Box.js";import{I as T}from"./InputAdornment.js";import{I as H}from"./IconButton.js";import{P as Q}from"./Pagination.js";import{C as U}from"./ErrorIcon.js";import{d as V}from"./string.helper.js";import{L as G}from"./LinearProgress.js";import"./MenuItem.js";import"./List.js";import"./ButtonBase.js";import"./useIsFocusVisible.js";import"./listItemIconClasses.js";import"./Divider.js";import"./listItemTextClasses.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useControlled.js";import"./Loader.js";import"./Grid.js";import"./Navbar.js";import"./ContentProvider.js";import"./useModal.js";import"./App.module.js";import"./Add.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./Close.js";import"./Popper.js";import"./Portal.js";import"./Paper.js";import"./Chip.js";import"./FormHelperText.js";import"./react-is.production.min.js";import"./Modal2.js";import"./Backdrop.js";import"./isHostComponent.js";import"./Grow.js";import"./GlobalStyles.js";import"./MobileDatePicker.js";import"./MonthPicker.js";import"./usePickerState.js";import"./ModalTransition.js";import"./DialogContent.js";import"./index7.js";import"./Tooltip.js";import"./appendOwnerState.js";import"./StyledGridOverlay.js";import"./regex.js";const x=m.exports.createContext({}),J=({children:o})=>{const t=k(),{pagination:n}=m.exports.useContext(g),{params:r}=n,[i,s]=m.exports.useState({mes:(r==null?void 0:r.mes)||null,fecha:(r==null?void 0:r.fecha)||null,negocio:(r==null?void 0:r.negocio)||null,tipo:(r==null?void 0:r.tipo)||null});return e(x.Provider,{value:{menu:t,filtros:i,setFiltros:l=>s(l)},children:o})},K="_menu_19nmr_1",X="_item_19nmr_8",Y="_action_19nmr_15";var f={menu:K,item:X,action:Y};const Z=()=>{const{filtros:o,setFiltros:t}=m.exports.useContext(x);return e(D,{label:"Tipo de nota",disableBox:!0,value:(o==null?void 0:o.tipo)||"",onChange:n=>t(h(d({},o),{tipo:n.target.value})),values:["CONTRATO","DECIMO","F03","ITBMS","LIQUIDACION","SIPE"],options:["CONTRATO","DECIMO","F03","ITBMS","LIQUIDACION","SIPE"],size:"small"})},ee=()=>{var n;const{filtros:o,setFiltros:t}=m.exports.useContext(x);return e(L,{ref:null,fullWidth:!0,inputProps:{label:"Negocio",margin:"dense",fullWidth:!0},disableStyle:!0,value:(n=o==null?void 0:o.negocio)!=null?n:null,onChange:(r,i)=>t(h(d({},o),{negocio:i})),isOptionEqualToValue:(r,i)=>r.id===i.id,urlFetch:"/admin/negocios/autocomplete",size:"small",getOptionLabel:r=>`${r.tipo||""} ${r.nombre_negocio||""} - ${r.id}`,renderOption:(r,i,{selected:s})=>c("li",h(d({},r),{style:{textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e(W,{icon:e(E,{}),checkedIcon:e(w,{}),checked:s,size:"small"}),c("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:[c(C,{variant:"body1",fontWeight:"bold",children:[i.tipo," ",i.nombre_negocio]}),i.ruc&&i.ruc!==""?e(C,{variant:"body2",children:i.ruc}):e(y,{}),i.ruta&&i.ruta!==""?c(C,{variant:"body2",children:["RUTA: ",i.ruta]}):e(y,{})]})]}))})},te=()=>{const{menu:o,filtros:t,setFiltros:n}=m.exports.useContext(x),{pagination:r}=m.exports.useContext(g),{setParams:i}=r,{anchorEl:s,handleClose:l,open:u}=o;return e(j,{open:u,anchorEl:s,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:c("div",{className:f.menu,children:[e("div",{className:f.item,children:e(b,{label:"Mes de la nota",views:["month","year"],inputFormat:"MM/yyyy",value:t.mes,onChange:a=>n(h(d({},t),{mes:a})),renderInput:a=>e(v,d({size:"small",fullWidth:!0},a))})}),e("div",{className:f.item,children:e(b,{label:"Fecha de creaci\xF3n",value:t.fecha,inputFormat:"dd/MM/yyyy",onChange:a=>n(h(d({},t),{fecha:a})),renderInput:a=>e(v,d({size:"small",fullWidth:!0},a))})}),e("div",{className:f.item,children:e(Z,{})}),e("div",{className:f.item,children:e(ee,{})}),c("div",{className:f.action,children:[e(S,{variant:"outlined",color:"inherit",onClick:()=>l(),children:"Cerrar"}),e(S,{variant:"outlined",color:"primary",onClick:()=>{i(t),l()},children:"Filtrar"})]})]})})},oe=()=>{const{menu:o}=m.exports.useContext(x),{pagination:t}=m.exports.useContext(g),{search:n,sendSearch:r}=t,{handleClick:i}=o,[s,l]=m.exports.useState(n),u=a=>{a.preventDefault();const M=Object.fromEntries(new FormData(a.currentTarget));r(M.q)};return c("form",{className:p.searchInput,onSubmit:u,children:[e(v,{variant:"standard",type:"text",name:"q",value:s,placeholder:"Buscar...",fullWidth:!0,size:"small",onChange:a=>l(a.target.value),InputProps:{endAdornment:c(R,{display:"flex",alignItems:"center",children:[e(T,{position:"end",children:e(z,{})}),e(T,{position:"end",children:e(q,{title:"Filtros",placement:"top",children:e(H,{size:"small",onClick:i,children:e($,{})})})})]})}}),e(te,{})]})},re=()=>{const{pagination:o}=m.exports.useContext(g),{fetcher:t,page:n,setPage:r}=o,[,,i]=t;return!i||i&&!i.paginas?e(y,{}):e("div",{className:p.pagination,children:e(Q,{color:"primary",count:i==null?void 0:i.paginas,page:n,onChange:(s,l)=>r(l)})})},ut=()=>{var u;const{pagination:o,nota:t,setNota:n}=m.exports.useContext(g),{fetcher:r}=o,[i,,s,l]=r;return c("div",{className:p.sidebar,children:[c("div",{children:[e(J,{children:e(oe,{})}),i&&e(G,{}),l&&e(U,{label:l.message}),e("ul",{children:(u=s==null?void 0:s.resultados)==null?void 0:u.map(a=>c(C,{component:"li",className:`${p.element} ${(t==null?void 0:t.id)===a.id&&p.active}`,onClick:()=>n(a),children:[e("span",{className:p.title,children:a.titulo}),e("div",{className:p.subtitle,children:V(a.notas)}),c("div",{className:p.fechas,children:[e("span",{className:p.fecha,children:F(a.mes,"MM/yyyy")}),e("span",{className:p.fecha,children:F(a.fecha,"dd/MM/yyyy HH:mm aaaa")})]})]},a.id))})]}),e(re,{})]})};export{ut as default};
