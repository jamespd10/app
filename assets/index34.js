var mo=Object.defineProperty,uo=Object.defineProperties;var po=Object.getOwnPropertyDescriptors;var ne=Object.getOwnPropertySymbols;var Ge=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var Ue=(n,o,r)=>o in n?mo(n,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[o]=r,f=(n,o)=>{for(var r in o||(o={}))Ge.call(o,r)&&Ue(n,r,o[r]);if(ne)for(var r of ne(o))Ke.call(o,r)&&Ue(n,r,o[r]);return n},A=(n,o)=>uo(n,po(o));var Ye=(n,o)=>{var r={};for(var a in n)Ge.call(n,a)&&o.indexOf(a)<0&&(r[a]=n[a]);if(n!=null&&ne)for(var a of ne(n))o.indexOf(a)<0&&Ke.call(n,a)&&(r[a]=n[a]);return r};import{r as c,a as e,ap as oo,aw as k,f as he,F as b,j as d,b as ee,a7 as ho,aL as de,aK as go,aM as xo,ai as No}from"./index.js";import{u as bo}from"./useFetcherEarly.js";import{L as fo}from"./Loader.js";import{N as _o}from"./NotFoundResults.js";import{a as re,o as se,c as no,b as $,F as ie,u as E,C as vo}from"./yup.module.js";import{d as J,c as z,f as me,a as D,e as Ze}from"./array.js";import{d as Co,n as Y,e as Je,r as Qe}from"./regex.js";import{u as Fo}from"./useLocalStorage.js";import{s as i,a as ue}from"./headerPlanilla.module.js";import{d as ao}from"./Delete.js";import{D as W}from"./DecimalInput.js";import{f as M,d as So}from"./string.helper.js";import{u as ge}from"./useModal.js";import{I as to}from"./IconButton.js";import ce from"./Modal.js";import{a as pe}from"./constantsLists.js";import{S as ro}from"./SelectHookForm.js";import{T as ae}from"./TextInput.js";import{S as T}from"./Stack.js";import{F as yo}from"./FormControlLabel.js";import{C as so}from"./Checkbox.js";import{d as Po,a as Eo}from"./CheckBoxOutlineBlank.js";import{A as wo}from"./AutocompleteServer.js";import{L as Mo}from"./ListItem.js";import{T as v}from"./Typography.js";import{A as Q}from"./Alert.js";import{B as te}from"./Button.js";import To from"./InputAsociarNegocio.js";import{D as X}from"./Divider.js";import{T as $o}from"./TextEditor.js";import{P as Z}from"./Paper.js";import{P as Do}from"./Pagination.js";import{d as Ao}from"./CalendarMonth.js";import{B as Io}from"./BootstrapTooltip.js";import{a as Ro,D as zo,b as ko}from"./ModalTransition.js";import{M as Lo}from"./MonthPicker.js";import{s as qo}from"./index30.js";import{H as Ho}from"./HeaderTitle.js";const O=c.exports.createContext({}),Vo=({children:n})=>{const[o,r]=c.exports.useState(null),a=t=>r(t);return e(O.Provider,{value:{date:o,setDate:a},children:n})},I=c.exports.createContext({}),Wo=({children:n})=>{const{id:o,cliente:r}=oo(),a=bo(`/admin/negocios/${o}/${r}/planillas/last`,{}),[,t]=a,{setDate:s}=c.exports.useContext(O);return c.exports.useEffect(()=>{(()=>{t&&t.next_month&&s(t.next_month)})()},[t]),e(I.Provider,{value:a,children:n})},q=J().typeError("Ingresar un valor").positive("La cantidad del salario debe ser positiva").min(0,"La cantidad del salario debe ser mayor a 0").max(9e10,"M\xE1ximo 10 d\xEDgitos").required("Ingresar un valor").test("check-decimal","Favor ingresar m\xE1ximo dos decimales",n=>!!(n===0||n&&n.toString().match(Co))),jo=z().shape({mes:me().typeError("Favor ingresar el mes de la planilla a realizar").required("Favor ingresar el mes de la planilla a realizar"),notas:D().trim().nullable(!0).notRequired(),negocios:Ze().of(z().shape({id_negocio:J().typeError("Favor ingresar el negocio").positive("Favor ingresar el negocio").integer("Favor ingresar el negocio").required("Favor ingresar el negocio"),contratos:Ze().of(z().shape({salario:q,decimo:q,vacaciones:q,impuesto_renta:q,horas_extras:q,comisiones:q,preaviso:q,indemnizacion:q,id_contrato:J().typeError("El id es requerido").required("El id es requerido").positive("El id debe ser un n\xFAmero positivo").integer("El id debe ser un n\xFAmero entero")})).min(1,"Favor ingresar al menos un empleado")})).min(1,"Favor ingresar al menos un negocio")}),B=c.exports.createContext({}),Oo=({children:n})=>{const{id:o,cliente:r}=oo(),a=c.exports.useContext(I),[,t]=a,s=c.exports.useMemo(()=>["4","8","12"].includes(k(t.next_month,"M")),[]),[u,p,l]=Fo(`sipe-${o}-${r}`),h=re({mode:"onSubmit",resolver:se(jo),defaultValues:u!=null?u:{notas:"",mes:t.next_month,negocios:t&&t.planillas[0]&&t.planillas[0].negocios?t.planillas[0].negocios.map(C=>A(f({},C),{contratos:C.contratos.map(w=>A(f({},w),{salario:"",vacaciones:0,impuesto_renta:0,horas_extras:0,comisiones:0,indemnizacion:0,preaviso:0,decimo:s?"":0}))})):[{id_negocio:t==null?void 0:t.id_negocio,nombre:t==null?void 0:t.nombre_negocio,tipo:t==null?void 0:t.tipo,id_cliente:t==null?void 0:t.id_cliente,contratos:[]}]}}),g=no({control:h.control,name:"negocios"}),x=$({control:h.control}),m=$({control:h.control,name:"negocios"});c.exports.useEffect(()=>{(()=>{p(x)})()},[x]);const N=he(),[P,,_]=N;return c.exports.useEffect(()=>{(()=>{!P&&_&&l()})()},[_,P]),e(ie,A(f({},h),{children:e(B.Provider,{value:{fieldsNegocios:g,negocios:m,isDecimo:s,mainNegocioId:o!=null?o:"",clienteId:r!=null?r:"",fetcherSaveData:N},children:n})}))},xe=c.exports.createContext({}),Bo=({children:n})=>{const[o,r]=c.exports.useState(0),a=t=>r(t);return e(xe.Provider,{value:{page:o,setPage:a},children:n})},V=({negocioIndex:n,name:o})=>{const{control:r}=E(),a=$({control:r,name:`negocios.${n}.contratos`}),t=c.exports.useMemo(()=>a&&a.length>0?a.map(s=>Number(s[o]||0)).reduce((s,u)=>s+u):0,[a]);return e(b,{children:M(t)})},Uo=({negocioIndex:n})=>{const{control:o}=E(),r=$({control:o,name:`negocios.${n}.contratos`}),a=c.exports.useMemo(()=>r&&r.length>0?r.map(t=>Number(t.salario||0)+Number(t.decimo||0)+Number(t.vacaciones||0)+Number(t.impuesto_renta||0)+Number(t.horas_extras||0)+Number(t.comisiones||0)+Number(t.indemnizacion||0)+Number(t.preaviso||0)).reduce((t,s)=>t+s):0,[r]);return e(b,{children:M(a)})},Go=({negocioIndex:n})=>{const{control:o}=E(),r=$({control:o,name:`negocios.${n}.contratos`});return c.exports.useMemo(()=>r&&r.length>0&&r.map(t=>Number(t.vacaciones||0)).reduce((t,s)=>t+s)>0,[r])?d(b,{children:[e("td",{className:i.column,children:e(V,{name:"indemnizacion",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"preaviso",negocioIndex:n})})]}):e(b,{})},Ko=({negocioIndex:n})=>d("tr",{className:i.row,children:[e("td",{className:i.column}),e("td",{className:i.column,children:"Totales"}),e("td",{className:i.column}),e("td",{className:i.column,children:e(V,{name:"salario",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"decimo",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"vacaciones",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"impuesto_renta",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"horas_extras",negocioIndex:n})}),e("td",{className:i.column,children:e(V,{name:"comisiones",negocioIndex:n})}),e(Go,{negocioIndex:n}),e("td",{colSpan:2,className:i.column,children:e(Uo,{negocioIndex:n})})]}),Yo=({negocioIndex:n,contratoIndex:o})=>{const{control:r}=E(),a=$({control:r,name:`negocios.${n}.contratos.${o}`}),t=c.exports.useMemo(()=>Number(a.salario||0)+Number(a.decimo||0)+Number(a.vacaciones||0)+Number(a.impuesto_renta||0)+Number(a.horas_extras||0)+Number(a.comisiones||0)+Number(a.indemnizacion||0)+Number(a.preaviso||0),[a]);return e("span",{children:M(t)})},Zo=({negocioIndex:n})=>{const{control:o}=E(),r=$({control:o,name:`negocios.${n}.contratos`});return c.exports.useMemo(()=>r&&r.length>0&&r.map(t=>Number(t.vacaciones||0)).reduce((t,s)=>t+s)>0,[r])?d(b,{children:[e("th",{className:i.header,children:"Indemnizaci\xF3n"}),e("th",{className:i.header,children:"Preaviso"})]}):e(b,{})},Jo=({negocioIndex:n})=>e("thead",{children:d("tr",{children:[e("th",{className:i.header,children:"#"}),e("th",{className:i.header,children:"Nombre"}),e("th",{className:i.header,children:"C\xE9dula"}),e("th",{className:i.header,children:"Salario"}),e("th",{className:i.header,children:"D\xE9cimo"}),e("th",{className:i.header,children:"Vacaciones"}),e("th",{className:i.header,children:"Imp. Renta"}),e("th",{className:i.header,children:"Horas extras"}),e("th",{className:i.header,children:"Comisiones"}),e(Zo,{negocioIndex:n}),e("th",{className:i.header,children:"Total"}),e("th",{className:i.header,children:"Remover"})]})}),Qo=({negocioIndex:n,contratoIndex:o})=>{var p,l,h,g,x,m,N,P,_,C,w,F,R,S,y,L,j,K;const{control:r,formState:a}=E(),{errors:t}=a,s=$({control:r,name:`negocios.${n}.contratos`});return c.exports.useMemo(()=>s&&s.length>0&&s.map(U=>Number(U.vacaciones||0)).reduce((U,oe)=>U+oe)>0,[s])?d(b,{children:[e("td",{className:i.column,children:e(W,{className:i.inputDecimal,name:`negocios.${n}.contratos.${o}.indemnizacion`,label:"Indemnizaci\xF3n",fullWidth:!0,error:!!((g=(h=(l=(p=t==null?void 0:t.negocios)==null?void 0:p[Number(n)])==null?void 0:l.contratos)==null?void 0:h[Number(o)])!=null&&g.indemnizacion),helperText:(_=(P=(N=(m=(x=t==null?void 0:t.negocios)==null?void 0:x[Number(n)])==null?void 0:m.contratos)==null?void 0:N[Number(o)])==null?void 0:P.indemnizacion)==null?void 0:_.message,size:"small"})}),e("td",{className:i.column,children:e(W,{className:i.inputDecimal,name:`negocios.${n}.contratos.${o}.preaviso`,label:"Preaviso",fullWidth:!0,error:!!((R=(F=(w=(C=t==null?void 0:t.negocios)==null?void 0:C[Number(n)])==null?void 0:w.contratos)==null?void 0:F[Number(o)])!=null&&R.preaviso),helperText:(K=(j=(L=(y=(S=t==null?void 0:t.negocios)==null?void 0:S[Number(n)])==null?void 0:y.contratos)==null?void 0:L[Number(o)])==null?void 0:j.preaviso)==null?void 0:K.message,size:"small"})})]}):e(b,{})},Xo=({negocioIndex:n,contratoIndex:o})=>{var p,l,h,g,x,m,N,P,_;const{control:r,setValue:a,formState:t}=E(),{errors:s}=t,u=$({control:r,name:`negocios.${n}.contratos.${o}.salario`});return c.exports.useEffect(()=>{(()=>{u&&u!==""&&Number(u)>=800?a(`negocios.${n}.contratos.${o}.impuesto_renta`,""):a(`negocios.${n}.contratos.${o}.impuesto_renta`,0)})()},[u]),e(W,{className:i.inputDecimal,name:`negocios.${n}.contratos.${o}.impuesto_renta`,label:"Imp. Renta",fullWidth:!0,error:!!((g=(h=(l=(p=s==null?void 0:s.negocios)==null?void 0:p[Number(n)])==null?void 0:l.contratos)==null?void 0:h[Number(o)])!=null&&g.impuesto_renta),helperText:(_=(P=(N=(m=(x=s==null?void 0:s.negocios)==null?void 0:x[Number(n)])==null?void 0:m.contratos)==null?void 0:N[Number(o)])==null?void 0:P.impuesto_renta)==null?void 0:_.message,size:"small"})},G=c.exports.createContext({}),en=({children:n,clienteId:o,mainNegocioId:r,negocioIndex:a,isDecimo:t})=>{const s=ge(),{control:u}=E(),{fields:p,remove:l,append:h,update:g}=no({control:u,name:`negocios.${a}.contratos`});return e(G.Provider,{value:{modalAgregarContrato:s,clienteId:o,mainNegocioId:r,negocioIndex:a,fields:p,remove:l,append:h,update:g,isDecimo:t},children:n})},le=c.exports.createContext({}),on=({children:n})=>{const[o,r]=c.exports.useState(null),a=c.exports.useCallback((s,u)=>{r({negocioIndex:s,contratoIndex:u})},[]),t=c.exports.useCallback(()=>r(null),[]);return e(le.Provider,{value:{negocioContrato:o,setNegocioContrato:a,setNullNegocioContrato:t},children:n})},nn=n=>{const{negocioIndex:o}=n,{formState:r}=E(),{errors:a}=r,{fields:t,remove:s}=c.exports.useContext(G),{setNegocioContrato:u}=c.exports.useContext(le);return e("div",{className:i.tableResponsive,children:d("table",{className:i.table,children:[e(Jo,{negocioIndex:o}),d("tbody",{children:[t==null?void 0:t.map((p,l)=>{var h,g,x,m,N,P,_,C,w,F,R,S,y,L,j,K,U,oe,fe,_e,ve,Ce,Fe,Se,ye,Pe,Ee,we,Me,Te,$e,De,Ae,Ie,Re,ze,ke,Le,qe,He,Ve,We,je,Oe,Be;return d("tr",{className:i.row,children:[e("td",{className:i.column,children:l+1}),d("td",{className:`${i.column} ${i.columnClick}`,onClick:()=>u(Number(o),l),children:[e("div",{className:i.columnClickEdit,children:e("span",{})}),d("span",{children:[p.nombre," ",p.apellido]})]}),e("td",{className:i.column,children:e("span",{children:p.identificacion})}),e("td",{className:i.column,children:e(W,{className:i.inputDecimal,name:`negocios.${o}.contratos.${l}.salario`,label:"Salario",fullWidth:!0,error:!!((m=(x=(g=(h=a==null?void 0:a.negocios)==null?void 0:h[Number(o)])==null?void 0:g.contratos)==null?void 0:x[l])!=null&&m.salario),helperText:(w=(C=(_=(P=(N=a==null?void 0:a.negocios)==null?void 0:N[Number(o)])==null?void 0:P.contratos)==null?void 0:_[l])==null?void 0:C.salario)==null?void 0:w.message,size:"small"})}),e("td",{className:i.column,children:e(W,{className:i.inputDecimal,name:`negocios.${o}.contratos.${l}.decimo`,label:"D\xE9cimo",fullWidth:!0,error:!!((y=(S=(R=(F=a==null?void 0:a.negocios)==null?void 0:F[Number(o)])==null?void 0:R.contratos)==null?void 0:S[l])!=null&&y.decimo),helperText:(oe=(U=(K=(j=(L=a==null?void 0:a.negocios)==null?void 0:L[Number(o)])==null?void 0:j.contratos)==null?void 0:K[l])==null?void 0:U.decimo)==null?void 0:oe.message,size:"small"})}),e("td",{className:i.column,children:e(W,{className:i.inputDecimal,name:`negocios.${o}.contratos.${l}.vacaciones`,label:"Vacaciones",fullWidth:!0,error:!!((Ce=(ve=(_e=(fe=a==null?void 0:a.negocios)==null?void 0:fe[Number(o)])==null?void 0:_e.contratos)==null?void 0:ve[l])!=null&&Ce.vacaciones),helperText:(Ee=(Pe=(ye=(Se=(Fe=a==null?void 0:a.negocios)==null?void 0:Fe[Number(o)])==null?void 0:Se.contratos)==null?void 0:ye[l])==null?void 0:Pe.vacaciones)==null?void 0:Ee.message,size:"small"})}),e("td",{className:i.column,children:e(Xo,{negocioIndex:o,contratoIndex:l})}),e("td",{className:i.column,children:e(W,{className:i.inputDecimal,name:`negocios.${o}.contratos.${l}.horas_extras`,label:"Horas extras",fullWidth:!0,error:!!(($e=(Te=(Me=(we=a==null?void 0:a.negocios)==null?void 0:we[Number(o)])==null?void 0:Me.contratos)==null?void 0:Te[l])!=null&&$e.horas_extras),helperText:(ze=(Re=(Ie=(Ae=(De=a==null?void 0:a.negocios)==null?void 0:De[Number(o)])==null?void 0:Ae.contratos)==null?void 0:Ie[l])==null?void 0:Re.horas_extras)==null?void 0:ze.message,size:"small"})}),e("td",{className:i.column,children:e(W,{className:i.inputDecimal,name:`negocios.${o}.contratos.${l}.comisiones`,label:"Comisiones",fullWidth:!0,error:!!((He=(qe=(Le=(ke=a==null?void 0:a.negocios)==null?void 0:ke[Number(o)])==null?void 0:Le.contratos)==null?void 0:qe[l])!=null&&He.comisiones),helperText:(Be=(Oe=(je=(We=(Ve=a==null?void 0:a.negocios)==null?void 0:Ve[Number(o)])==null?void 0:We.contratos)==null?void 0:je[l])==null?void 0:Oe.comisiones)==null?void 0:Be.message,size:"small"})}),e(Qo,{negocioIndex:o,contratoIndex:l}),e("td",{className:i.column,children:e(Yo,{negocioIndex:o,contratoIndex:l})}),e("td",{className:`${i.column} ${i.icon}`,children:e(to,{color:"error",onClick:()=>s(l),children:e(ao,{})})})]},`${p.id}`)}),e(Ko,{negocioIndex:o})]})]})})},an=(n,o)=>{const[,r,,,,a]=o,{negocios:t}=c.exports.useContext(B),{append:s,mainNegocioId:u,clienteId:p,modalAgregarContrato:l,isDecimo:h}=c.exports.useContext(G),{setHide:g}=l;return{handleAppenContrato:async m=>{if(m.seleccion==="old"){const N=t.flatMap(_=>_.contratos);(N==null?void 0:N.find(_=>Number(_.id_contrato)===Number(m.empleado_selected.id)))?n.setError("empleado_selected.id",{type:"manual",message:"El empleado ya existe en la lista actual. Favor seleccionar otro o crear uno nuevo."}):(s({salario:"",decimo:h?"":0,vacaciones:0,preaviso:0,indemnizacion:0,impuesto_renta:0,id_contrato:Number(m.empleado_selected.id),nombre:m.empleado_selected.nombre||"",apellido:m.empleado_selected.apellido||"",complete_name:m.empleado_selected.complete_name||"",identificacion:m.empleado_selected.identificacion||"",horas_extras:0,comisiones:0,tipo_identificacion:m.empleado_selected.tipo_identificacion||"",seguro:m.empleado_selected.seguro||m.empleado_selected.identificacion||"",conyuge_no_trabaja:m.empleado_selected.conyuge_no_trabaja}),g(),n.reset({seleccion:""}),a())}else{const N=await r(`/admin/contratos/${u}/${p}/add-contrato-planilla`,{method:"POST",data:A(f({},m.new_empleado),{negocio:u})});N.data&&(s({salario:"",decimo:h?"":0,vacaciones:0,preaviso:0,indemnizacion:0,impuesto_renta:0,id_contrato:N.data.id,nombre:m.new_empleado.nombre||"",apellido:m.new_empleado.apellido||"",complete_name:`${m.new_empleado.nombre} ${m.new_empleado.apellido}`,identificacion:m.new_empleado.identificacion||"",horas_extras:0,comisiones:0,tipo_identificacion:m.new_empleado.tipoIdentificacion||"",seguro:m.new_empleado.seguro||m.new_empleado.identificacion||"",conyuge_no_trabaja:m.new_empleado.conyuge_no_trabaja}),g(),n.reset({seleccion:""}),a())}}}},io=z().shape({seleccion:D().trim().required("Favor seleccionar la forma de agregar al empleado").test("check","Favor seleccionar solo de la lista",n=>!!(n&&["new","old"].includes(n))),empleado_selected:z().nullable().when("seleccion",{is:"old",then:z().shape({id:J().typeError("Favor seleccionar el empleado").positive("Favor seleccionar el empleado").integer("Favor seleccionar el empleado"),nombre:D().trim().required("Favor de ingresar el apellido").matches(Y,"Favor ingresar solo letras del abecedario"),apellido:D().trim().required("Favor de ingresar el apellido").matches(Y,"Favor ingresar solo letras del abecedario"),complete_name:D().trim().required("Favor de ingresar el apellido").matches(Y,"Favor ingresar solo letras del abecedario"),identificacion:D().trim().required("Favor seleccionar el empleado"),fecha_ini:me().transform((n,o)=>o===""?null:n).typeError("Favor seleccionar el empleado").nullable(!0).default(null).notRequired(),dv:D().typeError("Favor seleccionar el empleado").nullable(!0).notRequired().test("check","Favor ingresar un n\xFAmero de dos decimales",n=>!!(!n||n&&n.match(Je)))}).typeError("Favor seleccionar el empleado")}),new_empleado:z().typeError("Favor ingresar el empleado").nullable().when("seleccion",{is:"new",then:z().shape({nombre:D().trim().required("Favor de ingresar el nombre").matches(Y,"Favor ingresar solo letras del abecedario"),apellido:D().trim().required("Favor de ingresar el apellido").matches(Y,"Favor ingresar solo letras del abecedario"),dv:D().trim().nullable(!0).notRequired().test("check","Favor ingresar un n\xFAmero de dos decimales",n=>!!(!n||n&&n.match(Je))),tipoIdentificacion:D().trim().required("Favor de ingresar el tipo de identificaci\xF3n").test("is-identificacion","Favor de ingresar un tipo de identificaci\xF3n v\xE1lido: "+[...pe,"C\xE9dula No verificada"].join(", "),n=>[...pe,"C\xE9dula No verificada"].includes(n)),identificacion:D().trim().required("Favor de ingresar la c\xE9dula o pasaporte").matches(Qe,"Favor de ingresar solo n\xFAmeros, letras en may\xFAscula y/o guiones (-)"),seguro:D().trim().nullable(!0).notRequired().test("check-seguro","Favor de ingresar solo n\xFAmeros, letras en may\xFAscula y/o guiones (-)",n=>!!(!n||n&&new RegExp(Qe).test(n))),fecha_ini:me().transform((n,o)=>o===""?null:n).typeError("Favor de seleccionar la fecha de inicio del empleado").nullable(!0).default(null).notRequired()})})}),co=()=>{var p,l,h,g,x,m,N,P,_,C,w,F,R,S,y,L;const n=E(),{register:o,formState:r,control:a,setValue:t}=n,{errors:s}=r,u=$({control:a,name:"new_empleado.conyuge_no_trabaja"});return d(T,{spacing:1,style:{marginTop:10},children:[e(ro,{control:a,label:"Tipo de identificaci\xF3n",options:[...pe,"C\xE9dula No verificada"],error:!!((p=s==null?void 0:s.new_empleado)!=null&&p.tipoIdentificacion),helperText:(h=(l=s==null?void 0:s.new_empleado)==null?void 0:l.tipoIdentificacion)==null?void 0:h.message,name:"new_empleado.tipoIdentificacion",required:!0}),e(ae,f({label:"Nombre",fullWidth:!0,error:!!((g=s==null?void 0:s.new_empleado)!=null&&g.nombre),helperText:(m=(x=s==null?void 0:s.new_empleado)==null?void 0:x.nombre)==null?void 0:m.message,required:!0},o("new_empleado.nombre"))),e(ae,f({label:"Apellido",fullWidth:!0,error:!!((N=s==null?void 0:s.new_empleado)!=null&&N.apellido),helperText:(_=(P=s==null?void 0:s.new_empleado)==null?void 0:P.apellido)==null?void 0:_.message,required:!0},o("new_empleado.apellido"))),e(ae,f({label:"Identificaci\xF3n",fullWidth:!0,error:!!((C=s==null?void 0:s.new_empleado)!=null&&C.identificacion),helperText:(R=(F=(w=s==null?void 0:s.new_empleado)==null?void 0:w.identificacion)==null?void 0:F.message)!=null?R:"C\xE9dula o Pasaporte",required:!0},o("new_empleado.identificacion"))),e(ae,f({label:"Seguro social",fullWidth:!0,error:!!((S=s==null?void 0:s.new_empleado)!=null&&S.seguro),helperText:(L=(y=s==null?void 0:s.new_empleado)==null?void 0:y.seguro)==null?void 0:L.message},o("new_empleado.seguro"))),e(yo,{control:e(so,{checked:u===4,onChange:j=>{t("new_empleado.conyuge_no_trabaja",j.target.checked?4:1)}}),label:"Casado(a) y c\xF3nyuge no trabaja"})]})},tn=()=>{const{mainNegocioId:n,clienteId:o}=c.exports.useContext(G),{control:r,formState:a}=E(),{errors:t}=a;return e(vo,{control:r,name:"empleado_selected",render:({field:s})=>{var u,p,l,h,g;return e(wo,A(f({},s),{ref:null,urlFetch:`/admin/contratos/${n}/${o}/input-planilla`,enableFirst:!0,onChange:(x,m)=>s.onChange(m),inputProps:{label:"Empleado",helperText:(p=(u=t==null?void 0:t.empleado_selected)==null?void 0:u.id)==null?void 0:p.message,error:!!((g=(h=(l=a.errors)==null?void 0:l.empleado_selected)==null?void 0:h.id)!=null&&g.message)},fullWidth:!0,isOptionEqualToValue:(x,m)=>x.id===m.id,getOptionLabel:x=>x.complete_name||"",renderOption:(x,m,{selected:N})=>d(Mo,A(f({},x),{style:{textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e(so,{icon:e(Po,{}),checkedIcon:e(Eo,{}),style:{marginRight:8},checked:N}),d("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:[d(v,{variant:"body1",children:[m.nombre," ",m.apellido]}),e(v,{variant:"body2",children:m.identificacion})]})]}))}))}})},rn=()=>{var t;const{control:n,formState:o}=E(),{errors:r}=o,a=$({control:n,name:"seleccion"});return d(b,{children:[e(ro,{label:"Selecci\xF3n",options:["Insertar nuevo empleado","Empleado de la lista actual de contratos"],values:["new","old"],error:!!(r!=null&&r.seleccion),helperText:(t=r==null?void 0:r.seleccion)==null?void 0:t.message,name:"seleccion",required:!0}),a==="old"&&e("div",{style:{marginTop:10},children:e(tn,{})}),a==="new"&&e(co,{})]})},Xe=()=>{const n=c.exports.useContext(G),{modalAgregarContrato:o}=n,{modalState:r,setHide:a}=o,t=re({mode:"all",resolver:se(io)}),s=he(),{handleAppenContrato:u}=an(t,s),[,,,p,,l]=s,h=c.exports.useCallback(()=>{a(),l(),t.reset({seleccion:""})},[]);return e(ce,{state:r,title:"Agregar Empleado",setHide:()=>h(),cancelBotton:{text:"Cerrar",actionFunction:()=>h()},actionButton:{text:"Agregar",actionFunction:t.handleSubmit(u)},children:d(ie,A(f({},t),{children:[p&&e(Q,{severity:"error",variant:"outlined",sx:{width:"100%",mb:2},children:p==null?void 0:p.message}),e(rn,{})]}))})},sn=n=>{const{reset:o}=n,r=c.exports.useContext(le),{negocioContrato:a,setNullNegocioContrato:t}=r,{control:s}=E(),u=$({control:s,name:"negocios"}),[p,l,h,g,,x]=he(),{update:m}=c.exports.useContext(G);c.exports.useEffect(()=>{(()=>{if(a){const{negocioIndex:C,contratoIndex:w}=a,F=u[C].contratos[w];o({seleccion:"new",new_empleado:A(f({},F),{tipoIdentificacion:F.tipo_identificacion,seguro:F.seguro===F.identificacion?"":F.seguro})})}else o({seleccion:"new",new_empleado:{}})})()},[a]);const N=_=>{const{negocioIndex:C,contratoIndex:w}=a,F=u[C].contratos[w];l(`/admin/contratos/${F.id_contrato}/edit-planilla`,{method:"POST",data:_.new_empleado}).then(R=>{if(R.data){const S=_.new_empleado,y=F;y.apellido=S.apellido||"",y.nombre=S.nombre||"",y.complete_name=`${S.nombre} ${S.apellido}`,y.tipo_identificacion=S.tipoIdentificacion||"",y.identificacion=S.identificacion||"",y.seguro=S.seguro||"",y.conyuge_no_trabaja=S.conyuge_no_trabaja,m(w,f({},y)),o({seleccion:"new",new_empleado:{}}),t(),x()}})};return{handleSetHide:c.exports.useCallback(()=>{t(),x(),o({seleccion:"new",new_empleado:{}})},[]),onSubmit:N,isLoading:p,response:h,error:g}},cn=()=>{const n=c.exports.useContext(le),{negocioContrato:o}=n,r=re({mode:"all",resolver:se(io)}),{handleSubmit:a}=r,t=sn(r),{handleSetHide:s,onSubmit:u,isLoading:p}=t,{response:l,error:h}=t;return d(ce,{state:o!==null,setHide:()=>s(),title:"Editar Empleado",actionButton:{text:"Guardar",actionFunction:a(u),isLoading:p},children:[(l||h)&&e(Q,{variant:"outlined",severity:l?"success":"error",children:(l==null?void 0:l.message)||(h==null?void 0:h.message)}),e(ie,A(f({},r),{children:e(co,{})}))]})},eo=c.exports.lazy(()=>ee(()=>import("./AgregarNegocioContrato.js"),["assets/AgregarNegocioContrato.js","assets/AgregarNegocioContrato.css","assets/index.js","assets/index11.css","assets/PersonAdd.js","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/AddBusiness.js","assets/Button.js","assets/ButtonBase.js","assets/emotion-react.browser.esm.js","assets/useFetcherEarly.js","assets/Loader.js","assets/Grid.js","assets/Typography.js","assets/CircularProgress.js","assets/NotFoundResults.js","assets/yup.module.js","assets/array.js","assets/upperFirst.js","assets/regex.js","assets/useLocalStorage.js","assets/headerPlanilla.module.js","assets/headerPlanilla.module.css","assets/Delete.js","assets/DecimalInput.js","assets/TextInput.js","assets/TextField.js","assets/react-is.production.min.js","assets/Modal2.js","assets/Backdrop.js","assets/isHostComponent.js","assets/Portal.js","assets/Paper.js","assets/Grow.js","assets/List.js","assets/GlobalStyles.js","assets/CustomDecimal.js","assets/react-number-format.es.js","assets/string.helper.js","assets/useModal.js","assets/IconButton.js","assets/Modal.js","assets/Close2.js","assets/ModalTransition.js","assets/CheckCircle.js","assets/DialogContent.js","assets/LoadingButton.js","assets/constantsLists.js","assets/SelectHookForm.js","assets/Box.js","assets/MenuItem.js","assets/listItemIconClasses.js","assets/Divider.js","assets/listItemTextClasses.js","assets/Stack.js","assets/FormControlLabel.js","assets/Checkbox.js","assets/CheckBoxOutlineBlank.js","assets/AutocompleteServer.js","assets/useFetch.js","assets/useHttpService.js","assets/Autocomplete.js","assets/Close.js","assets/Popper.js","assets/Chip.js","assets/ListItem.js","assets/Alert.js","assets/InputAsociarNegocio.js","assets/BootstrapTooltip.js","assets/Tooltip.js","assets/ContentProvider.js","assets/SpeedDial.module.js","assets/SpeedDial.module.css","assets/ChipState.js","assets/SelectedCard.js","assets/TextEditor.js","assets/TextEditor.css","assets/index11.js","assets/Pagination.js","assets/CalendarMonth.js","assets/MonthPicker.js","assets/index30.js","assets/HeaderTitle.js"])),ln=c.exports.lazy(()=>ee(()=>import("./TotalDescuento.js"),["assets/TotalDescuento.js","assets/index.js","assets/index11.css","assets/yup.module.js","assets/string.helper.js","assets/regex.js","assets/totalDescuento.module.js","assets/totalDescuento.module.css","assets/useFetcherEarly.js","assets/Loader.js","assets/Grid.js","assets/Typography.js","assets/CircularProgress.js","assets/emotion-react.browser.esm.js","assets/NotFoundResults.js","assets/array.js","assets/upperFirst.js","assets/useLocalStorage.js","assets/headerPlanilla.module.js","assets/headerPlanilla.module.css","assets/Delete.js","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/DecimalInput.js","assets/TextInput.js","assets/TextField.js","assets/react-is.production.min.js","assets/Modal2.js","assets/Backdrop.js","assets/isHostComponent.js","assets/Portal.js","assets/Paper.js","assets/Grow.js","assets/List.js","assets/GlobalStyles.js","assets/CustomDecimal.js","assets/react-number-format.es.js","assets/useModal.js","assets/IconButton.js","assets/ButtonBase.js","assets/Modal.js","assets/Close2.js","assets/ModalTransition.js","assets/CheckCircle.js","assets/DialogContent.js","assets/LoadingButton.js","assets/Button.js","assets/constantsLists.js","assets/SelectHookForm.js","assets/Box.js","assets/MenuItem.js","assets/listItemIconClasses.js","assets/Divider.js","assets/listItemTextClasses.js","assets/Stack.js","assets/FormControlLabel.js","assets/Checkbox.js","assets/CheckBoxOutlineBlank.js","assets/AutocompleteServer.js","assets/useFetch.js","assets/useHttpService.js","assets/Autocomplete.js","assets/Close.js","assets/Popper.js","assets/Chip.js","assets/ListItem.js","assets/Alert.js","assets/InputAsociarNegocio.js","assets/BootstrapTooltip.js","assets/Tooltip.js","assets/ContentProvider.js","assets/SpeedDial.module.js","assets/SpeedDial.module.css","assets/ChipState.js","assets/SelectedCard.js","assets/TextEditor.js","assets/TextEditor.css","assets/index11.js","assets/Pagination.js","assets/CalendarMonth.js","assets/MonthPicker.js","assets/index30.js","assets/HeaderTitle.js"])),dn=n=>{const{fieldsNegocios:o}=c.exports.useContext(B),{remove:r}=o,{negocioIndex:a}=n,{control:t}=E(),s=$({control:t,name:`negocios.${a}`});return s.contratos&&s.contratos.length>0?d(b,{children:[e(nn,{negocioIndex:a}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(eo,{})}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(ln,{negocioIndex:a})}),e(Xe,{}),e(cn,{})]}):d(b,{children:[e(Q,{severity:"error",action:a!==0&&a!=="0"&&e(te,{variant:"contained",color:"error",size:"small",onClick:()=>r(Number(a)),startIcon:e(ao,{}),children:"Remover negocio"}),children:e(v,{fontWeight:"bold",children:"Favor ingresar al menos un empleado"})}),e(Xe,{}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(eo,{})})]})},lo=c.exports.createContext({}),mn=({children:n})=>{const o=ge();return e(lo.Provider,{value:{modalAgregarNegocio:o},children:n})},un=z().shape({negocio_cobrar:z().shape({id:J().typeError("Favor ingresar el id").integer("Favor ingresar el negocio").positive("Favor ingresar el negocio").required("Favor ingresar el id")}).typeError("Favor seleccionar un negocio").required("Favor seleccionar un negocio")}),pn=(n,o)=>{const{fieldsNegocios:r}=c.exports.useContext(B),{append:a}=r,{control:t}=E(),s=$({control:t,name:"negocios"}),u=()=>{o(),n.reset({})};return{handleAppendNegocio:l=>{s.findIndex(g=>Number(g.id_negocio)===Number(l.negocio_cobrar.id))===-1?(a({id_negocio:l.negocio_cobrar.id,id_cliente:l.negocio_cobrar.id_cliente,nombre:l.negocio_cobrar.nombre_negocio,tipo:l.negocio_cobrar.tipo,contratos:[]}),u()):n.setError("negocio_cobrar",{message:"El negocio ya existe en la planilla actual"})},handleSetHide:u}},hn=()=>{const{modalAgregarNegocio:n}=c.exports.useContext(lo),{modalState:o,setHide:r}=n,a=re({resolver:se(un)}),{handleAppendNegocio:t,handleSetHide:s}=pn(a,r);return e(ie,A(f({},a),{children:e(ce,{state:o,title:"Agregar Negocio",setHide:()=>s(),cancelBotton:{text:"Cerrar",actionFunction:()=>s()},actionButton:{text:"Agregar",actionFunction:a.handleSubmit(t)},children:e(To,{name:"negocio_cobrar",label:"Negocio"})})}))},Ne=c.exports.createContext({}),gn=({children:n,clienteId:o,mainNegocioId:r})=>{const a=ge();return e(Ne.Provider,{value:{modalSaveData:a,clienteId:o,mainNegocioId:r},children:n})},xn="_divSaveData_28j6j_1";var Nn={divSaveData:xn};const bn=()=>{const{fetcherSaveData:n}=c.exports.useContext(B),o=c.exports.useContext(Ne),{mainNegocioId:r,clienteId:a}=o,[,t]=n,{date:s}=c.exports.useContext(O);return{handleSaveData:p=>{t(`/admin/negocios/${r}/${a}/planillar`,{method:"POST",data:A(f({},p),{date:s})})}}},fn=()=>{const{fetcherSaveData:n}=c.exports.useContext(B),{modalSaveData:o}=c.exports.useContext(Ne),{modalState:r,setHide:a,setOpen:t}=o,{handleSubmit:s,formState:u}=E(),{errors:p}=u,{handleSaveData:l}=bn(),[h,,g,x]=n,m=ho();return d(b,{children:[e(X,{}),e("div",{className:Nn.divSaveData,children:e(te,{variant:"outlined",onClick:()=>t(),children:"Guardar"})}),e(ce,{state:r,setHide:()=>a(),title:"\xA1Atenci\xF3n!",type:g?"SUCCESS":"ERROR",actionButton:g?{text:"Ver",actionFunction:()=>m(`/planillas/${g.id}`,{replace:!0})}:!p.negocios&&(!g||x)?{text:"Guardar",actionFunction:s(l),isLoading:h}:void 0,children:g?d(b,{children:[g.message,". \xBFDesea ver la planilla ",e("strong",{children:"SIPE"})," ","realizada?"]}):p.negocios?e(b,{children:"Se encontraron errores en el formulario. Favor corregir antes de avanzar."}):!p.negocios&&!x?e(b,{children:"\xBFRealmente desea guardar los datos?"}):e(b,{children:x==null?void 0:x.message})})]})},_n=()=>{const n=c.exports.useContext(B),{date:o}=c.exports.useContext(O),{fieldsNegocios:r,isDecimo:a}=n,{mainNegocioId:t,clienteId:s}=n,{fields:u}=r;return d(mn,{children:[e(Z,{variant:"outlined",className:i.paperTables,children:d(T,{direction:"column",spacing:1,marginTop:1,margin:1,children:[d(v,{variant:"h5",children:["Formulario para la planilla del mes de:"," ",e("span",{className:i.fechaTables,children:k(o,"MMMM yyyy")})]}),e(X,{}),u.map((p,l)=>d(Z,{variant:"outlined",children:[d(v,{variant:"h5",textTransform:"uppercase",fontWeight:"bold",padding:1,color:l===0?"red":"darkorange",children:[p.tipo," ",p.nombre]}),e(en,{mainNegocioId:u[0].id_negocio,clienteId:u[0].id_cliente,negocioIndex:l,isDecimo:a,children:e(on,{children:e(dn,{negocioIndex:l})})})]},`${l}`)),e(Z,{variant:"outlined",className:i.paperNotas,children:d(T,{direction:"column",spacing:1,children:[e(v,{variant:"h5",children:"Notas:"}),e(X,{}),e($o,{name:"notas",height:300})]})}),e(gn,{mainNegocioId:t,clienteId:s,children:e(fn,{})})]})}),e(hn,{})]})},be=n=>{const[,o]=c.exports.useContext(I),r=c.exports.useMemo(()=>o.planillas[n].negocios.flatMap(t=>t.contratos).map(t=>Number(t.indemnizacion)).reduce((t,s)=>t+s)>0,[n]),a=c.exports.useMemo(()=>o.planillas[n].negocios.flatMap(t=>t.contratos).map(t=>Number(t.indemnizacion)).reduce((t,s)=>t+s)>0,[n]);return{isIndemnizacion:r,isPreaviso:a}},vn=({page:n})=>{const{isIndemnizacion:o,isPreaviso:r}=be(n);return e("thead",{children:d("tr",{children:[e("th",{className:i.header,children:"#"}),e("th",{className:i.header,children:"Nombre"}),e("th",{className:i.header,children:"C\xE9dula"}),e("th",{className:i.header,children:"Salario"}),e("th",{className:i.header,children:"D\xE9cimo"}),e("th",{className:i.header,children:"Vacaciones"}),e("th",{className:i.header,children:"Imp. Renta"}),e("th",{className:i.header,children:"Horas Extras"}),e("th",{className:i.header,children:"Comisiones"}),o&&e("th",{className:i.header,children:"Comisiones"}),r&&e("th",{className:i.header,children:"Comisiones"}),e("th",{className:i.header,children:"Totales"})]})})},Cn=({page:n,index:o})=>{const[,r]=c.exports.useContext(I),{isIndemnizacion:a,isPreaviso:t}=be(n);return d(b,{children:[a&&e("td",{children:M(r==null?void 0:r.planillas[n].negocios.flatMap(s=>s.contratos)[o].indemnizacion)}),t&&e("td",{children:M(r==null?void 0:r.planillas[n].negocios.flatMap(s=>s.contratos)[o].preaviso)})]})},H=({page:n,name:o})=>{const[,r]=c.exports.useContext(I),a=c.exports.useMemo(()=>r==null?void 0:r.planillas[n].negocios.flatMap(t=>t.contratos).map(t=>Number(t[o]||0)).reduce((t,s)=>t+s),[n]);return e(b,{children:M(a)})},Fn=({page:n})=>{const[,o]=c.exports.useContext(I),r=c.exports.useMemo(()=>o==null?void 0:o.planillas[n].negocios.flatMap(a=>a.contratos).map(a=>Number(a.salario||0)+Number(a.decimo||0)+Number(a.vacaciones||0)+Number(a.impuesto_renta||0)+Number(a.horas_extras||0)+Number(a.comisiones||0)+Number(a.indemnizacion||0)+Number(a.preaviso||0)).reduce((a,t)=>a+t),[n]);return e(b,{children:M(r)})},Sn=({page:n})=>{const{isIndemnizacion:o,isPreaviso:r}=be(n);return d("tr",{className:i.row,children:[e("td",{className:i.column}),e("td",{className:i.column,children:"Totales"}),e("td",{className:i.column}),e("td",{className:i.column,children:e(H,{name:"salario",page:n})}),e("td",{className:i.column,children:e(H,{name:"decimo",page:n})}),e("td",{className:i.column,children:e(H,{name:"vacaciones",page:n})}),e("td",{className:i.column,children:e(H,{name:"impuesto_renta",page:n})}),e("td",{className:i.column,children:e(H,{name:"horas_extras",page:n})}),e("td",{className:i.column,children:e(H,{name:"comisiones",page:n})}),o&&e("td",{className:i.column,children:e(H,{name:"indemnizacion",page:n})}),r&&e("td",{className:i.column,children:e(H,{name:"preaviso",page:n})}),e("td",{colSpan:2,className:i.column,children:e(Fn,{page:n})})]})},yn=()=>{const[,n]=c.exports.useContext(I),{page:o,setPage:r}=c.exports.useContext(xe);return d(Z,{className:ue.paperLastedPlanillas,variant:"outlined",component:T,spacing:1,direction:"column",paddingBottom:1,children:[d(v,{variant:"h5",className:ue.paperTitle,children:["Informaci\xF3n de la planilla anterior del mes de:"," ",d("strong",{children:["(",k(n==null?void 0:n.planillas[o].mes,"MMMM - yyyy"),")"]})]}),e("div",{className:i.lastedTableResponsive,children:d("table",{className:i.table,children:[e(vn,{page:o}),d("tbody",{children:[n==null?void 0:n.planillas[o].negocios.flatMap(a=>a.contratos).map((a,t)=>d("tr",{className:i.row,children:[e("td",{className:i.column,children:t+1}),d("td",{className:i.column,children:[a.nombre," ",a.apellido]}),e("td",{className:i.column,children:a.identificacion}),e("td",{className:i.column,children:M(a.salario)}),e("td",{className:i.column,children:M(a.decimo)}),e("td",{className:i.column,children:M(a.vacaciones)}),e("td",{className:i.column,children:M(a.impuesto_renta)}),e("td",{className:i.column,children:M(a.horas_extras)}),e("td",{className:i.column,children:M(a.comisiones)}),e(Cn,{page:o,index:t}),e("td",{className:i.column,children:M(Number(a.salario)+Number(a.decimo)+Number(a.vacaciones)+Number(a.impuesto_renta)+Number(a.horas_extras)+Number(a.comisiones)+Number(a.indemnizacion)+Number(a.preaviso))})]},`${a.id_contrato}`)),e(Sn,{page:o})]})]})}),e(Do,{color:"primary",count:n==null?void 0:n.planillas.length,page:o+1,onChange:(a,t)=>r(t-1)})]})},Pn=t=>{var s=t,{date:n,minDate:o,maxDate:r}=s,a=Ye(s,["date","minDate","maxDate"]);const[u,p]=c.exports.useState(de(n||Date.now())),[l,h]=c.exports.useState(!1),{render:g,setDate:x}=a,m=()=>{h(!1),p(de(n||Date.now()))};return d(b,{children:[g(l,N=>h(N)),d(Ro,{open:l,onClose:()=>m(),children:[e(zo,{children:e(v,{style:{textTransform:"uppercase"},children:k(u,"MMMM")})}),e(Lo,{date:u,maxDate:o||go(u,12),minDate:r||qo(u,12),onChange:N=>{N&&p(N)}}),d(ko,{children:[e(te,{onClick:()=>m(),children:"Cerrar"}),e(te,{onClick:()=>{h(!1),x(u)},children:"Ok"})]})]})]})},En=()=>{const{date:n,setDate:o}=c.exports.useContext(O);return e(b,{children:e(Pn,{date:xo(n),setDate:r=>{o(k(de(r),"yyyy-MM-dd HH:mm:ss"))},render:(r,a)=>e(Io,{title:"Seleccinar Mes",disableInteractive:!0,children:e(to,{onClick:()=>a(!0),children:e(Ao,{})})})})})},wn=()=>{const n=c.exports.useContext(I),[,o]=n;return d(b,{children:[d(T,{direction:"row",spacing:1,children:[d(v,{children:[e("strong",{children:"Usuario Elaborador"}),": ",o==null?void 0:o.user_elaborador]}),d(v,{children:[e("strong",{children:"Contrase\xF1a Elaborador"}),": ",o==null?void 0:o.password_elaborador]})]}),e(X,{}),d(T,{direction:"row",spacing:1,children:[d(v,{children:[e("strong",{children:"Usuario Representante Legal"}),":"," ",o==null?void 0:o.user_representante]}),d(v,{children:[e("strong",{children:"Contrase\xF1a Representante Legal"}),":"," ",o==null?void 0:o.password_representante]})]})]})},Mn=()=>{const n=c.exports.useContext(I),[,o]=n,{date:r}=c.exports.useContext(O),{setNegocioNota:a}=c.exports.useContext(No);return c.exports.useEffect(()=>{(()=>{if(o){const s={id:o==null?void 0:o.id_negocio,tipo:o.tipo,nombre_negocio:o==null?void 0:o.nombre_negocio,ruta:o.ruta,ruc:o.ruc};a({negocio:s,mes:r,tipo:"SIPE"})}})()},[o,r]),null},Tn=c.exports.lazy(()=>ee(()=>import("./index54.js"),["assets/index54.js","assets/index.js","assets/index11.css","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/BootstrapTooltip.js","assets/Tooltip.js","assets/Popper.js","assets/Portal.js","assets/isHostComponent.js","assets/Grow.js","assets/yup.module.js","assets/useModal.js","assets/array.js","assets/upperFirst.js","assets/IconButton.js","assets/ButtonBase.js","assets/emotion-react.browser.esm.js","assets/Modal.js","assets/Close2.js","assets/ModalTransition.js","assets/Backdrop.js","assets/Modal2.js","assets/Paper.js","assets/Typography.js","assets/CheckCircle.js","assets/DialogContent.js","assets/LoadingButton.js","assets/Button.js","assets/CircularProgress.js","assets/TextInput.js","assets/TextField.js","assets/react-is.production.min.js","assets/List.js","assets/GlobalStyles.js","assets/Stack.js","assets/Divider.js","assets/Loader.js","assets/Grid.js","assets/Alert.js","assets/Close.js"])),$n=c.exports.lazy(()=>ee(()=>import("./index55.js"),["assets/index55.js","assets/index.css","assets/index.js","assets/index11.css","assets/Modal.js","assets/Close2.js","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/ModalTransition.js","assets/Backdrop.js","assets/Modal2.js","assets/isHostComponent.js","assets/Portal.js","assets/Paper.js","assets/Typography.js","assets/IconButton.js","assets/ButtonBase.js","assets/emotion-react.browser.esm.js","assets/CheckCircle.js","assets/DialogContent.js","assets/LoadingButton.js","assets/Button.js","assets/CircularProgress.js","assets/yup.module.js","assets/array.js","assets/upperFirst.js","assets/regex.js","assets/useModal.js","assets/PatronalInput.js","assets/TextInput.js","assets/TextField.js","assets/react-is.production.min.js","assets/Grow.js","assets/List.js","assets/GlobalStyles.js","assets/CustomSipe.js","assets/index11.js","assets/Stack.js","assets/Alert.js","assets/Close.js"])),Dn=c.exports.lazy(()=>ee(()=>import("./index56.js").then(function(n){return n.i}),["assets/index56.js","assets/index.js","assets/index11.css","assets/useForm.js","assets/object.helper.js","assets/array.js","assets/upperFirst.js"])),An=()=>{const n=c.exports.useContext(I),[,o,,,r]=n,{date:a}=c.exports.useContext(O),{page:t}=c.exports.useContext(xe);return d(Z,{className:ue.paper,variant:"outlined",children:[e(Mn,{}),d(T,{divider:e(X,{}),direction:"column",spacing:1,children:[d(T,{direction:{xs:"column",md:"row"},justifyContent:"space-between",children:[d(T,{direction:"row",spacing:1,alignItems:"center",children:[d(v,{variant:"h5",color:"green",fontWeight:"bold",textTransform:"uppercase",children:[o==null?void 0:o.tipo," ",o==null?void 0:o.nombre_negocio]}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Tn,{id:o==null?void 0:o.id_negocio,update:s=>r(f(f({},o),s))})})]}),d(T,{direction:"row",alignItems:"center",children:[a&&e(En,{}),d(v,{variant:"h5",fontWeight:"bold",textTransform:"uppercase",children:["MES A REALIZAR:"," "]}),e(v,{variant:"h5",fontWeight:"bold",textTransform:"uppercase",color:"red",marginLeft:1,children:k(a,"MMMM yyyy")})]})]}),d(v,{children:[e("strong",{children:"Raz\xF3n social:"})," ",e("span",{children:o==null?void 0:o.nom_cliente})," ",e("strong",{children:"Asignado a:"})," ",d("span",{children:[o==null?void 0:o.nombre," ",o==null?void 0:o.apellido," "]}),e("strong",{children:"RUC:"})," ",e("span",{children:o==null?void 0:o.ruc})," ",e("strong",{children:"DV:"})," ",e("span",{children:o==null?void 0:o.dv})," ",e("strong",{children:"Ruta:"})," ",e("span",{children:o==null?void 0:o.ruta})," "]}),d(v,{component:T,spacing:1,direction:"row",children:[e("strong",{children:"N. Patronal:"})," ",e("span",{children:o==null?void 0:o.n_patronal}),e(c.exports.Suspense,{fallback:e("div",{}),children:e($n,{negocio:o.id_negocio,patronal:o==null?void 0:o.patronal_sipe,multer:s=>r(f(f({},o),s))})}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Dn,{negocio:o.id_negocio,riesgo_profesional:o.riesgo_profesional,multer:s=>r(f(f({},o),s))})})]}),e(wn,{}),o&&k(o.mes,"M")===k(o.next_month,"M")&&e(Q,{variant:"outlined",severity:"error",children:d(T,{direction:"row",alignItems:"center",spacing:1,children:[e("span",{children:"Ya se ha realizado la planilla del mes de"}),e(v,{textTransform:"uppercase",fontWeight:"bold",children:k(o.mes,"MMMM")})]})}),o&&o.planillas&&o.planillas.length!==0?d(b,{children:[e(yn,{}),o.planillas[t].notas&&o.planillas[t].notas!==""&&d(T,{direction:"column",children:[e(v,{variant:"subtitle1",fontWeight:"bold",children:"Notas:"}),So(o.planillas[t].notas)]})]}):e(Q,{variant:"outlined",severity:"warning",children:"No se encontr\xF3 informaci\xF3n sobre planillas anteriores"})]})]})},In=()=>{const n=c.exports.useContext(I),[,o,r]=n;return d(b,{children:[!o&&!r&&e(fo,{}),!o&&r&&e(_o,{text:r.message}),o&&!r&&d(T,{direction:"column",spacing:1,children:[e(Bo,{children:e(An,{})}),e(Oo,{children:e(_n,{})})]})]})},Rn=()=>e(Vo,{children:d(Wo,{children:[e(Ho,{message:"Planillas"}),e(In,{})]})});var va=Object.freeze(Object.defineProperty({__proto__:null,default:Rn},Symbol.toStringTag,{value:"Module"}));export{I as L,lo as M,G as a,va as i};
