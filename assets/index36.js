var No=Object.defineProperty,bo=Object.defineProperties;var _o=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var fo=Object.prototype.hasOwnProperty,vo=Object.prototype.propertyIsEnumerable;var Je=(n,o,s)=>o in n?No(n,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[o]=s,v=(n,o)=>{for(var s in o||(o={}))fo.call(o,s)&&Je(n,s,o[s]);if(Ue)for(var s of Ue(o))vo.call(o,s)&&Je(n,s,o[s]);return n},k=(n,o)=>bo(n,_o(o));import{H as Co}from"./HeaderTitle.js";import{r as c,ap as ee,a as e,j as l,F as _,ai as So,b as oe,aw as ge,f as K,A as Fo,as as yo}from"./index.js";import{u as Eo}from"./useFetcherEarly.js";import{N as wo}from"./NotFoundResults.js";import{L as eo}from"./Loader.js";import{a as $o,s as u}from"./headerPlanilla.module.js";import{d as To,f,a as Mo}from"./string.helper.js";import{S as z}from"./Stack.js";import{T as w}from"./Typography.js";import{D as le}from"./Divider.js";import{P as Z}from"./Paper.js";import{s as S,r as Po}from"./numberHelper.js";import{d as Ao}from"./FileDownload.js";import{d as Ro}from"./ScheduleSend.js";import{S as zo}from"./StyledSpeedDial.js";import{d as Do}from"./Edit.js";import{c as oo,i as no,r as to}from"./jsx-runtime_commonjs-proxy.js";import{u as J}from"./useModal.js";import{s as ko}from"./FileSaver.min.js";import{a as re,o as ce,c as ao,b as D,F as de,u as A,C as Io}from"./yup.module.js";import{d as se,c as I,f as pe,a as R,e as Ke}from"./array.js";import{d as Ho,n as ae,e as Qe,r as Xe}from"./regex.js";import{d as so}from"./Delete.js";import{D as W}from"./DecimalInput.js";import{I as ro}from"./IconButton.js";import G from"./Modal.js";import{a as he}from"./constantsLists.js";import{S as co}from"./SelectHookForm.js";import{T as Y}from"./TextInput.js";import{F as qo}from"./FormControlLabel.js";import{C as io}from"./Checkbox.js";import{d as Oo,a as Lo}from"./CheckBoxOutlineBlank.js";import{A as Vo}from"./AutocompleteServer.js";import{L as jo}from"./ListItem.js";import{A as me}from"./Alert.js";import{B as lo}from"./Button.js";import Bo from"./InputAsociarNegocio.js";import{T as Wo}from"./TextEditor.js";import{I as Go}from"./InputAdornment.js";import"./BootstrapTooltip.js";import"./SpeedDial.module.js";import{B as Uo}from"./BackgroundLoader.js";import"./SelectedCard.js";const F=c.exports.createContext({}),Jo=({children:n})=>{const{id:o}=ee(),s=Eo(`/admin/planillas/${o}`);return e(F.Provider,{value:s,children:n})},Ko=()=>{const n=c.exports.useContext(F),[,o]=n;return l(_,{children:[l(z,{direction:"row",spacing:1,children:[l(w,{children:[e("strong",{children:"Usuario Elaborador"}),": ",o==null?void 0:o.user_elaborador]}),l(w,{children:[e("strong",{children:"Contrase\xF1a Elaborador"}),": ",o==null?void 0:o.password_elaborador]})]}),e(le,{}),l(z,{direction:"row",spacing:1,children:[l(w,{children:[e("strong",{children:"Usuario Representante Legal"}),":"," ",o==null?void 0:o.user_representante]}),l(w,{children:[e("strong",{children:"Contrase\xF1a Representante Legal"}),":"," ",o==null?void 0:o.password_representante]})]})]})},Qo=()=>{const n=c.exports.useContext(F),[,o]=n,{setNegocioNota:s}=c.exports.useContext(So);return c.exports.useEffect(()=>{(()=>{if(o){const a={id:o==null?void 0:o.id_negocio,tipo:o.tipo,nombre_negocio:o==null?void 0:o.nombre_negocio,ruta:o.ruta,ruc:o.ruc};s({negocio:a,mes:o.mes,tipo:"SIPE"})}})()},[o]),null},Xo=c.exports.lazy(()=>oe(()=>import("./index58.js"),["assets/index58.js","assets/index.js","assets/index2.css","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/BootstrapTooltip.js","assets/Tooltip.js","assets/Popper.js","assets/Portal.js","assets/isHostComponent.js","assets/Grow.js","assets/yup.module.js","assets/useModal.js","assets/array.js","assets/upperFirst.js","assets/IconButton.js","assets/ButtonBase.js","assets/emotion-react.browser.esm.js","assets/Modal.js","assets/Close2.js","assets/ModalTransition.js","assets/Backdrop.js","assets/Fade.js","assets/Modal2.js","assets/Paper.js","assets/Typography.js","assets/CheckCircle.js","assets/DialogContent.js","assets/DialogActions.js","assets/LoadingButton.js","assets/Button.js","assets/CircularProgress.js","assets/TextInput.js","assets/TextField.js","assets/useFormControl.js","assets/formControlState.js","assets/react-is.production.min.js","assets/List.js","assets/outlinedInputClasses.js","assets/GlobalStyles.js","assets/Stack.js","assets/Divider.js","assets/Loader.js","assets/Grid.js","assets/Alert.js","assets/Close.js"])),Yo=c.exports.lazy(()=>oe(()=>import("./index59.js"),["assets/index59.js","assets/index9.css","assets/index.js","assets/index2.css","assets/Modal.js","assets/Close2.js","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/ModalTransition.js","assets/Backdrop.js","assets/Fade.js","assets/Modal2.js","assets/isHostComponent.js","assets/Portal.js","assets/Paper.js","assets/Typography.js","assets/IconButton.js","assets/ButtonBase.js","assets/emotion-react.browser.esm.js","assets/CheckCircle.js","assets/DialogContent.js","assets/DialogActions.js","assets/LoadingButton.js","assets/Button.js","assets/CircularProgress.js","assets/yup.module.js","assets/array.js","assets/upperFirst.js","assets/regex.js","assets/useModal.js","assets/PatronalInput.js","assets/TextInput.js","assets/TextField.js","assets/useFormControl.js","assets/formControlState.js","assets/react-is.production.min.js","assets/Grow.js","assets/List.js","assets/outlinedInputClasses.js","assets/GlobalStyles.js","assets/CustomSipe.js","assets/index11.js","assets/Stack.js","assets/Alert.js","assets/Close.js"])),Zo=c.exports.lazy(()=>oe(()=>import("./index60.js").then(function(n){return n.i}),["assets/index60.js","assets/index.js","assets/index2.css","assets/useForm.js","assets/object.helper.js","assets/array.js","assets/upperFirst.js"])),en=()=>{const n=c.exports.useContext(F),[,o,,,s]=n;return l(Z,{className:$o.paper,variant:"outlined",children:[e(Qo,{}),l(z,{divider:e(le,{}),direction:"column",spacing:1,children:[l(z,{direction:{xs:"column",md:"row"},justifyContent:"space-between",children:[l(z,{direction:"row",spacing:1,alignItems:"center",children:[l(w,{variant:"h5",color:"green",fontWeight:"bold",textTransform:"uppercase",children:[o==null?void 0:o.tipo," ",o==null?void 0:o.nombre_negocio]}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Xo,{id:o==null?void 0:o.id_negocio,update:t=>s(v(v({},o),t))})})]}),l(z,{direction:"row",alignItems:"center",children:[l(w,{variant:"h5",fontWeight:"bold",textTransform:"uppercase",children:["MES:"," "]}),e(w,{variant:"h5",fontWeight:"bold",textTransform:"uppercase",color:"red",marginLeft:1,children:ge(o==null?void 0:o.mes,"MMMM yyyy")})]})]}),l(w,{component:z,spacing:1,direction:"row",children:[e("strong",{children:"Raz\xF3n social:"})," ",e("span",{children:o==null?void 0:o.nom_cliente})," ",e("strong",{children:"Asignado a:"})," ",l("span",{children:[o==null?void 0:o.nombre," ",o==null?void 0:o.apellido," "]}),e("strong",{children:"RUC:"})," ",e("span",{children:o==null?void 0:o.ruc})," ",e("strong",{children:"DV:"})," ",e("span",{children:o==null?void 0:o.dv})," ",e("strong",{children:"Ruta:"})," ",e("span",{children:o==null?void 0:o.ruta})]}),l(w,{component:z,spacing:1,direction:"row",children:[e("strong",{children:"N. Patronal:"})," ",e("span",{children:o==null?void 0:o.n_patronal}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Yo,{negocio:o.id_negocio,patronal:o==null?void 0:o.patronal_sipe,multer:t=>s(v(v({},o),t))})}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Zo,{negocio:o.id_negocio,riesgo_profesional:o.riesgo_profesional,multer:t=>s(v(v({},o),t))})})]}),e(Ko,{}),(o==null?void 0:o.notas)&&(o==null?void 0:o.notas)!==""&&l(z,{direction:"column",children:[e(w,{variant:"subtitle1",fontWeight:"bold",children:"Notas:"}),To(o==null?void 0:o.notas)]})]})]})},xe=()=>{const[,n]=c.exports.useContext(F),o=c.exports.useMemo(()=>n.negocios.flatMap(t=>t.contratos).map(t=>Number(t.indemnizacion)).some(t=>t>0),[]),s=c.exports.useMemo(()=>n.negocios.flatMap(t=>t.contratos).map(t=>Number(t.preaviso)).some(t=>t>0),[]);return{isIndemnizacion:o,isPreaviso:s}},on=()=>{const{isIndemnizacion:n,isPreaviso:o}=xe();return e("thead",{children:l("tr",{children:[e("th",{className:u.header,children:"#"}),e("th",{className:u.header,children:"Nombre"}),e("th",{className:u.header,children:"C\xE9dula"}),e("th",{className:u.header,children:"Salario"}),e("th",{className:u.header,children:"D\xE9cimo"}),e("th",{className:u.header,children:"Vacaciones"}),e("th",{className:u.header,children:"Imp. Renta"}),e("th",{className:u.header,children:"Horas extras"}),e("th",{className:u.header,children:"Comisiones"}),n&&e("th",{className:u.header,children:"Indemnizaci\xF3n"}),o&&e("th",{className:u.header,children:"Preaviso"}),e("th",{className:u.header,children:"Total"})]})})},nn=()=>{const[,n]=c.exports.useContext(F),{isIndemnizacion:o,isPreaviso:s}=xe();return e(_,{children:n.negocios.flatMap(t=>t.contratos).map((t,a)=>l("tr",{className:u.row,children:[e("td",{className:u.column,children:a+1}),l("td",{className:u.column,children:[t.nombre," ",t.apellido]}),e("td",{className:u.column,children:t.identificacion}),e("td",{className:u.column,children:f(t.salario)}),e("td",{className:u.column,children:f(t.decimo)}),e("td",{className:u.column,children:f(t.vacaciones)}),e("td",{className:u.column,children:f(t.impuesto_renta)}),e("td",{className:u.column,children:f(t.horas_extras)}),e("td",{className:u.column,children:f(t.comisiones)}),o&&e("td",{className:u.column,children:f(t.indemnizacion)}),s&&e("td",{className:u.column,children:f(t.preaviso)}),e("td",{className:u.column,children:f(Number(t.salario)+Number(t.decimo)+Number(t.vacaciones)+Number(t.impuesto_renta)+Number(t.horas_extras)+Number(t.comisiones)+Number(t.indemnizacion)+Number(t.preaviso))})]},`${t.id_contrato}`))})},L=({name:n})=>{const[,o]=c.exports.useContext(F),s=c.exports.useMemo(()=>o.negocios.flatMap(t=>t.contratos).map(t=>Number(t[n])).reduce((t,a)=>t+a),[o,n]);return e("td",{className:u.column,children:f(s)})},tn=()=>{const{isIndemnizacion:n,isPreaviso:o}=xe(),[,s]=c.exports.useContext(F),t=c.exports.useMemo(()=>s.negocios.flatMap(a=>a.contratos).map(a=>Number(a.salario)+Number(a.decimo)+Number(a.vacaciones)+Number(a.impuesto_renta)+Number(a.horas_extras)+Number(a.comisiones)+Number(a.indemnizacion)+Number(a.preaviso)).reduce((a,r)=>a+r),[s]);return l("tr",{className:u.row,children:[e("td",{className:u.column}),e("td",{className:u.column,children:"Totales"}),e("td",{className:u.column}),e(L,{name:"salario"}),e(L,{name:"decimo"}),e(L,{name:"vacaciones"}),e(L,{name:"impuesto_renta"}),e(L,{name:"horas_extras"}),e(L,{name:"comisiones"}),n&&e(L,{name:"indemnizacion"}),o&&e(L,{name:"preaviso"}),e("td",{className:u.column,children:f(t)})]})},an=c.exports.lazy(()=>oe(()=>import("./SalariosVacaciones.js"),["assets/SalariosVacaciones.js","assets/string.helper.js","assets/index.js","assets/index2.css","assets/regex.js","assets/HeaderTitle.js","assets/Typography.js","assets/Divider.js","assets/useFetcherEarly.js","assets/NotFoundResults.js","assets/Grid.js","assets/Loader.js","assets/CircularProgress.js","assets/emotion-react.browser.esm.js","assets/headerPlanilla.module.js","assets/headerPlanilla.module.css","assets/Stack.js","assets/Paper.js","assets/numberHelper.js","assets/numberHelper.css","assets/FileDownload.js","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/ScheduleSend.js","assets/StyledSpeedDial.js","assets/Assignment.js","assets/FabButtonAction.js","assets/react-is.production.min.js","assets/AssignmentRounded.js","assets/ButtonBase.js","assets/Tooltip.js","assets/Popper.js","assets/Portal.js","assets/isHostComponent.js","assets/Grow.js","assets/SpeedDial.module.js","assets/SpeedDial.module.css","assets/Backdrop.js","assets/Fade.js","assets/Edit.js","assets/useModal.js","assets/FileSaver.min.js","assets/yup.module.js","assets/array.js","assets/upperFirst.js","assets/Delete.js","assets/DecimalInput.js","assets/TextInput.js","assets/TextField.js","assets/useFormControl.js","assets/formControlState.js","assets/Modal2.js","assets/List.js","assets/outlinedInputClasses.js","assets/GlobalStyles.js","assets/CustomDecimal.js","assets/react-number-format.es.js","assets/IconButton.js","assets/Modal.js","assets/Close2.js","assets/ModalTransition.js","assets/CheckCircle.js","assets/DialogContent.js","assets/DialogActions.js","assets/LoadingButton.js","assets/Button.js","assets/constantsLists.js","assets/SelectHookForm.js","assets/Box.js","assets/MenuItem.js","assets/listItemIconClasses.js","assets/listItemTextClasses.js","assets/FormControlLabel.js","assets/Checkbox.js","assets/CheckBoxOutlineBlank.js","assets/AutocompleteServer.js","assets/useFetch.js","assets/useHttpService.js","assets/Autocomplete.js","assets/Close.js","assets/Chip.js","assets/ListItem.js","assets/Alert.js","assets/InputAsociarNegocio.js","assets/BootstrapTooltip.js","assets/ChipState.js","assets/SelectedCard.js","assets/TextEditor.js","assets/TextEditor.css","assets/index11.js","assets/InputAdornment.js","assets/BackgroundLoader.js"])),sn=()=>{const[,n]=c.exports.useContext(F),o=c.exports.useMemo(()=>n.negocios.flatMap(g=>g.contratos).map(g=>Number(g.impuesto_renta)).reduce((g,d)=>g+d),[n]),s=c.exports.useMemo(()=>n.negocios.flatMap(g=>g.contratos).map(g=>Number(g.salario)+Number(g.vacaciones)+Number(g.horas_extras)+Number(g.comisiones)).reduce((g,d)=>g+d),[n]),t=c.exports.useMemo(()=>n.negocios.flatMap(g=>g.contratos).map(g=>Number(g.decimo)).reduce((g,d)=>g+d),[n]),a=c.exports.useMemo(()=>9.75,[]),r=c.exports.useMemo(()=>12.25,[]),p=c.exports.useMemo(()=>1.25,[]),m=c.exports.useMemo(()=>1.5,[]),i=c.exports.useMemo(()=>Number((n==null?void 0:n.riesgo_profesional)||2.1),[n]),h=c.exports.useMemo(()=>a+r+p+m+i,[a,r,p,m,i]),N=c.exports.useMemo(()=>s*(h/100)+t*(18/100)+o,[s,h,t,o]);return l(_,{children:[l("div",{className:S.container,children:[e("span",{className:S.title,children:"Salarios + vacaciones: "}),l("span",{className:S.money,children:[e(c.exports.Suspense,{fallback:e("div",{}),children:e(an,{})})," "]}),e("span",{className:S.title,children:"Total de d\xE9cimo: "}),l("span",{className:S.money,children:[f(t)," "]}),e("span",{className:S.title,children:"Porcentaje de d\xE9cimo: "}),e("span",{className:S.money,children:"18% "})]}),l("div",{className:S.container,children:[e("span",{className:S.title,children:"Porcentaje total: "}),l("span",{className:S.money,children:[Po(h),"% "]}),e("span",{className:S.title,children:"Cuota obrero patronal: "}),e("span",{className:S.money,children:f(N)})]})]})},rn=()=>l(Z,{variant:"outlined",children:[e(w,{variant:"h5",textTransform:"uppercase",p:1,children:"Planilla - SIPE"}),e("div",{className:u.tableResponsive,children:l("table",{className:u.table,children:[e(on,{}),l("tbody",{children:[e(nn,{}),e(tn,{})]})]})}),e(sn,{})]}),Ne=n=>{const[,o]=c.exports.useContext(F),s=c.exports.useMemo(()=>o.negocios[n].contratos.map(a=>Number(a.indemnizacion)).some(a=>a>0),[]),t=c.exports.useMemo(()=>o.negocios[n].contratos.map(a=>Number(a.preaviso)).some(a=>a>0),[]);return{isIndemnizacion:s,isPreaviso:t}},cn=({index:n})=>{const{isIndemnizacion:o,isPreaviso:s}=Ne(n);return e("thead",{children:l("tr",{children:[e("th",{className:u.header,children:"#"}),e("th",{className:u.header,children:"Nombre"}),e("th",{className:u.header,children:"C\xE9dula"}),e("th",{className:u.header,children:"Salario"}),e("th",{className:u.header,children:"D\xE9cimo"}),e("th",{className:u.header,children:"Vacaciones"}),e("th",{className:u.header,children:"Imp. Renta"}),e("th",{className:u.header,children:"Horas extras"}),e("th",{className:u.header,children:"Comisiones"}),o&&e("th",{className:u.header,children:"Indemnizaci\xF3n"}),s&&e("th",{className:u.header,children:"Preaviso"}),e("th",{className:u.header,children:"Total"})]})})},ln=({index:n})=>{const[,o]=c.exports.useContext(F),{isIndemnizacion:s,isPreaviso:t}=Ne(n);return e(_,{children:o.negocios[n].contratos.map((a,r)=>l("tr",{className:u.row,children:[e("td",{className:u.column,children:r+1}),l("td",{className:u.column,children:[a.nombre," ",a.apellido]}),e("td",{className:u.column,children:a.identificacion}),e("td",{className:u.column,children:f(a.salario)}),e("td",{className:u.column,children:f(a.decimo)}),e("td",{className:u.column,children:f(a.vacaciones)}),e("td",{className:u.column,children:f(a.impuesto_renta)}),e("td",{className:u.column,children:f(a.horas_extras)}),e("td",{className:u.column,children:f(a.comisiones)}),s&&e("td",{className:u.column,children:f(a.indemnizacion)}),t&&e("td",{className:u.column,children:f(a.preaviso)}),e("td",{className:u.column,children:f(Number(a.salario)+Number(a.decimo)+Number(a.vacaciones)+Number(a.impuesto_renta)+Number(a.horas_extras)+Number(a.comisiones)+Number(a.indemnizacion)+Number(a.preaviso))})]},`${a.id_contrato}`))})},dn=({index:n})=>{const[,o]=c.exports.useContext(F),s=c.exports.useMemo(()=>o.negocios[n].contratos.map(t=>Number(t.salario)+Number(t.vacaciones)+Number(t.horas_extras)+Number(t.comisiones)).reduce((t,a)=>t+a),[o,n]);return e(_,{children:f(s)})},V=({index:n,name:o})=>{const[,s]=c.exports.useContext(F),t=c.exports.useMemo(()=>s.negocios[n].contratos.map(a=>Number(a[o])).reduce((a,r)=>a+r),[]);return e("td",{className:u.column,children:f(t)})},mn=({index:n})=>{const{isIndemnizacion:o,isPreaviso:s}=Ne(n),[,t]=c.exports.useContext(F),a=c.exports.useMemo(()=>t.negocios[n].contratos.map(r=>Number(r.salario)+Number(r.decimo)+Number(r.vacaciones)+Number(r.impuesto_renta)+Number(r.horas_extras)+Number(r.comisiones)+Number(r.indemnizacion)+Number(r.preaviso)).reduce((r,p)=>r+p),[]);return l("tr",{className:u.row,children:[e("td",{className:u.column}),e("td",{className:u.column,children:"Totales"}),e("td",{className:u.column}),e(V,{index:n,name:"salario"}),e(V,{index:n,name:"decimo"}),e(V,{index:n,name:"vacaciones"}),e(V,{index:n,name:"impuesto_renta"}),e(V,{index:n,name:"horas_extras"}),e(V,{index:n,name:"comisiones"}),o&&e(V,{index:n,name:"indemnizacion"}),s&&e(V,{index:n,name:"preaviso"}),e("td",{className:u.column,children:f(a)})]})},un=({index:n})=>{const[,o]=c.exports.useContext(F),s=c.exports.useMemo(()=>o.negocios[n].contratos.map(d=>Number(d.impuesto_renta)).reduce((d,b)=>d+b),[o,n]),t=c.exports.useMemo(()=>o.negocios[n].contratos.map(d=>Number(d.salario)+Number(d.vacaciones)+Number(d.horas_extras)+Number(d.comisiones)).reduce((d,b)=>d+b),[o,n]),a=c.exports.useMemo(()=>o.negocios[n].contratos.map(d=>Number(d.decimo)).reduce((d,b)=>d+b),[o,n]),r=c.exports.useMemo(()=>9.75/100,[]),p=c.exports.useMemo(()=>12.25/100,[]),m=c.exports.useMemo(()=>1.25/100,[]),i=c.exports.useMemo(()=>1.5/100,[]),h=c.exports.useMemo(()=>Number((o==null?void 0:o.riesgo_profesional)||2.1)/100,[o]),N=c.exports.useMemo(()=>Math.floor((r+p+m+i+h)*100*100)/100,[r,p,m,i,h]),g=c.exports.useMemo(()=>t*(N/100)+a*(18/100)+s,[t,N,a,s]);return l(_,{children:[l("div",{className:S.container,children:[e("span",{className:S.title,children:"Porcentaje total: "}),l("span",{className:S.money,children:[N,"% "]}),e("span",{className:S.title,children:"Cuotra obrero patronal: "}),e("span",{className:S.money,children:f(g)})]}),l("div",{className:S.container,children:[e("span",{className:S.title,children:"Total de d\xE9cimo: "}),l("span",{className:S.money,children:[f(a)," "]}),e("span",{className:S.title,children:"Porcentaje de d\xE9cimo: "}),l("span",{className:S.money,children:[a*(18/100),"% "]})]})]})},pn=()=>{const[,n]=c.exports.useContext(F);return n.negocios.length===1?e(_,{}):l(_,{children:[e(w,{variant:"h4",textTransform:"uppercase",textAlign:"center",children:"Planilla seccionada por negocios"}),n.negocios.map((o,s)=>l(Z,{variant:"outlined",children:[l(w,{variant:"h5",textTransform:"uppercase",p:1,color:s===0?"red":"orange",children:[o.tipo," ",o.nombre]}),e("div",{className:u.tableResponsive,children:l("table",{className:u.table,children:[e(cn,{index:s}),l("tbody",{children:[e(ln,{index:s}),e(mn,{index:s})]})]})}),l(w,{variant:"h5",p:1,children:["Salarios + vacaciones ="," ",e("strong",{children:e(dn,{index:s})})]}),e(un,{index:s})]},`${o.id_negocio}`))]})};var be={},hn=no.exports;Object.defineProperty(be,"__esModule",{value:!0});var mo=be.default=void 0,gn=hn(oo),xn=to,Nn=(0,gn.default)((0,xn.jsx)("path",{d:"m14.5 14.2 2.9 1.7-.8 1.3L13 15v-5h1.5v4.2zM22 14c0 4.41-3.59 8-8 8-2.02 0-3.86-.76-5.27-2H4c-1.15 0-2-.85-2-2V9c0-1.12.89-1.96 2-2v-.5C4 4.01 6.01 2 8.5 2c2.34 0 4.24 1.79 4.46 4.08.34-.05.69-.08 1.04-.08 4.41 0 8 3.59 8 8zM6 7h5v-.74C10.88 4.99 9.8 4 8.5 4 7.12 4 6 5.12 6 6.5V7zm14 7c0-3.31-2.69-6-6-6s-6 2.69-6 6 2.69 6 6 6 6-2.69 6-6z"}),"LockClock");mo=be.default=Nn;const q=c.exports.createContext({}),bn=({children:n})=>{const[o,s]=c.exports.useState(!1),t=h=>s(h),a=J(),r=J(),p=J(),m=J(),i=K();return e(q.Provider,{value:{editing:o,setEditing:t,modalDownload:a,modalEditar:r,modalGenerarPassword:p,modalSend:m,fetchDownload:i},children:n})},_n=()=>{const{id:n}=ee(),{fetchDownload:o,modalDownload:s}=c.exports.useContext(q),[,t]=o,{setOpen:a}=s,[,r]=c.exports.useContext(F),p=c.exports.useMemo(()=>`PLANILLA-${ge(r==null?void 0:r.mes,"MMMM-yyyy")}-${(r==null?void 0:r.tipo)||""} ${(r==null?void 0:r.nombre_negocio)||""}`.replaceAll(" ","-").toUpperCase(),[r]);return()=>{t(`/admin/planillas/${n}/generar`,{isBlob:!0}).then(i=>{i.data&&ko(i.data,`${p}.xlsx`)}).finally(()=>{a()})}},fn=()=>{const[,n]=c.exports.useContext(F),o=c.exports.useContext(q),{modalEditar:s,modalGenerarPassword:t,modalSend:a}=o,{setOpen:r}=s,{authState:p}=c.exports.useContext(Fo),{tipo:m}=p,i=_n();return e(_,{children:e(zo,{acciones:[...m&&["Super","Administrador"].includes(m)?[{title:"Generar contrase\xF1a",icon:mo,onClick:()=>t.setOpen()}]:[],{title:"Generar SIPE",icon:Ao,onClick:()=>i()},...n.fecha_send_sipe?[]:[{title:"Marcar como enviada al SIPE",icon:Ro,onClick:()=>a.setOpen()}],...Boolean(Number(n.can_edit))?[{title:"Editar",icon:Do,onClick:()=>r()}]:[]]})})},j=se().typeError("Ingresar un valor").positive("La cantidad del salario debe ser positiva").min(0,"La cantidad del salario debe ser mayor a 0").max(9e10,"M\xE1ximo 10 d\xEDgitos").required("Ingresar un valor").test("check-decimal","Favor ingresar m\xE1ximo dos decimales",n=>!!(n===0||n&&n.toString().match(Ho))),vn=I().shape({mes:pe().typeError("Favor ingresar el mes de la planilla a realizar").required("Favor ingresar el mes de la planilla a realizar"),notas:R().trim().nullable(!0).notRequired(),negocios:Ke().of(I().shape({id_negocio:se().typeError("Favor ingresar el negocio").positive("Favor ingresar el negocio").integer("Favor ingresar el negocio").required("Favor ingresar el negocio"),contratos:Ke().of(I().shape({salario:j,decimo:j,vacaciones:j,impuesto_renta:j,horas_extras:j,comisiones:j,preaviso:j,indemnizacion:j,id_contrato:se().typeError("El id es requerido").required("El id es requerido").positive("El id debe ser un n\xFAmero positivo").integer("El id debe ser un n\xFAmero entero")})).min(1,"Favor ingresar al menos un empleado")})).min(1,"Favor ingresar al menos un negocio")}),Q=c.exports.createContext({}),Cn=({children:n})=>{const o=c.exports.useContext(F),[,s]=o,t=c.exports.useMemo(()=>["4","8","12"].includes(ge(s.mes,"M")),[]),a=re({mode:"onSubmit",resolver:ce(vn),defaultValues:{notas:Mo(s.notas),mes:s.mes,negocios:s.negocios.map(i=>k(v({},i),{contratos:i.contratos.map(h=>k(v({},h),{complete_name:`${h.nombre} ${h.apellido}`,identificacion:h.identificacion}))}))}}),r=ao({control:a.control,name:"negocios"}),p=D({control:a.control,name:"negocios"}),m=K();return e(de,k(v({},a),{children:e(Q.Provider,{value:{fieldsNegocios:r,negocios:p,isDecimo:t,mainNegocioId:s.id_negocio,clienteId:s.id_cliente,fetcherSaveData:m},children:n})}))},Sn="_paperTables_7zus3_1",Fn="_fechaTables_7zus3_5",yn="_paperNotas_7zus3_11",En="_tableResponsive_7zus3_15",wn="_table_7zus3_15",$n="_lastedTableResponsive_7zus3_25",Tn="_header_7zus3_30",Mn="_column_7zus3_50",Pn="_row_7zus3_57",An="_columnClick_7zus3_71",Rn="_columnClickEdit_7zus3_76",zn="_icon_7zus3_106",Dn="_inputDecimal_7zus3_110";var x={paperTables:Sn,fechaTables:Fn,paperNotas:yn,tableResponsive:En,table:wn,lastedTableResponsive:$n,header:Tn,column:Mn,row:Pn,columnClick:An,columnClickEdit:Rn,icon:zn,inputDecimal:Dn};const B=({negocioIndex:n,name:o})=>{const{control:s}=A(),t=D({control:s,name:`negocios.${n}.contratos`}),a=c.exports.useMemo(()=>t&&t.length>0?t.map(r=>Number(r[o]||0)).reduce((r,p)=>r+p):0,[t]);return e(_,{children:f(a)})},kn=({negocioIndex:n})=>{const{control:o}=A(),s=D({control:o,name:`negocios.${n}.contratos`}),t=c.exports.useMemo(()=>s&&s.length>0?s.map(a=>Number(a.salario||0)+Number(a.decimo||0)+Number(a.vacaciones||0)+Number(a.impuesto_renta||0)+Number(a.horas_extras||0)+Number(a.comisiones||0)+Number(a.indemnizacion||0)+Number(a.preaviso||0)).reduce((a,r)=>a+r):0,[s]);return e(_,{children:f(t)})},In=({negocioIndex:n})=>{const{control:o}=A(),s=D({control:o,name:`negocios.${n}.contratos`});return c.exports.useMemo(()=>s&&s.length>0&&s.map(a=>Number(a.vacaciones||0)).reduce((a,r)=>a+r)>0,[s])?l(_,{children:[e("td",{className:x.column,children:e(B,{name:"indemnizacion",negocioIndex:n})}),e("td",{className:x.column,children:e(B,{name:"preaviso",negocioIndex:n})})]}):e(_,{})},Hn=({negocioIndex:n})=>l("tr",{className:x.row,children:[e("td",{className:x.column}),e("td",{className:x.column,children:"Totales"}),e("td",{className:x.column}),e("td",{className:x.column,children:e(B,{name:"salario",negocioIndex:n})}),e("td",{className:x.column,children:e(B,{name:"decimo",negocioIndex:n})}),e("td",{className:x.column,children:e(B,{name:"vacaciones",negocioIndex:n})}),e("td",{className:x.column,children:e(B,{name:"impuesto_renta",negocioIndex:n})}),e("td",{className:x.column,children:e(B,{name:"horas_extras",negocioIndex:n})}),e("td",{className:x.column,children:e(B,{name:"comisiones",negocioIndex:n})}),e(In,{negocioIndex:n}),e("td",{colSpan:2,className:x.column,children:e(kn,{negocioIndex:n})})]}),qn=({negocioIndex:n,contratoIndex:o})=>{const{control:s}=A(),t=D({control:s,name:`negocios.${n}.contratos.${o}`}),a=c.exports.useMemo(()=>Number(t.salario||0)+Number(t.decimo||0)+Number(t.vacaciones||0)+Number(t.impuesto_renta||0)+Number(t.horas_extras||0)+Number(t.comisiones||0)+Number(t.indemnizacion||0)+Number(t.preaviso||0),[t]);return e("span",{children:f(a)})},On=({negocioIndex:n})=>{const{control:o}=A(),s=D({control:o,name:`negocios.${n}.contratos`});return c.exports.useMemo(()=>s&&s.length>0&&s.map(a=>Number(a.vacaciones||0)).reduce((a,r)=>a+r)>0,[s])?l(_,{children:[e("th",{className:x.header,children:"Indemnizaci\xF3n"}),e("th",{className:x.header,children:"Preaviso"})]}):e(_,{})},Ln=({negocioIndex:n})=>e("thead",{children:l("tr",{children:[e("th",{className:x.header,children:"#"}),e("th",{className:x.header,children:"Nombre"}),e("th",{className:x.header,children:"C\xE9dula"}),e("th",{className:x.header,children:"Salario"}),e("th",{className:x.header,children:"D\xE9cimo"}),e("th",{className:x.header,children:"Vacaciones"}),e("th",{className:x.header,children:"Imp. Renta"}),e("th",{className:x.header,children:"Horas extras"}),e("th",{className:x.header,children:"Comisiones"}),e(On,{negocioIndex:n}),e("th",{className:x.header,children:"Total"}),e("th",{className:x.header,children:"Remover"})]})}),Vn=({negocioIndex:n,contratoIndex:o})=>{var m,i,h,N,g,d,b,C,y,M,P,E,H,$,T,O,U,te;const{control:s,formState:t}=A(),{errors:a}=t,r=D({control:s,name:`negocios.${n}.contratos`});return c.exports.useMemo(()=>r&&r.length>0&&r.map(X=>Number(X.vacaciones||0)).reduce((X,ie)=>X+ie)>0,[r])?l(_,{children:[e("td",{className:x.column,children:e(W,{className:x.inputDecimal,name:`negocios.${n}.contratos.${o}.indemnizacion`,label:"Indemnizaci\xF3n",fullWidth:!0,error:!!((N=(h=(i=(m=a==null?void 0:a.negocios)==null?void 0:m[Number(n)])==null?void 0:i.contratos)==null?void 0:h[Number(o)])!=null&&N.indemnizacion),helperText:(y=(C=(b=(d=(g=a==null?void 0:a.negocios)==null?void 0:g[Number(n)])==null?void 0:d.contratos)==null?void 0:b[Number(o)])==null?void 0:C.indemnizacion)==null?void 0:y.message,size:"small"})}),e("td",{className:x.column,children:e(W,{className:x.inputDecimal,name:`negocios.${n}.contratos.${o}.preaviso`,label:"Preaviso",fullWidth:!0,error:!!((H=(E=(P=(M=a==null?void 0:a.negocios)==null?void 0:M[Number(n)])==null?void 0:P.contratos)==null?void 0:E[Number(o)])!=null&&H.preaviso),helperText:(te=(U=(O=(T=($=a==null?void 0:a.negocios)==null?void 0:$[Number(n)])==null?void 0:T.contratos)==null?void 0:O[Number(o)])==null?void 0:U.preaviso)==null?void 0:te.message,size:"small"})})]}):e(_,{})},jn=({negocioIndex:n,contratoIndex:o})=>{var m,i,h,N,g,d,b,C,y;const{control:s,setValue:t,formState:a}=A(),{errors:r}=a,p=D({control:s,name:`negocios.${n}.contratos.${o}.salario`});return yo(()=>{(()=>{p&&p!==""&&Number(p)>=800?t(`negocios.${n}.contratos.${o}.impuesto_renta`,""):t(`negocios.${n}.contratos.${o}.impuesto_renta`,0)})()},[p]),e(W,{className:x.inputDecimal,name:`negocios.${n}.contratos.${o}.impuesto_renta`,label:"Imp. Renta",fullWidth:!0,error:!!((N=(h=(i=(m=r==null?void 0:r.negocios)==null?void 0:m[Number(n)])==null?void 0:i.contratos)==null?void 0:h[Number(o)])!=null&&N.impuesto_renta),helperText:(y=(C=(b=(d=(g=r==null?void 0:r.negocios)==null?void 0:g[Number(n)])==null?void 0:d.contratos)==null?void 0:b[Number(o)])==null?void 0:C.impuesto_renta)==null?void 0:y.message,size:"small"})},ne=c.exports.createContext({}),Bn=({children:n,clienteId:o,mainNegocioId:s,negocioIndex:t,isDecimo:a})=>{const r=J(),{control:p}=A(),{fields:m,remove:i,append:h,update:N}=ao({control:p,name:`negocios.${t}.contratos`});return e(ne.Provider,{value:{modalAgregarContrato:r,clienteId:o,mainNegocioId:s,negocioIndex:t,fields:m,remove:i,append:h,update:N,isDecimo:a},children:n})},ue=c.exports.createContext({}),Wn=({children:n})=>{const[o,s]=c.exports.useState(null),t=c.exports.useCallback((r,p)=>{s({negocioIndex:r,contratoIndex:p})},[]),a=c.exports.useCallback(()=>s(null),[]);return e(ue.Provider,{value:{negocioContrato:o,setNegocioContrato:t,setNullNegocioContrato:a},children:n})},Gn=n=>{const{negocioIndex:o}=n,{formState:s}=A(),{errors:t}=s,{fields:a,remove:r}=c.exports.useContext(ne),{setNegocioContrato:p}=c.exports.useContext(ue);return e("div",{className:x.tableResponsive,children:l("table",{className:x.table,children:[e(Ln,{negocioIndex:o}),l("tbody",{children:[a==null?void 0:a.map((m,i)=>{var h,N,g,d,b,C,y,M,P,E,H,$,T,O,U,te,X,ie,fe,ve,Ce,Se,Fe,ye,Ee,we,$e,Te,Me,Pe,Ae,Re,ze,De,ke,Ie,He,qe,Oe,Le,Ve,je,Be,We,Ge;return l("tr",{className:x.row,children:[e("td",{className:x.column,children:i+1}),l("td",{className:`${x.column} ${x.columnClick}`,onClick:()=>p(Number(o),i),children:[e("div",{className:x.columnClickEdit,children:e("span",{})}),l("span",{children:[m.nombre," ",m.apellido]})]}),e("td",{className:x.column,children:e("span",{children:m.identificacion})}),e("td",{className:x.column,children:e(W,{className:x.inputDecimal,name:`negocios.${o}.contratos.${i}.salario`,label:"Salario",fullWidth:!0,error:!!((d=(g=(N=(h=t==null?void 0:t.negocios)==null?void 0:h[Number(o)])==null?void 0:N.contratos)==null?void 0:g[i])!=null&&d.salario),helperText:(P=(M=(y=(C=(b=t==null?void 0:t.negocios)==null?void 0:b[Number(o)])==null?void 0:C.contratos)==null?void 0:y[i])==null?void 0:M.salario)==null?void 0:P.message,size:"small"})}),e("td",{className:x.column,children:e(W,{className:x.inputDecimal,name:`negocios.${o}.contratos.${i}.decimo`,label:"D\xE9cimo",fullWidth:!0,error:!!((T=($=(H=(E=t==null?void 0:t.negocios)==null?void 0:E[Number(o)])==null?void 0:H.contratos)==null?void 0:$[i])!=null&&T.decimo),helperText:(ie=(X=(te=(U=(O=t==null?void 0:t.negocios)==null?void 0:O[Number(o)])==null?void 0:U.contratos)==null?void 0:te[i])==null?void 0:X.decimo)==null?void 0:ie.message,size:"small"})}),e("td",{className:x.column,children:e(W,{className:x.inputDecimal,name:`negocios.${o}.contratos.${i}.vacaciones`,label:"Vacaciones",fullWidth:!0,error:!!((Se=(Ce=(ve=(fe=t==null?void 0:t.negocios)==null?void 0:fe[Number(o)])==null?void 0:ve.contratos)==null?void 0:Ce[i])!=null&&Se.vacaciones),helperText:($e=(we=(Ee=(ye=(Fe=t==null?void 0:t.negocios)==null?void 0:Fe[Number(o)])==null?void 0:ye.contratos)==null?void 0:Ee[i])==null?void 0:we.vacaciones)==null?void 0:$e.message,size:"small"})}),e("td",{className:x.column,children:e(jn,{negocioIndex:o,contratoIndex:i})}),e("td",{className:x.column,children:e(W,{className:x.inputDecimal,name:`negocios.${o}.contratos.${i}.horas_extras`,label:"Horas extras",fullWidth:!0,error:!!((Ae=(Pe=(Me=(Te=t==null?void 0:t.negocios)==null?void 0:Te[Number(o)])==null?void 0:Me.contratos)==null?void 0:Pe[i])!=null&&Ae.horas_extras),helperText:(Ie=(ke=(De=(ze=(Re=t==null?void 0:t.negocios)==null?void 0:Re[Number(o)])==null?void 0:ze.contratos)==null?void 0:De[i])==null?void 0:ke.horas_extras)==null?void 0:Ie.message,size:"small"})}),e("td",{className:x.column,children:e(W,{className:x.inputDecimal,name:`negocios.${o}.contratos.${i}.comisiones`,label:"Comisiones",fullWidth:!0,error:!!((Le=(Oe=(qe=(He=t==null?void 0:t.negocios)==null?void 0:He[Number(o)])==null?void 0:qe.contratos)==null?void 0:Oe[i])!=null&&Le.comisiones),helperText:(Ge=(We=(Be=(je=(Ve=t==null?void 0:t.negocios)==null?void 0:Ve[Number(o)])==null?void 0:je.contratos)==null?void 0:Be[i])==null?void 0:We.comisiones)==null?void 0:Ge.message,size:"small"})}),e(Vn,{negocioIndex:o,contratoIndex:i}),e("td",{className:x.column,children:e(qn,{negocioIndex:o,contratoIndex:i})}),e("td",{className:`${x.column} ${x.icon}`,children:e(ro,{color:"error",onClick:()=>r(i),children:e(so,{})})})]},`${m.id}`)}),e(Hn,{negocioIndex:o})]})]})})},Un=(n,o)=>{const[,s,,,,t]=o,{negocios:a}=c.exports.useContext(Q),{append:r,mainNegocioId:p,clienteId:m,modalAgregarContrato:i,isDecimo:h}=c.exports.useContext(ne),{setHide:N}=i;return{handleAppenContrato:async d=>{if(d.seleccion==="old"){const b=a.flatMap(y=>y.contratos);(b==null?void 0:b.find(y=>Number(y.id_contrato)===Number(d.empleado_selected.id)))?n.setError("empleado_selected.id",{type:"manual",message:"El empleado ya existe en la lista actual. Favor seleccionar otro o crear uno nuevo."}):(r({salario:"",decimo:h?"":0,vacaciones:0,preaviso:0,indemnizacion:0,impuesto_renta:0,id_contrato:Number(d.empleado_selected.id),nombre:d.empleado_selected.nombre||"",apellido:d.empleado_selected.apellido||"",complete_name:d.empleado_selected.complete_name||"",identificacion:d.empleado_selected.identificacion||"",horas_extras:0,comisiones:0,tipo_identificacion:d.empleado_selected.tipo_identificacion||"",seguro:d.empleado_selected.seguro||d.empleado_selected.identificacion||"",conyuge_no_trabaja:d.empleado_selected.conyuge_no_trabaja}),N(),n.reset({seleccion:""}),t())}else{const b=await s(`/admin/contratos/${p}/${m}/add-contrato-planilla`,{method:"POST",data:k(v({},d.new_empleado),{negocio:p})});b.data&&(r({salario:"",decimo:h?"":0,vacaciones:0,preaviso:0,indemnizacion:0,impuesto_renta:0,id_contrato:b.data.id,nombre:d.new_empleado.nombre||"",apellido:d.new_empleado.apellido||"",complete_name:`${d.new_empleado.nombre} ${d.new_empleado.apellido}`,identificacion:d.new_empleado.identificacion||"",horas_extras:0,comisiones:0,tipo_identificacion:d.new_empleado.tipoIdentificacion||"",seguro:d.new_empleado.seguro||d.new_empleado.identificacion||"",conyuge_no_trabaja:d.new_empleado.conyuge_no_trabaja}),N(),n.reset({seleccion:""}),t())}}}},uo=I().shape({seleccion:R().trim().required("Favor seleccionar la forma de agregar al empleado").test("check","Favor seleccionar solo de la lista",n=>!!(n&&["new","old"].includes(n))),empleado_selected:I().nullable().when("seleccion",{is:"old",then:I().shape({id:se().typeError("Favor seleccionar el empleado").positive("Favor seleccionar el empleado").integer("Favor seleccionar el empleado"),nombre:R().trim().required("Favor de ingresar el apellido").matches(ae,"Favor ingresar solo letras del abecedario"),apellido:R().trim().required("Favor de ingresar el apellido").matches(ae,"Favor ingresar solo letras del abecedario"),complete_name:R().trim().required("Favor de ingresar el apellido").matches(ae,"Favor ingresar solo letras del abecedario"),identificacion:R().trim().required("Favor seleccionar el empleado"),fecha_ini:pe().transform((n,o)=>o===""?null:n).typeError("Favor seleccionar el empleado").nullable(!0).default(null).notRequired(),dv:R().typeError("Favor seleccionar el empleado").nullable(!0).notRequired().test("check","Favor ingresar un n\xFAmero de dos decimales",n=>!!(!n||n&&n.match(Qe)))}).typeError("Favor seleccionar el empleado")}),new_empleado:I().typeError("Favor ingresar el empleado").nullable().when("seleccion",{is:"new",then:I().shape({nombre:R().trim().required("Favor de ingresar el nombre").matches(ae,"Favor ingresar solo letras del abecedario"),apellido:R().trim().required("Favor de ingresar el apellido").matches(ae,"Favor ingresar solo letras del abecedario"),dv:R().trim().nullable(!0).notRequired().test("check","Favor ingresar un n\xFAmero de dos decimales",n=>!!(!n||n&&n.match(Qe))),tipoIdentificacion:R().trim().required("Favor de ingresar el tipo de identificaci\xF3n").test("is-identificacion","Favor de ingresar un tipo de identificaci\xF3n v\xE1lido: "+[...he,"C\xE9dula No verificada"].join(", "),n=>[...he,"C\xE9dula No verificada"].includes(n)),identificacion:R().trim().required("Favor de ingresar la c\xE9dula o pasaporte").matches(Xe,"Favor de ingresar solo n\xFAmeros, letras en may\xFAscula y/o guiones (-)"),seguro:R().trim().nullable(!0).notRequired().test("check-seguro","Favor de ingresar solo n\xFAmeros, letras en may\xFAscula y/o guiones (-)",n=>!!(!n||n&&new RegExp(Xe).test(n))),fecha_ini:pe().transform((n,o)=>o===""?null:n).typeError("Favor de seleccionar la fecha de inicio del empleado").nullable(!0).default(null).notRequired()})})}),po=()=>{var m,i,h,N,g,d,b,C,y,M,P,E,H,$,T,O;const n=A(),{register:o,formState:s,control:t,setValue:a}=n,{errors:r}=s,p=D({control:t,name:"new_empleado.conyuge_no_trabaja"});return l(z,{spacing:1,style:{marginTop:10},children:[e(co,{control:t,label:"Tipo de identificaci\xF3n",options:[...he,"C\xE9dula No verificada"],error:!!((m=r==null?void 0:r.new_empleado)!=null&&m.tipoIdentificacion),helperText:(h=(i=r==null?void 0:r.new_empleado)==null?void 0:i.tipoIdentificacion)==null?void 0:h.message,name:"new_empleado.tipoIdentificacion",required:!0}),e(Y,v({label:"Nombre",fullWidth:!0,error:!!((N=r==null?void 0:r.new_empleado)!=null&&N.nombre),helperText:(d=(g=r==null?void 0:r.new_empleado)==null?void 0:g.nombre)==null?void 0:d.message,required:!0},o("new_empleado.nombre"))),e(Y,v({label:"Apellido",fullWidth:!0,error:!!((b=r==null?void 0:r.new_empleado)!=null&&b.apellido),helperText:(y=(C=r==null?void 0:r.new_empleado)==null?void 0:C.apellido)==null?void 0:y.message,required:!0},o("new_empleado.apellido"))),e(Y,v({label:"Identificaci\xF3n",fullWidth:!0,error:!!((M=r==null?void 0:r.new_empleado)!=null&&M.identificacion),helperText:(H=(E=(P=r==null?void 0:r.new_empleado)==null?void 0:P.identificacion)==null?void 0:E.message)!=null?H:"C\xE9dula o Pasaporte",required:!0},o("new_empleado.identificacion"))),e(Y,v({label:"Seguro social",fullWidth:!0,error:!!(($=r==null?void 0:r.new_empleado)!=null&&$.seguro),helperText:(O=(T=r==null?void 0:r.new_empleado)==null?void 0:T.seguro)==null?void 0:O.message},o("new_empleado.seguro"))),e(qo,{control:e(io,{checked:p===4,onChange:U=>{a("new_empleado.conyuge_no_trabaja",U.target.checked?4:1)}}),label:"Casado(a) y c\xF3nyuge no trabaja"})]})},Jn=()=>{const{mainNegocioId:n,clienteId:o}=c.exports.useContext(ne),{control:s,formState:t}=A(),{errors:a}=t;return e(Io,{control:s,name:"empleado_selected",render:({field:r})=>{var p,m,i,h,N;return e(Vo,k(v({},r),{urlFetch:`/admin/contratos/${n}/${o}/input-planilla`,enableFirst:!0,onChange:(g,d)=>r.onChange(d),inputProps:{label:"Empleado",helperText:(m=(p=a==null?void 0:a.empleado_selected)==null?void 0:p.id)==null?void 0:m.message,error:!!((N=(h=(i=t.errors)==null?void 0:i.empleado_selected)==null?void 0:h.id)!=null&&N.message)},fullWidth:!0,isOptionEqualToValue:(g,d)=>g.id===d.id,getOptionLabel:g=>g.complete_name||"",renderOption:(g,d,{selected:b})=>l(jo,k(v({},g),{style:{textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e(io,{icon:e(Oo,{}),checkedIcon:e(Lo,{}),style:{marginRight:8},checked:b}),l("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:[l(w,{variant:"body1",children:[d.nombre," ",d.apellido]}),e(w,{variant:"body2",children:d.identificacion})]})]}))}))}})},Kn=()=>{var a;const{control:n,formState:o}=A(),{errors:s}=o,t=D({control:n,name:"seleccion"});return l(_,{children:[e(co,{label:"Selecci\xF3n",options:["Insertar nuevo empleado","Empleado de la lista actual de contratos"],values:["new","old"],error:!!(s!=null&&s.seleccion),helperText:(a=s==null?void 0:s.seleccion)==null?void 0:a.message,name:"seleccion",required:!0}),t==="old"&&e("div",{style:{marginTop:10},children:e(Jn,{})}),t==="new"&&e(po,{})]})},Ye=()=>{const n=c.exports.useContext(ne),{modalAgregarContrato:o}=n,{modalState:s,setHide:t}=o,a=re({mode:"all",resolver:ce(uo)}),r=K(),{handleAppenContrato:p}=Un(a,r),[,,,m,,i]=r,h=c.exports.useCallback(()=>{t(),i(),a.reset({seleccion:""})},[]);return e(G,{state:s,title:"Agregar Empleado",setHide:()=>h(),cancelBotton:{text:"Cerrar",actionFunction:()=>h()},actionButton:{text:"Agregar",actionFunction:a.handleSubmit(p)},children:l(de,k(v({},a),{children:[m&&e(me,{severity:"error",variant:"outlined",sx:{width:"100%",mb:2},children:m==null?void 0:m.message}),e(Kn,{})]}))})},Qn=n=>{const{reset:o}=n,s=c.exports.useContext(ue),{negocioContrato:t,setNullNegocioContrato:a}=s,{control:r}=A(),p=D({control:r,name:"negocios"}),[m,i,h,N,,g]=K(),{update:d}=c.exports.useContext(ne);c.exports.useEffect(()=>{(()=>{if(t){const{negocioIndex:M,contratoIndex:P}=t,E=p[M].contratos[P];o({seleccion:"new",new_empleado:k(v({},E),{tipoIdentificacion:E.tipo_identificacion,seguro:E.seguro===E.identificacion?"":E.seguro})})}else o({seleccion:"new",new_empleado:{}})})()},[t]);const b=y=>{const{negocioIndex:M,contratoIndex:P}=t,E=p[M].contratos[P];i(`/admin/contratos/${E.id_contrato}/edit-planilla`,{method:"POST",data:y.new_empleado}).then(H=>{if(H.data){const $=y.new_empleado,T=E;T.apellido=$.apellido||"",T.nombre=$.nombre||"",T.complete_name=`${$.nombre} ${$.apellido}`,T.tipo_identificacion=$.tipoIdentificacion||"",T.identificacion=$.identificacion||"",T.seguro=$.seguro||"",T.conyuge_no_trabaja=$.conyuge_no_trabaja,d(P,v({},T)),o({seleccion:"new",new_empleado:{}}),a(),g()}})};return{handleSetHide:c.exports.useCallback(()=>{a(),g(),o({seleccion:"new",new_empleado:{}})},[]),onSubmit:b,isLoading:m,response:h,error:N}},Xn=()=>{const n=c.exports.useContext(ue),{negocioContrato:o}=n,s=re({mode:"all",resolver:ce(uo)}),{handleSubmit:t}=s,a=Qn(s),{handleSetHide:r,onSubmit:p,isLoading:m}=a,{response:i,error:h}=a;return l(G,{state:o!==null,setHide:()=>r(),title:"Editar Empleado",actionButton:{text:"Guardar",actionFunction:t(p),isLoading:m},children:[(i||h)&&e(me,{variant:"outlined",severity:i?"success":"error",children:(i==null?void 0:i.message)||(h==null?void 0:h.message)}),e(de,k(v({},s),{children:e(po,{})}))]})},Yn=c.exports.lazy(()=>oe(()=>import("./TotalDescuento2.js"),["assets/TotalDescuento2.js","assets/index.js","assets/index2.css","assets/yup.module.js","assets/string.helper.js","assets/regex.js","assets/numberHelper.js","assets/numberHelper.css","assets/HeaderTitle.js","assets/Typography.js","assets/Divider.js","assets/useFetcherEarly.js","assets/NotFoundResults.js","assets/Grid.js","assets/Loader.js","assets/CircularProgress.js","assets/emotion-react.browser.esm.js","assets/headerPlanilla.module.js","assets/headerPlanilla.module.css","assets/Stack.js","assets/Paper.js","assets/FileDownload.js","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/ScheduleSend.js","assets/StyledSpeedDial.js","assets/Assignment.js","assets/FabButtonAction.js","assets/react-is.production.min.js","assets/AssignmentRounded.js","assets/ButtonBase.js","assets/Tooltip.js","assets/Popper.js","assets/Portal.js","assets/isHostComponent.js","assets/Grow.js","assets/SpeedDial.module.js","assets/SpeedDial.module.css","assets/Backdrop.js","assets/Fade.js","assets/Edit.js","assets/useModal.js","assets/FileSaver.min.js","assets/array.js","assets/upperFirst.js","assets/Delete.js","assets/DecimalInput.js","assets/TextInput.js","assets/TextField.js","assets/useFormControl.js","assets/formControlState.js","assets/Modal2.js","assets/List.js","assets/outlinedInputClasses.js","assets/GlobalStyles.js","assets/CustomDecimal.js","assets/react-number-format.es.js","assets/IconButton.js","assets/Modal.js","assets/Close2.js","assets/ModalTransition.js","assets/CheckCircle.js","assets/DialogContent.js","assets/DialogActions.js","assets/LoadingButton.js","assets/Button.js","assets/constantsLists.js","assets/SelectHookForm.js","assets/Box.js","assets/MenuItem.js","assets/listItemIconClasses.js","assets/listItemTextClasses.js","assets/FormControlLabel.js","assets/Checkbox.js","assets/CheckBoxOutlineBlank.js","assets/AutocompleteServer.js","assets/useFetch.js","assets/useHttpService.js","assets/Autocomplete.js","assets/Close.js","assets/Chip.js","assets/ListItem.js","assets/Alert.js","assets/InputAsociarNegocio.js","assets/BootstrapTooltip.js","assets/ChipState.js","assets/SelectedCard.js","assets/TextEditor.js","assets/TextEditor.css","assets/index11.js","assets/InputAdornment.js","assets/BackgroundLoader.js"])),Ze=c.exports.lazy(()=>oe(()=>import("./AgregarNegocioContrato2.js"),["assets/AgregarNegocioContrato2.js","assets/AgregarNegocioContrato.css","assets/index.js","assets/index2.css","assets/PersonAdd.js","assets/jsx-runtime_commonjs-proxy.js","assets/createSvgIcon.js","assets/useControlled.js","assets/useIsFocusVisible.js","assets/AddBusiness.js","assets/Button.js","assets/ButtonBase.js","assets/emotion-react.browser.esm.js","assets/HeaderTitle.js","assets/Typography.js","assets/Divider.js","assets/useFetcherEarly.js","assets/NotFoundResults.js","assets/Grid.js","assets/Loader.js","assets/CircularProgress.js","assets/headerPlanilla.module.js","assets/headerPlanilla.module.css","assets/string.helper.js","assets/regex.js","assets/Stack.js","assets/Paper.js","assets/numberHelper.js","assets/numberHelper.css","assets/FileDownload.js","assets/ScheduleSend.js","assets/StyledSpeedDial.js","assets/Assignment.js","assets/FabButtonAction.js","assets/react-is.production.min.js","assets/AssignmentRounded.js","assets/Tooltip.js","assets/Popper.js","assets/Portal.js","assets/isHostComponent.js","assets/Grow.js","assets/SpeedDial.module.js","assets/SpeedDial.module.css","assets/Backdrop.js","assets/Fade.js","assets/Edit.js","assets/useModal.js","assets/FileSaver.min.js","assets/yup.module.js","assets/array.js","assets/upperFirst.js","assets/Delete.js","assets/DecimalInput.js","assets/TextInput.js","assets/TextField.js","assets/useFormControl.js","assets/formControlState.js","assets/Modal2.js","assets/List.js","assets/outlinedInputClasses.js","assets/GlobalStyles.js","assets/CustomDecimal.js","assets/react-number-format.es.js","assets/IconButton.js","assets/Modal.js","assets/Close2.js","assets/ModalTransition.js","assets/CheckCircle.js","assets/DialogContent.js","assets/DialogActions.js","assets/LoadingButton.js","assets/constantsLists.js","assets/SelectHookForm.js","assets/Box.js","assets/MenuItem.js","assets/listItemIconClasses.js","assets/listItemTextClasses.js","assets/FormControlLabel.js","assets/Checkbox.js","assets/CheckBoxOutlineBlank.js","assets/AutocompleteServer.js","assets/useFetch.js","assets/useHttpService.js","assets/Autocomplete.js","assets/Close.js","assets/Chip.js","assets/ListItem.js","assets/Alert.js","assets/InputAsociarNegocio.js","assets/BootstrapTooltip.js","assets/ChipState.js","assets/SelectedCard.js","assets/TextEditor.js","assets/TextEditor.css","assets/index11.js","assets/InputAdornment.js","assets/BackgroundLoader.js"])),Zn=n=>{const{fieldsNegocios:o}=c.exports.useContext(Q),{remove:s}=o,{negocioIndex:t}=n,{control:a}=A(),r=D({control:a,name:`negocios.${t}`});return r.contratos&&r.contratos.length>0?l(_,{children:[e(Gn,{negocioIndex:t}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Ze,{})}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Yn,{negocioIndex:t})}),e(Ye,{}),e(Xn,{})]}):l(_,{children:[e(me,{severity:"error",action:t!==0&&t!=="0"&&e(lo,{variant:"contained",color:"error",size:"small",onClick:()=>s(Number(t)),startIcon:e(so,{}),children:"Remover negocio"}),children:e(w,{fontWeight:"bold",children:"Favor ingresar al menos un empleado"})}),e(c.exports.Suspense,{fallback:e("div",{}),children:e(Ze,{})}),e(Ye,{})]})},ho=c.exports.createContext({}),et=({children:n})=>{const o=J();return e(ho.Provider,{value:{modalAgregarNegocio:o},children:n})},ot=I().shape({negocio_cobrar:I().shape({id:se().typeError("Favor ingresar el id").integer("Favor ingresar el negocio").positive("Favor ingresar el negocio").required("Favor ingresar el id")}).typeError("Favor seleccionar un negocio").required("Favor seleccionar un negocio")}),nt=(n,o)=>{const{fieldsNegocios:s}=c.exports.useContext(Q),{append:t}=s,{control:a}=A(),r=D({control:a,name:"negocios"}),p=()=>{o(),n.reset({})};return{handleAppendNegocio:i=>{r.findIndex(N=>Number(N.id_negocio)===Number(i.negocio_cobrar.id))===-1?(t({id_negocio:i.negocio_cobrar.id,id_cliente:i.negocio_cobrar.id_cliente,nombre:i.negocio_cobrar.nombre_negocio,tipo:i.negocio_cobrar.tipo,contratos:[]}),p()):n.setError("negocio_cobrar",{message:"El negocio ya existe en la planilla actual"})},handleSetHide:p}},tt=()=>{const{modalAgregarNegocio:n}=c.exports.useContext(ho),{modalState:o,setHide:s}=n,t=re({resolver:ce(ot)}),{handleAppendNegocio:a,handleSetHide:r}=nt(t,s);return e(de,k(v({},t),{children:e(G,{state:o,title:"Agregar Negocio",setHide:()=>r(),cancelBotton:{text:"Cerrar",actionFunction:()=>r()},actionButton:{text:"Agregar",actionFunction:t.handleSubmit(a)},children:e(Bo,{name:"negocio_cobrar",label:"Negocio"})})}))},go=c.exports.createContext({}),at=({children:n,clienteId:o,mainNegocioId:s})=>{const t=J();return e(go.Provider,{value:{modalSaveData:t,clienteId:o,mainNegocioId:s},children:n})},st="_divSaveData_28j6j_1";var rt={divSaveData:st};const ct=()=>{const{id:n}=ee(),{fetcherSaveData:o}=c.exports.useContext(Q),[,s]=o;return{handleSaveData:a=>{s(`/admin/planillas/${n}/edit`,{method:"POST",data:a})}}},it=()=>{const{fetcherSaveData:n}=c.exports.useContext(Q),{modalSaveData:o}=c.exports.useContext(go),{modalState:s,setHide:t,setOpen:a}=o,{handleSubmit:r,formState:p}=A(),{errors:m}=p,{handleSaveData:i}=ct(),[h,,N,g]=n,[,,,d]=c.exports.useContext(F),{setEditing:b}=c.exports.useContext(q),C=c.exports.useCallback(()=>{t(),N&&!g&&(b(!1),d())},[N,g]);return l(_,{children:[e(le,{}),e("div",{className:rt.divSaveData,children:e(lo,{variant:"outlined",onClick:()=>a(),children:"Guardar"})}),e(G,{state:s,setHide:()=>C(),title:"\xA1Atenci\xF3n!",type:N?"SUCCESS":"ERROR",cancelBotton:{text:"Cerrar",actionFunction:()=>C()},actionButton:!m.negocios&&(!N||g)?{text:"Guardar",actionFunction:r(i),isLoading:h}:void 0,children:N?l(_,{children:[N.message,"."]}):m.negocios?e(_,{children:"Se encontraron errores en el formulario. Favor corregir antes de avanzar."}):!m.negocios&&!g?e(_,{children:"\xBFRealmente desea guardar los datos?"}):e(_,{children:g==null?void 0:g.message})})]})},lt=()=>{const n=c.exports.useContext(Q),{fieldsNegocios:o,isDecimo:s}=n,{mainNegocioId:t,clienteId:a}=n,{fields:r}=o;return l(et,{children:[e(Z,{variant:"outlined",className:x.paperTables,children:l(z,{direction:"column",spacing:1,marginTop:1,margin:1,children:[r.map((p,m)=>l(Z,{variant:"outlined",children:[l(w,{variant:"h5",textTransform:"uppercase",fontWeight:"bold",padding:1,color:m===0?"red":"darkorange",children:[p.tipo," ",p.nombre]}),e(Bn,{mainNegocioId:r[0].id_negocio,clienteId:r[0].id_cliente,negocioIndex:m,isDecimo:s,children:e(Wn,{children:e(Zn,{negocioIndex:m})})})]},`${m}`)),e(Z,{variant:"outlined",className:x.paperNotas,children:l(z,{direction:"column",spacing:1,children:[e(w,{variant:"h5",children:"Notas:"}),e(le,{}),e(Wo,{name:"notas",height:300})]})}),e(at,{mainNegocioId:t,clienteId:a,children:e(it,{})})]})}),e(tt,{})]})},dt=()=>e(Cn,{children:e(lt,{})}),mt=I({edit_token:R().trim().required("Favor ingresar la contrase\xF1a")}),ut=()=>{var P;const{id:n}=ee(),{modalEditar:o,setEditing:s}=c.exports.useContext(q),{modalState:t,setHide:a}=o,{register:r,formState:p,handleSubmit:m,reset:i}=re({mode:"all",resolver:ce(mt)}),{errors:h}=p,N=K(),[g,d,b,C,,y]=N,M=c.exports.useCallback(()=>{a(),b&&s(!0),y(),i({edit_token:""})},[b,C]);return e(G,{state:t,setHide:M,type:b?"SUCCESS":"ERROR",title:b?"\xA1Atenci\xF3n!":"Favor ingresar la contrase\xF1a",cancelBotton:{text:b?"Cerrar":"Cancelar",actionFunction:M},actionButton:b?void 0:{text:"V\xE1lidar",actionFunction:m(async E=>{i(),await d(`/admin/planillas/${n}/check-token`,{method:"POST",data:E})}),isLoading:g},children:l("div",{style:{display:"flex",flexDirection:"column"},children:[(b||C)&&l(me,{variant:"outlined",severity:b?"success":"error",style:{marginBottom:10},children:[b&&!C&&e(_,{children:b.message}),C&&e(_,{children:C.message})]}),!b&&e(Y,v({label:"Contrase\xF1a",fullWidth:!0,required:!0,helperText:(P=h==null?void 0:h.edit_token)==null?void 0:P.message,error:!!(h!=null&&h.edit_token),autoFocus:!0,focused:!0},r("edit_token")))]})})};var _e={},pt=no.exports;Object.defineProperty(_e,"__esModule",{value:!0});var xo=_e.default=void 0,ht=pt(oo),gt=to,xt=(0,ht.default)((0,gt.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopy");xo=_e.default=xt;const Nt=()=>{const{id:n}=ee(),{modalGenerarPassword:o}=c.exports.useContext(q),{modalState:s,setHide:t}=o,a=K(),[r,p,m,i,,h]=a,N=c.exports.useCallback(()=>{t(),h()},[]);return c.exports.useEffect(()=>{(()=>{s?p(`/admin/planillas/${n}/generate-token`,{method:"POST"}):h()})()},[s]),l(G,{state:s,setHide:N,cancelBotton:{text:"Cerrar",actionFunction:N,isLoading:r},actionButton:!m&&i?{text:"Reintentar",actionFunction:()=>{h(),p(`/admin/planillas/${n}/generate-token`,{method:"POST"})}}:void 0,title:"\xA1Atenci\xF3n!",type:m?"SUCCESS":"ERROR",body:i==null?void 0:i.message,children:[r&&e(eo,{}),!r&&m&&e("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:e(Y,{InputProps:{readOnly:!0,endAdornment:e(Go,{position:"end",children:e(ro,{onClick:()=>navigator.clipboard.writeText(m.token),children:e(xo,{})})})},value:m==null?void 0:m.token})})]})},bt=()=>{const{modalDownload:n,fetchDownload:o}=c.exports.useContext(q),{modalState:s,setHide:t}=n,[a,,r,p,,m]=o,i=c.exports.useCallback(()=>{t(),m()},[]);return l(_,{children:[e(Uo,{open:a}),e(G,{state:s,title:"\xA1Atenci\xF3n!",type:r?"SUCCESS":"ERROR",setHide:()=>i(),cancelBotton:{text:"Cerrar",actionFunction:()=>i()},children:p?p.message:l(_,{children:["\xA1Archivo descargado correctamente!. ",e("br",{})," \xA1Si el archivo se envi\xF3 al ",e("strong",{children:"SIPE"}),", recuerde marcar la planilla como enviada!"]})})]})},_t=()=>{const[,n,,,o]=c.exports.useContext(F),{modalSend:s}=c.exports.useContext(q),{modalState:t,setHide:a}=s,r=K(),[p,m,i,h,,N]=r,{id:g}=ee(),d=c.exports.useCallback(()=>{a(),N(),i&&o(k(v({},n),{fecha_send_sipe:"2020-01-01"}))},[i,h]);return e(_,{children:e(G,{state:t,setHide:()=>d(),title:"\xA1Atenci\xF3n!",type:i?"SUCCESS":"ERROR",body:i?i.message:h?h.message:"\xBFRealmente desea marcar la planilla como formarto SIPE enviado?",actionButton:i?void 0:{text:"Ok",actionFunction:()=>{m(`/admin/planillas/${g}/send`,{method:"POST",data:{name:"sipe"}})},isLoading:p},cancelBotton:{text:i?"Cerrar":"Cancelar",actionFunction:()=>d()}})})},ft=()=>{const{editing:n}=c.exports.useContext(q),[,o,s]=c.exports.useContext(F);return l(_,{children:[!o&&!s&&e(eo,{}),!o&&s&&e(wo,{text:s.message}),o&&!s&&l(z,{direction:"column",spacing:1,children:[e(en,{}),n?e(dt,{}):l(_,{children:[e(rn,{}),e(pn,{}),e(fn,{}),e(ut,{}),e(bt,{}),e(Nt,{}),e(_t,{})]})]})]})},vt=()=>e(Jo,{children:l(bn,{children:[e(Co,{message:"Planilla"}),e(ft,{})]})});var ua=Object.freeze(Object.defineProperty({__proto__:null,default:vt},Symbol.toStringTag,{value:"Module"}));export{ho as M,F as P,ne as a,ua as i};
