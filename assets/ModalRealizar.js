var N=Object.defineProperty,P=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var S=(e,r,o)=>r in e?N(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,l=(e,r)=>{for(var o in r||(r={}))j.call(r,o)&&S(e,o,r[o]);if(v)for(var o of v(r))k.call(r,o)&&S(e,o,r[o]);return e},f=(e,r)=>P(e,H(r));import{r as a,a as t,j as m,A as F,F as R}from"./index.js";import{B as w,a as E}from"./BootstrapModalTitle.js";import{b as d,C as I}from"./index14.js";import{d as L}from"./WorkspacePremium.js";import{F as G}from"./yup.module.js";import{P as O,B as U,a as W,N as q,E as J,A as K}from"./AbrirCuenta.js";import{S as Q}from"./Stack.js";import{b as V}from"./ModalTransition.js";import{L as A}from"./LoadingButton.js";import{A as X}from"./Alert.js";import{B as Y}from"./BootstrapDivContent.js";import{T as B}from"./Typography.js";import"./Close2.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useControlled.js";import"./useIsFocusVisible.js";import"./IconButton.js";import"./ButtonBase.js";import"./emotion-react.browser.esm.js";import"./HeaderTitle.js";import"./Divider.js";import"./Loader.js";import"./Grid.js";import"./CircularProgress.js";import"./useLocalStorage.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./SelectHookForm.js";import"./Box.js";import"./TextField.js";import"./react-is.production.min.js";import"./Modal2.js";import"./Backdrop.js";import"./isHostComponent.js";import"./Portal.js";import"./Paper.js";import"./Grow.js";import"./List.js";import"./GlobalStyles.js";import"./MenuItem.js";import"./listItemIconClasses.js";import"./listItemTextClasses.js";import"./TextInput.js";import"./AutocompleteServer.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./Close.js";import"./Popper.js";import"./Chip.js";import"./CheckBoxOutlineBlank.js";import"./Checkbox.js";import"./DecimalInput.js";import"./CustomDecimal.js";import"./react-number-format.es.js";import"./string.helper.js";import"./Button.js";import"./DireccionProvider.js";import"./DatePicker.js";import"./MobileDatePicker.js";import"./MonthPicker.js";import"./PureDateInput.js";import"./CalendarPicker.js";import"./InputAdornment.js";import"./DialogContent.js";import"./index11.js";import"./FormControlLabel.js";const Z=()=>{const{form:e}=a.exports.useContext(d);return t(G,f(l({},e),{children:m(Q,{spacing:1,direction:"column",children:[t(O,{}),t(U,{}),t(W,{}),t(q,{}),t(J,{}),t(K,{})]})}))},$=()=>{const{authState:e}=a.exports.useContext(F),{nombre:r,apellido:o}=e,{pagination:n}=a.exports.useContext(I),{fetcher:p}=n,[,,s,h,g]=p,x=a.exports.useContext(d),{modalRealizar:C,fetcher:T,handleHide:z,divRef:D}=x,[,M]=C,[,y]=T;return{handleSend:i=>{var b;(b=D.current)==null||b.scrollTo(0,0),y("/admin/certificaciones-ingresos",{method:"POST",data:i}).then(_=>{if(_.data&&!_.error){if(!h){const u=s;u==null||u.resultados.unshift({id:_.data.id,nombre:r||"",apellido:o||"",id_banco:i.banco.id,id_cliente:i.cliente.id,fecha_creacion:new Date,fecha_impresion:null,nombre_encargado:i.nombre_encargado,apellido_encargado:i.apellido_encargado,identificacion_encargado:i.identificacion_encargado,cargo_encargado:i.cargo_encargado,banco:i.banco,cliente:i.cliente,imprimir_actividades:i.imprimir_actividades,genero:i.genero.toUpperCase(),actividad:i.actividad,text_negocio:i.text_negocio,abrir_cuenta:Boolean(Number(i.abrir_cuenta)),negocios:i.negocios.map(c=>f(l({},c),{fecha_aviso_op:new Date(c.fecha_aviso_op)})),periodos:i.periodos.map(c=>f(l({},c),{total:(Math.round((Number(c.ingreso)-Number(c.gasto))*100)/100).toFixed(2)}))}),g(l({},u))}z(),M(!1)}})}}},oo=()=>{const{handleHide:e,form:r,fetcher:o}=a.exports.useContext(d),[n]=o,{handleSubmit:p}=r,{handleSend:s}=$();return m(V,{children:[t(A,{loading:n,variant:"outlined",color:"inherit",onClick:()=>e(),children:"Cerrar"}),t(A,{loading:n,variant:"outlined",color:"primary",onClick:p(s),children:"Guardar"})]})},ro=()=>{const{fetcher:e}=a.exports.useContext(d),[r,,o,n]=e;return t(R,{children:!r&&(o||n)&&t(X,{variant:"filled",severity:o?"success":"error",children:(o==null?void 0:o.message)||(n==null?void 0:n.message)})})},br=()=>{const{authState:e}=a.exports.useContext(F),{nombre:r,apellido:o}=e,n=a.exports.useContext(d),{modalRealizar:p,handleHide:s,fetcher:h,divRef:g}=n,[x]=p,[C]=h;return t(R,{children:m(w,{open:x,onClose:()=>s(),fullWidth:!0,fullScreen:!0,children:[t(E,{onClose:C?void 0:()=>s(),children:m(B,{textTransform:"uppercase",display:"flex",flexDirection:"row",gap:1,alignItems:"center",children:[t(L,{}),"Formulario de certificaci\xF3n de ingresos"]})}),m(Y,{divRef:g,children:[m(B,{component:"span",variant:"h3",textTransform:"uppercase",children:["Realizado por: ",r," ",o]}),t(ro,{}),t(Z,{})]}),t(oo,{})]})})};export{br as default};
