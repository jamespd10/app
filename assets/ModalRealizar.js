var y=Object.defineProperty,P=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var S=(t,r,o)=>r in t?y(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,l=(t,r)=>{for(var o in r||(r={}))j.call(r,o)&&S(t,o,r[o]);if(v)for(var o of v(r))k.call(r,o)&&S(t,o,r[o]);return t},f=(t,r)=>P(t,H(r));import{r as a,a as i,j as m,A as F,F as R}from"./index.js";import{B as w,a as E}from"./BootstrapModalTitle.js";import{b as d,C as I}from"./index14.js";import{d as L}from"./WorkspacePremium.js";import{F as G}from"./yup.module.js";import{P as O,B as U,a as W,N as q,E as J,A as K}from"./AbrirCuenta.js";import{S as Q}from"./Stack.js";import{D as V}from"./DialogActions.js";import{L as B}from"./LoadingButton.js";import{A as X}from"./Alert.js";import{B as Y}from"./BootstrapDivContent.js";import{T as A}from"./Typography.js";import"./ModalTransition.js";import"./Backdrop.js";import"./Fade.js";import"./Modal2.js";import"./isHostComponent.js";import"./useControlled.js";import"./Portal.js";import"./Paper.js";import"./Close2.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useIsFocusVisible.js";import"./IconButton.js";import"./ButtonBase.js";import"./emotion-react.browser.esm.js";import"./HeaderTitle.js";import"./Divider.js";import"./Loader.js";import"./Grid.js";import"./CircularProgress.js";import"./useLocalStorage.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./SelectHookForm.js";import"./Box.js";import"./TextField.js";import"./useFormControl.js";import"./formControlState.js";import"./react-is.production.min.js";import"./Grow.js";import"./List.js";import"./outlinedInputClasses.js";import"./GlobalStyles.js";import"./MenuItem.js";import"./listItemIconClasses.js";import"./listItemTextClasses.js";import"./TextInput.js";import"./AutocompleteServer.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./Close.js";import"./Popper.js";import"./Chip.js";import"./CheckBoxOutlineBlank.js";import"./Checkbox.js";import"./DecimalInput.js";import"./CustomDecimal.js";import"./react-number-format.es.js";import"./string.helper.js";import"./FormControlLabel.js";import"./Button.js";import"./DireccionProvider.js";import"./DatePicker.js";import"./MobileDatePicker.js";import"./MonthPicker.js";import"./PureDateInput.js";import"./CalendarPicker.js";import"./InputAdornment.js";import"./DialogContent.js";import"./index11.js";const Z=()=>{const{form:t}=a.exports.useContext(d);return i(G,f(l({},t),{children:m(Q,{spacing:1,direction:"column",children:[i(O,{}),i(U,{}),i(W,{}),i(q,{}),i(J,{}),i(K,{})]})}))},$=()=>{const{authState:t}=a.exports.useContext(F),{nombre:r,apellido:o}=t,{pagination:n}=a.exports.useContext(I),{fetcher:p}=n,[,,s,h,g]=p,x=a.exports.useContext(d),{modalRealizar:_,fetcher:D,handleHide:T,divRef:z}=x,[,M]=_,[,N]=D;return{handleSend:e=>{var b;(b=z.current)==null||b.scrollTo(0,0),N("/admin/certificaciones-ingresos",{method:"POST",data:e}).then(C=>{if(C.data&&!C.error){if(!h){const u=s;u==null||u.resultados.unshift({id:C.data.id,nombre:r||"",apellido:o||"",id_banco:e.banco.id,id_cliente:e.cliente.id,fecha_creacion:new Date,fecha_impresion:null,nombre_encargado:e.nombre_encargado,apellido_encargado:e.apellido_encargado,identificacion_encargado:e.identificacion_encargado,cargo_encargado:e.cargo_encargado,banco:e.banco,cliente:e.cliente,imprimir_actividades:e.imprimir_actividades,genero:e.genero.toUpperCase(),actividad:e.actividad,text_negocio:e.text_negocio,abrir_cuenta:Boolean(Number(e.abrir_cuenta)),print_anual:Boolean(Number(e.print_anual)),negocios:e.negocios.map(c=>f(l({},c),{fecha_aviso_op:new Date(c.fecha_aviso_op)})),periodos:e.periodos.map(c=>f(l({},c),{total:(Math.round((Number(c.ingreso)-Number(c.gasto))*100)/100).toFixed(2)}))}),g(l({},u))}T(),M(!1)}})}}},oo=()=>{const{handleHide:t,form:r,fetcher:o}=a.exports.useContext(d),[n]=o,{handleSubmit:p}=r,{handleSend:s}=$();return m(V,{children:[i(B,{loading:n,variant:"outlined",color:"inherit",onClick:()=>t(),children:"Cerrar"}),i(B,{loading:n,variant:"outlined",color:"primary",onClick:p(s),children:"Guardar"})]})},ro=()=>{const{fetcher:t}=a.exports.useContext(d),[r,,o,n]=t;return i(R,{children:!r&&(o||n)&&i(X,{variant:"filled",severity:o?"success":"error",children:(o==null?void 0:o.message)||(n==null?void 0:n.message)})})},Fr=()=>{const{authState:t}=a.exports.useContext(F),{nombre:r,apellido:o}=t,n=a.exports.useContext(d),{modalRealizar:p,handleHide:s,fetcher:h,divRef:g}=n,[x]=p,[_]=h;return i(R,{children:m(w,{open:x,onClose:()=>s(),fullWidth:!0,fullScreen:!0,children:[i(E,{onClose:_?void 0:()=>s(),children:m(A,{textTransform:"uppercase",display:"flex",flexDirection:"row",gap:1,alignItems:"center",children:[i(L,{}),"Formulario de certificaci\xF3n de ingresos"]})}),m(Y,{divRef:g,children:[m(A,{component:"span",variant:"h3",textTransform:"uppercase",children:["Realizado por: ",r," ",o]}),i(ro,{}),i(Z,{})]}),i(oo,{})]})})};export{Fr as default};
