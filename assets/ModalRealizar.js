var y=Object.defineProperty,P=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var S=(e,r,o)=>r in e?y(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,l=(e,r)=>{for(var o in r||(r={}))j.call(r,o)&&S(e,o,r[o]);if(v)for(var o of v(r))k.call(r,o)&&S(e,o,r[o]);return e},f=(e,r)=>P(e,H(r));import{r as a,a as i,j as m,A as F,F as R}from"./index.js";import{B as w,a as E}from"./BootstrapModalTitle.js";import{b as d,C as I}from"./index14.js";import{d as L}from"./WorkspacePremium.js";import{F as G}from"./yup.module.js";import{P as O,B as U,a as W,N as q,E as J,A as K}from"./AbrirCuenta.js";import{S as Q}from"./Stack.js";import{b as V}from"./ModalTransition.js";import{L as B}from"./LoadingButton.js";import{A as X}from"./Alert.js";import{B as Y}from"./BootstrapDivContent.js";import{T as A}from"./Typography.js";import"./Close2.js";import"./jsx-runtime_commonjs-proxy.js";import"./createSvgIcon.js";import"./useControlled.js";import"./useIsFocusVisible.js";import"./IconButton.js";import"./ButtonBase.js";import"./emotion-react.browser.esm.js";import"./HeaderTitle.js";import"./Divider.js";import"./Loader.js";import"./Grid.js";import"./CircularProgress.js";import"./useLocalStorage.js";import"./regex.js";import"./array.js";import"./upperFirst.js";import"./SelectHookForm.js";import"./Box.js";import"./TextField.js";import"./useFormControl.js";import"./react-is.production.min.js";import"./Modal2.js";import"./Backdrop.js";import"./isHostComponent.js";import"./Portal.js";import"./Paper.js";import"./Grow.js";import"./List.js";import"./GlobalStyles.js";import"./MenuItem.js";import"./listItemIconClasses.js";import"./listItemTextClasses.js";import"./TextInput.js";import"./AutocompleteServer.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./Close.js";import"./Popper.js";import"./Chip.js";import"./CheckBoxOutlineBlank.js";import"./Checkbox.js";import"./DecimalInput.js";import"./CustomDecimal.js";import"./react-number-format.es.js";import"./string.helper.js";import"./FormControlLabel.js";import"./Button.js";import"./DireccionProvider.js";import"./DatePicker.js";import"./MobileDatePicker.js";import"./MonthPicker.js";import"./PureDateInput.js";import"./CalendarPicker.js";import"./InputAdornment.js";import"./DialogContent.js";import"./index11.js";const Z=()=>{const{form:e}=a.exports.useContext(d);return i(G,f(l({},e),{children:m(Q,{spacing:1,direction:"column",children:[i(O,{}),i(U,{}),i(W,{}),i(q,{}),i(J,{}),i(K,{})]})}))},$=()=>{const{authState:e}=a.exports.useContext(F),{nombre:r,apellido:o}=e,{pagination:n}=a.exports.useContext(I),{fetcher:p}=n,[,,s,h,g]=p,x=a.exports.useContext(d),{modalRealizar:_,fetcher:T,handleHide:z,divRef:D}=x,[,M]=_,[,N]=T;return{handleSend:t=>{var b;(b=D.current)==null||b.scrollTo(0,0),N("/admin/certificaciones-ingresos",{method:"POST",data:t}).then(C=>{if(C.data&&!C.error){if(!h){const u=s;u==null||u.resultados.unshift({id:C.data.id,nombre:r||"",apellido:o||"",id_banco:t.banco.id,id_cliente:t.cliente.id,fecha_creacion:new Date,fecha_impresion:null,nombre_encargado:t.nombre_encargado,apellido_encargado:t.apellido_encargado,identificacion_encargado:t.identificacion_encargado,cargo_encargado:t.cargo_encargado,banco:t.banco,cliente:t.cliente,imprimir_actividades:t.imprimir_actividades,genero:t.genero.toUpperCase(),actividad:t.actividad,text_negocio:t.text_negocio,abrir_cuenta:Boolean(Number(t.abrir_cuenta)),print_anual:Boolean(Number(t.print_anual)),negocios:t.negocios.map(c=>f(l({},c),{fecha_aviso_op:new Date(c.fecha_aviso_op)})),periodos:t.periodos.map(c=>f(l({},c),{total:(Math.round((Number(c.ingreso)-Number(c.gasto))*100)/100).toFixed(2)}))}),g(l({},u))}z(),M(!1)}})}}},oo=()=>{const{handleHide:e,form:r,fetcher:o}=a.exports.useContext(d),[n]=o,{handleSubmit:p}=r,{handleSend:s}=$();return m(V,{children:[i(B,{loading:n,variant:"outlined",color:"inherit",onClick:()=>e(),children:"Cerrar"}),i(B,{loading:n,variant:"outlined",color:"primary",onClick:p(s),children:"Guardar"})]})},ro=()=>{const{fetcher:e}=a.exports.useContext(d),[r,,o,n]=e;return i(R,{children:!r&&(o||n)&&i(X,{variant:"filled",severity:o?"success":"error",children:(o==null?void 0:o.message)||(n==null?void 0:n.message)})})},vr=()=>{const{authState:e}=a.exports.useContext(F),{nombre:r,apellido:o}=e,n=a.exports.useContext(d),{modalRealizar:p,handleHide:s,fetcher:h,divRef:g}=n,[x]=p,[_]=h;return i(R,{children:m(w,{open:x,onClose:()=>s(),fullWidth:!0,fullScreen:!0,children:[i(E,{onClose:_?void 0:()=>s(),children:m(A,{textTransform:"uppercase",display:"flex",flexDirection:"row",gap:1,alignItems:"center",children:[i(L,{}),"Formulario de certificaci\xF3n de ingresos"]})}),m(Y,{divRef:g,children:[m(A,{component:"span",variant:"h3",textTransform:"uppercase",children:["Realizado por: ",r," ",o]}),i(ro,{}),i(Z,{})]}),i(oo,{})]})})};export{vr as default};
