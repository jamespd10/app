var U=Object.defineProperty,G=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var j=(o,r,a)=>r in o?U(o,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[r]=a,v=(o,r)=>{for(var a in r||(r={}))J.call(r,a)&&j(o,a,r[a]);if(q)for(var a of q(r))K.call(r,a)&&j(o,a,r[a]);return o},_=(o,r)=>G(o,H(r));import{T as D}from"./TextInput.js";import{u as w,b as W}from"./yup.module.js";import{A as F}from"./AutocompleteServer.js";import{d as T,a as k}from"./CheckBoxOutlineBlank.js";import{a as e,F as $,r as b,j as h}from"./index.js";import{C as O}from"./Checkbox.js";import{T as x}from"./Typography.js";import{D as z,a as Q}from"./DireccionProvider.js";import{F as X}from"./Fade.js";import{S as N}from"./Stack.js";import{D as M}from"./Divider.js";import{D as Y}from"./DatePicker.js";import{B as Z}from"./Button.js";import"./TextField.js";import"./useFormControl.js";import"./useControlled.js";import"./useId.js";import"./formControlState.js";import"./react-is.production.min.js";import"./Modal2.js";import"./Backdrop.js";import"./isHostComponent.js";import"./Portal.js";import"./Paper.js";import"./Grow.js";import"./List.js";import"./createSvgIcon.js";import"./outlinedInputClasses.js";import"./GlobalStyles.js";import"./emotion-react.browser.esm.js";import"./useFetch.js";import"./useHttpService.js";import"./Autocomplete.js";import"./Close.js";import"./IconButton.js";import"./ButtonBase.js";import"./useIsFocusVisible.js";import"./Popper.js";import"./Chip.js";import"./jsx-runtime_commonjs-proxy.js";import"./SwitchBase.js";import"./MobileDatePicker.js";import"./MonthPicker.js";import"./PureDateInput.js";import"./CalendarPicker.js";import"./Grid.js";import"./InputAdornment.js";import"./ModalTransition.js";import"./DialogContent.js";import"./dialogTitleClasses.js";import"./DialogActions.js";import"./index11.js";const ee="_container_10uy9_1",ie="_negocio_10uy9_7",oe="_containter_10uy9_23",te="_legend_10uy9_23",ne="_flexNowrap_10uy9_28",re="_active_10uy9_39",ce="_flexColumn_10uy9_47",ae="_flexRowBetween_10uy9_54";var y={container:ee,negocio:ie,containter:oe,legend:te,flexNowrap:ne,active:re,flexColumn:ce,flexRowBetween:ae};const le=()=>{var m;const{control:o,setValue:r,formState:a}=w(),{errors:t}=a,f=W({control:o,name:"negocios"}),n=W({control:o,name:"cliente"});return e($,{children:e(F,{ref:null,inputProps:{label:"Negocios",placeholder:"Buscar...",error:!!(t!=null&&t.negocios),helperText:(m=t==null?void 0:t.negocios)==null?void 0:m.message},disableStyle:!0,enableFirst:!0,size:"small",value:f,fullWidth:!0,multiple:!0,onChange:(c,i)=>r("negocios",i,{shouldValidate:!0}),isOptionEqualToValue:(c,i)=>c.id===i.id,urlFetch:"/admin/certificaciones-ingresos/negocios",params:{id_cliente:n==null?void 0:n.id},getOptionLabel:c=>`${c.tipo||""} ${c.nombre_negocio||""}`.trim(),renderOption:(c,i,{selected:u})=>b.exports.createElement("li",_(v({},c),{className:`${y.flexNowrap} ${u?y.active:""}`,key:`${i.id}-${i.ruc}`}),e(O,{icon:e(T,{}),checkedIcon:e(k,{}),checked:u,size:"small"}),h("div",{className:y.flexColumn,children:[h(x,{variant:"body1",fontWeight:"bold",component:"span",children:[i.tipo," ",i.nombre_negocio]}),h("div",{className:y.flexRowBetween,children:[i.ruc&&i.ruc!==""&&e(x,{variant:"caption",component:"span",children:i.ruc}),i.ruta&&i.ruta!==""&&e(x,{variant:"caption",component:"span",children:i.ruta})]})]}))})})},se=({i:o})=>{var i,u,g,p,l;const{setValue:r,formState:a}=w(),{errors:t}=a,f=b.exports.useContext(z),{distrito:n,corregimiento:m,setCorregimiento:c}=f;return e($,{children:e(F,{ref:null,inputProps:{label:"Corregimiento",error:!!((u=(i=t==null?void 0:t.negocios)==null?void 0:i[o])!=null&&u.corregimiento),helperText:(l=(p=(g=t==null?void 0:t.negocios)==null?void 0:g[o])==null?void 0:p.corregimiento)==null?void 0:l.message},disableStyle:!0,params:{id_distrito:n?n.id:""},value:m,enableFirst:!0,fullWidth:!0,size:"small",onChange:(s,d)=>{c(d),d?r(`negocios.${o}.corregimiento`,d.corregimiento):r(`negocios.${o}.corregimiento`,"")},isOptionEqualToValue:(s,d)=>s.id===d.id,urlFetch:"/corregimientos",getOptionLabel:s=>s.corregimiento,renderOption:(s,d,{selected:C})=>b.exports.createElement("li",_(v({},s),{key:d.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(O,{icon:e(T,{}),checkedIcon:e(k,{}),checked:C,size:"small"}),h("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase",padding:0,margin:0},children:[e(x,{variant:"body1",fontWeight:"bold",p:0,m:0,children:d.corregimiento}),h(x,{variant:"caption",p:0,m:0,children:[d.distrito," - ",d.provincia]})]}))})})},me=({i:o})=>{var c,i,u,g,p;const{setValue:r,formState:a}=w(),{errors:t}=a,{provincia:f,distrito:n,setDistrito:m}=b.exports.useContext(z);return e($,{children:e(F,{ref:null,inputProps:{label:"Distrito",error:!!((i=(c=t==null?void 0:t.negocios)==null?void 0:c[o])!=null&&i.distrito),helperText:(p=(g=(u=t==null?void 0:t.negocios)==null?void 0:u[o])==null?void 0:g.distrito)==null?void 0:p.message},disableStyle:!0,params:{id_provincia:f?f.id:""},value:n,enableFirst:!0,fullWidth:!0,size:"small",onChange:(l,s)=>{m(s),s?r(`negocios.${o}.distrito`,s.distrito):r(`negocios.${o}.distrito`,"")},isOptionEqualToValue:(l,s)=>l.id===s.id,urlFetch:"/distritos",getOptionLabel:l=>l.distrito,renderOption:(l,s,{selected:d})=>b.exports.createElement("li",_(v({},l),{key:s.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(O,{icon:e(T,{}),checkedIcon:e(k,{}),checked:d,size:"small"}),h("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase",padding:0,margin:0},children:[e(x,{variant:"body1",fontWeight:"bold",p:0,m:0,children:s.distrito}),e(x,{variant:"caption",p:0,m:0,children:s.provincia})]}))})})},pe=({i:o})=>{var m,c,i,u,g;const{setValue:r,formState:a}=w(),{errors:t}=a,{provincia:f,setProvincia:n}=b.exports.useContext(z);return e($,{children:e(F,{ref:null,inputProps:{label:"Provincia",error:!!((c=(m=t==null?void 0:t.negocios)==null?void 0:m[o])!=null&&c.provincia),helperText:(g=(u=(i=t==null?void 0:t.negocios)==null?void 0:i[o])==null?void 0:u.provincia)==null?void 0:g.message},disableStyle:!0,enableFirst:!0,value:f,fullWidth:!0,size:"small",onChange:(p,l)=>{n(l),l?r(`negocios.${o}.provincia`,l.provincia):r(`negocios.${o}.provincia`,"")},isOptionEqualToValue:(p,l)=>p.id===l.id,urlFetch:"/provincias",getOptionLabel:p=>p.provincia,renderOption:(p,l,{selected:s})=>b.exports.createElement("li",_(v({},p),{key:l.id,style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}}),e(O,{icon:e(T,{}),checkedIcon:e(k,{}),checked:s,size:"small"}),e("div",{style:{display:"flex",flexDirection:"column",textTransform:"uppercase"},children:e(x,{variant:"body1",fontWeight:"bold",children:l.provincia})}))})})},de=({show:o,children:r})=>e(X,{in:o,timeout:500,children:r}),di=()=>{const o=w(),{control:r,register:a,setValue:t,formState:f}=o,{errors:n}=f,m=W({control:r,name:"negocios"});return e(de,{show:!0,children:h(N,{className:y.container,direction:"column",spacing:1,children:[e(x,{variant:"h5",children:"Negocios"}),e(M,{}),e(le,{}),e(M,{}),m==null?void 0:m.map((c,i)=>{var u,g,p,l,s,d,C,V,P,A;return e(Q,{provincia:c.provincia?{id:0,provincia:c.provincia}:null,distrito:c.distrito?{id:0,distrito:c.distrito,id_provincia:0,provincia:""}:null,corregimiento:c.corregimiento?{id:0,corregimiento:c.corregimiento,id_distrito:0,distrito:"",provincia:""}:null,children:h("fieldset",{className:y.negocio,children:[h("legend",{className:y.legend,children:[c.tipo," ",c.nombre_negocio]}),h(N,{spacing:1,direction:{xs:"column",md:"row"},children:[e(D,_(v({label:"Actividad",size:"small",fullWidth:!0},a(`negocios.${i}.actividad`)),{error:!!((g=(u=n==null?void 0:n.negocios)==null?void 0:u[i])!=null&&g.actividad),helperText:(s=(l=(p=n==null?void 0:n.negocios)==null?void 0:p[i])==null?void 0:l.actividad)==null?void 0:s.message})),e(Y,{label:"Fecha de aviso de operaci\xF3n",views:["day","month","year"],inputFormat:"dd/MM/yyyy",value:m[i].fecha_aviso_op,onChange:S=>{t(`negocios.${i}.fecha_aviso_op`,S,{shouldValidate:!0})},renderInput:S=>{var E,B,I,L,R;return e(D,_(v({size:"small",fullWidth:!0},S),{error:!!((B=(E=n==null?void 0:n.negocios)==null?void 0:E[i])!=null&&B.fecha_aviso_op),helperText:(R=(L=(I=n==null?void 0:n.negocios)==null?void 0:I[i])==null?void 0:L.fecha_aviso_op)==null?void 0:R.message}))}}),e(D,_(v({label:"Ubicaci\xF3n",size:"small",fullWidth:!0,inputProps:{maxLength:255}},a(`negocios.${i}.ubicacion`)),{error:!!((C=(d=n==null?void 0:n.negocios)==null?void 0:d[i])!=null&&C.ubicacion),helperText:(A=(P=(V=n==null?void 0:n.negocios)==null?void 0:V[i])==null?void 0:P.ubicacion)==null?void 0:A.message}))]}),h(N,{spacing:1,direction:{xs:"column",md:"row"},children:[e(pe,{i}),e(me,{i}),e(se,{i})]})]})},c.id)}),m.length>1&&e(Z,{variant:"contained",color:"error",onClick:()=>{t("negocios",m.slice(0,m.length-1))},children:"Remover \xFAltimo"})]})})};export{di as default};
